<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>é•œæ¹–</title><link rel="manifest" href="../../manifest.json"><meta name="application-name" content="é•œæ¹–"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="é•œæ¹–"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="é•œæ¹–"><meta property="og:url" content="https://xu-hardy.github.io/"><meta property="og:site_name" content="é•œæ¹–"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://xu-hardy.github.io/img/og_image.png"><meta property="article:author" content="Xu"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://xu-hardy.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://xu-hardy.github.io"},"headline":"é•œæ¹–","image":["https://xu-hardy.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Xu"},"publisher":{"@type":"Organization","name":"é•œæ¹–","logo":{"@type":"ImageObject","url":"https://xu-hardy.github.io/img/favicon.svg"}},"description":""}</script><link rel="icon" href="../../img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="../../css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="atom.xml" title="é•œæ¹–" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="../../index.html"><img src="../../img/favicon.svg" alt="é•œæ¹–" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="../../index.html">é•œæ¹–</a><a class="navbar-item" href="../../archives">æ—¶å…‰çº¿</a><a class="navbar-item" href="../../tags">æ ‡ç­¾</a><a class="navbar-item" href="../../categories">åˆ†ç±»</a><a class="navbar-item" href="../../quotes">è¯­å½•</a><a class="navbar-item" href="../../vue_blog">CS Core</a><a class="navbar-item" href="../../aws">AWS</a><a class="navbar-item" href="../../note">å¤‡æ³¨</a><a class="navbar-item" href="../../about">å…³äºæˆ‘</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/cloudsmithy/cloudsmithy.github.io"><i class="fab fa-github"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.733Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">12 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1732ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../easysearch-%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97%EF%BC%9A%E4%BF%AE%E6%94%B9%E7%B4%A2%E5%BC%95%E4%B8%BB%E5%88%86%E7%89%87%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%88split-shrink-reindex/">Easysearch å®æˆ˜æŒ‡å—ï¼šä¿®æ”¹ç´¢å¼•ä¸»åˆ†ç‰‡çš„ä¸‰ç§æ–¹å¼ï¼ˆsplit  shrink  reindex</a></p><div class="content"><p>åœ¨ Easysearchï¼ˆå…¼å®¹ Elasticsearchï¼‰çš„æ¶æ„ä¸­ï¼Œç´¢å¼•çš„ä¸»åˆ†ç‰‡æ•°ï¼ˆ<code>index.number_of_shards</code>ï¼‰ä¸€æ—¦åˆ›å»ºå°±æ— æ³•ç›´æ¥ä¿®æ”¹ã€‚è¿™ç»™å®é™…ä½¿ç”¨å¸¦æ¥æŒ‘æˆ˜ï¼š</p>
<ul>
<li>è®¾å¾—å¤ªå°‘ï¼ŒæŸ¥è¯¢&#x2F;å†™å…¥ç“¶é¢ˆå‡ºç°ï¼›</li>
<li>è®¾å¾—å¤ªå¤šï¼Œèµ„æºæµªè´¹ã€é›†ç¾¤ä¸ç¨³ï¼›</li>
<li>æƒ³å˜æ›´ç»“æ„ï¼Œå´å‘ç°é…ç½®æ˜¯â€œå†™æ­»â€çš„ã€‚</li>
</ul>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥äº†è§£ä¸‰ç§å¸¸è§ä½†æœ¬è´¨ä¸åŒçš„ç´¢å¼•é‡æ„æ–¹å¼ï¼š<code>split</code>ã€<code>shrink</code>ã€<code>reindex</code>ï¼Œæ•™ä½ å¦‚ä½•é€‰æ‹©åˆé€‚æ–¹æ¡ˆã€å®‰å…¨æ“ä½œï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆ<strong>split + shrink æ— æ³•å–ä»£ reindex</strong>ã€‚</p>
<hr>
<h2 id="ğŸ“Œ-ä¸€å¼ å›¾æ¦‚è§ˆä¸‰ç§æ–¹å¼"><a href="#ğŸ“Œ-ä¸€å¼ å›¾æ¦‚è§ˆä¸‰ç§æ–¹å¼" class="headerlink" title="ğŸ“Œ ä¸€å¼ å›¾æ¦‚è§ˆä¸‰ç§æ–¹å¼"></a>ğŸ“Œ ä¸€å¼ å›¾æ¦‚è§ˆä¸‰ç§æ–¹å¼</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æ˜¯å¦é‡å»ºç´¢å¼•</th>
<th>å¯å¦åŸåä½¿ç”¨</th>
<th>æ”¹åˆ†ç‰‡æ•°é™åˆ¶</th>
<th>æ˜¯å¦ä¿ç•™æ•°æ®</th>
<th>æ˜¯å¦æ”¹ç»“æ„ï¼ˆmapping&#x2F;settingsï¼‰</th>
<th>å¸¸è§ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td><code>split</code></td>
<td>âœ… æ–°å»ºç´¢å¼•</td>
<td>âŒ ä¸æ”¯æŒ</td>
<td>åªèƒ½ Ã— å€æ•°ï¼ˆå¦‚ 1â†’2â†’4ï¼‰</td>
<td>âœ… æ˜¯</td>
<td>âŒ å¦</td>
<td>æå‡å†™å…¥å¹¶å‘&#x2F;è¯»æ€§èƒ½</td>
</tr>
<tr>
<td><code>shrink</code></td>
<td>âœ… æ–°å»ºç´¢å¼•</td>
<td>âŒ ä¸æ”¯æŒ</td>
<td>åªèƒ½ Ã· å› æ•°ï¼ˆå¦‚ 4â†’2â†’1ï¼‰</td>
<td>âœ… æ˜¯</td>
<td>âŒ å¦</td>
<td>åˆå¹¶å†å²æ•°æ®åˆ†ç‰‡</td>
</tr>
<tr>
<td><code>reindex</code></td>
<td>âœ… æ–°å»ºç´¢å¼•</td>
<td>âœ… æ”¯æŒï¼ˆå…ˆåˆ ï¼‰</td>
<td>ä»»æ„</td>
<td>âœ… æ˜¯</td>
<td>âœ… æ”¯æŒ</td>
<td>è‡ªå®šä¹‰ç»“æ„&#x2F;åˆ†ç‰‡&#x2F;å‡çº§</td>
</tr>
</tbody></table>
<hr>
<h2 id="ğŸ”§-ä¸€ã€splitï¼šå°†åˆ†ç‰‡æ•°é‡å€å¢ï¼ˆå¦‚-1-â†’-2-â†’-4ï¼‰"><a href="#ğŸ”§-ä¸€ã€splitï¼šå°†åˆ†ç‰‡æ•°é‡å€å¢ï¼ˆå¦‚-1-â†’-2-â†’-4ï¼‰" class="headerlink" title="ğŸ”§ ä¸€ã€splitï¼šå°†åˆ†ç‰‡æ•°é‡å€å¢ï¼ˆå¦‚ 1 â†’ 2 â†’ 4ï¼‰"></a>ğŸ”§ ä¸€ã€splitï¼šå°†åˆ†ç‰‡æ•°é‡å€å¢ï¼ˆå¦‚ 1 â†’ 2 â†’ 4ï¼‰</h2><blockquote>
<p><strong>é€‚ç”¨äºï¼š</strong> æå‡å¹¶å‘èƒ½åŠ›ã€å¢åŠ æŸ¥è¯¢&#x2F;å†™å…¥å¹¶è¡Œåº¦ã€‚</p>
</blockquote>
<h3 id="âœ…-æ¡ä»¶è¦æ±‚ï¼š"><a href="#âœ…-æ¡ä»¶è¦æ±‚ï¼š" class="headerlink" title="âœ… æ¡ä»¶è¦æ±‚ï¼š"></a>âœ… æ¡ä»¶è¦æ±‚ï¼š</h3><ul>
<li>åŸå§‹ç´¢å¼•å¿…é¡»è®¾ç½® <code>index.blocks.write: true</code>ï¼ˆåªè¯»ï¼‰ï¼›ä¸»è¦æ˜¯é˜²æ­¢å†™å…¥ç»§ç»­å¢é•¿ã€‚</li>
<li>æ–°åˆ†ç‰‡æ•°å¿…é¡»æ˜¯åŸä¸»åˆ†ç‰‡çš„ <strong>å€æ•°</strong>ï¼›</li>
<li>ä¸èƒ½ä½¿ç”¨åŸåï¼Œç›®æ ‡ç´¢å¼•å¿…é¡»å¦èµ·æ–°åã€‚</li>
</ul>
<h3 id="ğŸ› -æ“ä½œç¤ºä¾‹ï¼š"><a href="#ğŸ› -æ“ä½œç¤ºä¾‹ï¼š" class="headerlink" title="ğŸ›  æ“ä½œç¤ºä¾‹ï¼š"></a>ğŸ›  æ“ä½œç¤ºä¾‹ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®åªè¯»</span></span><br><span class="line">PUT /abc/_settings</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;index.blocks.write&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å¦‚æœä¸è®¾ç½®ä¸ºåªè¯»çš„è¯ï¼Œå°±æŠ¥é”™ï¼š</span><br><span class="line">```json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;error&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;root_cause&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;illegal_state_exception&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;index abc must be read-only to resize index. use \&quot;index.blocks.write=true\&quot;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;illegal_state_exception&quot;</span>,</span><br><span class="line">    <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;index abc must be read-only to resize index. use \&quot;index.blocks.write=true\&quot;&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;status&quot;</span>: 500</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ‹†åˆ†ç´¢å¼•ï¼ˆ1-â†’-4ï¼‰"><a href="#æ‹†åˆ†ç´¢å¼•ï¼ˆ1-â†’-4ï¼‰" class="headerlink" title="æ‹†åˆ†ç´¢å¼•ï¼ˆ1 â†’ 4ï¼‰"></a>æ‹†åˆ†ç´¢å¼•ï¼ˆ1 â†’ 4ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /abc/_split/abc_split_2shards</span><br><span class="line">&#123;</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">    &quot;index.number_of_shards&quot;: 2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;acknowledged&quot;: true,</span><br><span class="line">  &quot;shards_acknowledged&quot;: true,</span><br><span class="line">  &quot;index&quot;: &quot;abc_split_2shards&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸æ˜¯å€æ•°ä¹Ÿä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root_cause&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;illegal_argument_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;the number of source shards [13] must be a factor of [25]&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;illegal_argument_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;the number of source shards [13] must be a factor of [25]&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">400</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹ç´¢å¼•çš„ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /abc_split_2shards/_settings?flat_settings=true</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x2F;_settingsï¼šElasticsearch æä¾›çš„ API ç«¯ç‚¹ï¼Œç”¨äºæŸ¥çœ‹ç´¢å¼•è®¾ç½®ã€‚<br>?flat_settings&#x3D;trueï¼šæŸ¥è¯¢å‚æ•°ï¼Œä½¿è¿”å›ç»“æœä»¥æ‰å¹³åŒ–çš„é”®å€¼å¯¹å½¢å¼å±•ç¤ºï¼ˆè€ŒéåµŒå¥—ç»“æ„ï¼‰ã€‚</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ç›®æ ‡çš„ç´¢å¼•ä¹Ÿæ˜¯åªè¯»çš„ï¼Œè¿™åœ¨ Easysearch é‡Œæ˜¯ ElasticSearch ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;abc_split_2shards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;index.blocks.write&quot;</span><span class="punctuation">:</span> <span class="string">&quot;true&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.creation_date&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1750747232004&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.number_of_replicas&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.number_of_shards&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.provided_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;abc_split_2shards&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.resize.source.name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;abc&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.resize.source.uuid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3NY_W5B_TzimoEGdoA74cg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.routing.allocation.initial_recovery._id&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.routing_partition_size&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.uuid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;e2BQiTRKTlaTS5OE8kmiXw&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.version.created&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1130099&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index.version.upgraded&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1130099&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åä½¿ç”¨è¿™ä¸ªæ¥è§£é” write blockã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT /abc_split_2shards/_settings</span><br><span class="line">&#123;</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">    &quot;index.blocks.write&quot;: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ä¸æƒ³è®©ç›®æ ‡ç´¢å¼•å˜æˆåªè¯»ã€‚ä¹Ÿå¯ä»¥åœ¨_split çš„æ—¶å€™åŠ ä¸Š â€œindex.blocks.writeâ€: falseã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">POST /abc_split_2sharxds/_split/qwe</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;index.blocks.write&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;index.number_of_shards&quot;</span><span class="punctuation">:</span> <span class="number">26</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ğŸ”§-äºŒã€shrinkï¼šå°†åˆ†ç‰‡æ•°é‡æ•´é™¤å‹ç¼©ï¼ˆå¦‚-8-â†’-4-â†’-1ï¼‰"><a href="#ğŸ”§-äºŒã€shrinkï¼šå°†åˆ†ç‰‡æ•°é‡æ•´é™¤å‹ç¼©ï¼ˆå¦‚-8-â†’-4-â†’-1ï¼‰" class="headerlink" title="ğŸ”§ äºŒã€shrinkï¼šå°†åˆ†ç‰‡æ•°é‡æ•´é™¤å‹ç¼©ï¼ˆå¦‚ 8 â†’ 4 â†’ 1ï¼‰"></a>ğŸ”§ äºŒã€shrinkï¼šå°†åˆ†ç‰‡æ•°é‡æ•´é™¤å‹ç¼©ï¼ˆå¦‚ 8 â†’ 4 â†’ 1ï¼‰</h2><blockquote>
<p><strong>é€‚ç”¨äºï¼š</strong> å†å²å½’æ¡£æ•°æ®å‹ç¼©ã€èŠ‚çœå†…å­˜ã€æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</blockquote>
<h3 id="âœ…-æ¡ä»¶è¦æ±‚ï¼š-1"><a href="#âœ…-æ¡ä»¶è¦æ±‚ï¼š-1" class="headerlink" title="âœ… æ¡ä»¶è¦æ±‚ï¼š"></a>âœ… æ¡ä»¶è¦æ±‚ï¼š</h3><ul>
<li>æ‰€æœ‰ä¸»åˆ†ç‰‡å¿…é¡»é›†ä¸­åœ¨åŒä¸€èŠ‚ç‚¹ï¼›</li>
<li>åŸç´¢å¼•å¿…é¡»åªè¯»ï¼›</li>
<li>æ–°åˆ†ç‰‡æ•°å¿…é¡»æ˜¯æ—§åˆ†ç‰‡æ•°çš„ <strong>å› æ•°</strong>ï¼›</li>
<li>åŒæ ·ä¸èƒ½ä¿ç•™åŸåï¼Œéœ€æ–°å»ºç´¢å¼•åã€‚</li>
</ul>
<h3 id="ğŸ› -æ“ä½œç¤ºä¾‹ï¼š-1"><a href="#ğŸ› -æ“ä½œç¤ºä¾‹ï¼š-1" class="headerlink" title="ğŸ›  æ“ä½œç¤ºä¾‹ï¼š"></a>ğŸ›  æ“ä½œç¤ºä¾‹ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼ºåˆ¶æ‰€æœ‰ä¸»åˆ†ç‰‡è°ƒåº¦åˆ° node-1</span></span><br><span class="line">PUT /source_index/_settings</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;index.blocks.write&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;index.routing.allocation.require._name&quot;</span>: <span class="string">&quot;node-1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;index.number_of_replicas&quot;</span>: 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¦‚æœä¸æ˜¯åªè¯»åŒæ ·æŠ¥é”™ï¼š</span><br><span class="line">```json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;error&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;root_cause&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;illegal_state_exception&quot;</span>,</span><br><span class="line">        <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;index test1 must be read-only to resize index. use \&quot;index.blocks.write=true\&quot;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;illegal_state_exception&quot;</span>,</span><br><span class="line">    <span class="string">&quot;reason&quot;</span>: <span class="string">&quot;index test1 must be read-only to resize index. use \&quot;index.blocks.write=true\&quot;&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;status&quot;</span>: 500</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆå¹¶ä¸ºä¸€ä¸ªåˆ†ç‰‡"><a href="#åˆå¹¶ä¸ºä¸€ä¸ªåˆ†ç‰‡" class="headerlink" title="åˆå¹¶ä¸ºä¸€ä¸ªåˆ†ç‰‡"></a>åˆå¹¶ä¸ºä¸€ä¸ªåˆ†ç‰‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /source_index/_shrink/source_index_1</span><br><span class="line">&#123;</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;index.blocks.write&quot;: false,</span><br><span class="line">    &quot;index.number_of_shards&quot;: 1</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è§£é”"><a href="#è§£é”" class="headerlink" title="è§£é”"></a>è§£é”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT /source_index_1/_settings</span><br><span class="line">&#123;</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">    &quot;index.blocks.write&quot;: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ”§-ä¸‰ã€reindexï¼šæ‹·è´æ•°æ®-æ–°å»ºç»“æ„-æ›¿æ¢æ—§ç´¢å¼•"><a href="#ğŸ”§-ä¸‰ã€reindexï¼šæ‹·è´æ•°æ®-æ–°å»ºç»“æ„-æ›¿æ¢æ—§ç´¢å¼•" class="headerlink" title="ğŸ”§ ä¸‰ã€reindexï¼šæ‹·è´æ•°æ® + æ–°å»ºç»“æ„ + æ›¿æ¢æ—§ç´¢å¼•"></a>ğŸ”§ ä¸‰ã€reindexï¼šæ‹·è´æ•°æ® + æ–°å»ºç»“æ„ + æ›¿æ¢æ—§ç´¢å¼•</h2><blockquote>
<p><strong>é€‚ç”¨äºï¼š</strong> ä»»æ„ä¿®æ”¹åˆ†ç‰‡æ•°ã€å­—æ®µç»“æ„ã€settingsï¼Œæˆ–å®ç°â€œçœ‹èµ·æ¥æ”¹äº†åŸç´¢å¼•â€çš„æ•ˆæœã€‚</p>
</blockquote>
<h3 id="âœ…-ä¼˜åŠ¿ï¼š"><a href="#âœ…-ä¼˜åŠ¿ï¼š" class="headerlink" title="âœ… ä¼˜åŠ¿ï¼š"></a>âœ… ä¼˜åŠ¿ï¼š</h3><ul>
<li>å”¯ä¸€æ”¯æŒ<strong>ä»»æ„åˆ†ç‰‡æ•°ä¿®æ”¹</strong>ï¼›</li>
<li>å¯è‡ªç”±é‡æ„ mappingã€settingsï¼›</li>
<li>å¯æ”¯æŒ<strong>ä¿ç•™åŸå</strong>ï¼ˆåˆ é™¤æ—§ç´¢å¼• + é‡æ–°åˆ›å»ºï¼‰ï¼›</li>
<li>å¯å¸¦æ¡ä»¶ã€åˆ†é¡µã€è„šæœ¬æ‹·è´æ•°æ®ï¼›</li>
<li>æ˜¯å”¯ä¸€å¯æ¨¡æ‹Ÿâ€œä¿®æ”¹åŸç´¢å¼•åˆ†ç‰‡â€çš„æ–¹å¼ã€‚</li>
</ul>
<h3 id="ğŸ› -æ“ä½œæ­¥éª¤ï¼ˆä¿ç•™åŸåä½†æ”¹å˜ç»“æ„ï¼‰ï¼š"><a href="#ğŸ› -æ“ä½œæ­¥éª¤ï¼ˆä¿ç•™åŸåä½†æ”¹å˜ç»“æ„ï¼‰ï¼š" class="headerlink" title="ğŸ›  æ“ä½œæ­¥éª¤ï¼ˆä¿ç•™åŸåä½†æ”¹å˜ç»“æ„ï¼‰ï¼š"></a>ğŸ›  æ“ä½œæ­¥éª¤ï¼ˆä¿ç•™åŸåä½†æ”¹å˜ç»“æ„ï¼‰ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. åˆ›å»ºä¸´æ—¶ç´¢å¼•ç»“æ„ï¼ˆä½ æƒ³è¦çš„æ–°ç»“æ„ï¼‰</span></span><br><span class="line">PUT /my_index_v2</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;index.number_of_shards&quot;</span>: 5,</span><br><span class="line">    <span class="string">&quot;index.number_of_replicas&quot;</span>: 1</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;user&quot;</span>: &#123; <span class="string">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="string">&quot;message&quot;</span>: &#123; <span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æ‹·è´æ•°æ®</span></span><br><span class="line">POST /_reindex</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;source&quot;</span>: &#123; <span class="string">&quot;index&quot;</span>: <span class="string">&quot;my_index&quot;</span> &#125;,</span><br><span class="line">  <span class="string">&quot;dest&quot;</span>:   &#123; <span class="string">&quot;index&quot;</span>: <span class="string">&quot;my_index_v2&quot;</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. åˆ é™¤æ—§ç´¢å¼•ï¼ˆè°¨æ…ï¼‰</span></span><br><span class="line">DELETE /my_index</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. åˆ›å»ºåŒåç´¢å¼•ï¼ˆæ–°ç»“æ„ï¼‰</span></span><br><span class="line">PUT /my_index</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;index.number_of_shards&quot;</span>: 3,</span><br><span class="line">    <span class="string">&quot;index.number_of_replicas&quot;</span>: 1</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;user&quot;</span>: &#123; <span class="string">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="string">&quot;message&quot;</span>: &#123; <span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. å†æ¬¡æ‹·è´æ•°æ®ï¼ˆå›å¡«ï¼‰</span></span><br><span class="line">POST /_reindex</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;source&quot;</span>: &#123; <span class="string">&quot;index&quot;</span>: <span class="string">&quot;my_index_v2&quot;</span> &#125;,</span><br><span class="line">  <span class="string">&quot;dest&quot;</span>:   &#123; <span class="string">&quot;index&quot;</span>: <span class="string">&quot;my_index&quot;</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">6.  æŸ¥çœ‹ç´¢å¼•ï¼Œå¹¶ä¸”åˆ é™¤ç›®æ ‡ç´¢å¼•</span><br><span class="line">GET _cat/indices/my_index*?v</span><br><span class="line"></span><br><span class="line">![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/64f99ab7b3ba4b4a8e18d53d4e32fab5.png)</span><br><span class="line">æœ€ååˆ é™¤my_index_v2 å³å¯</span><br><span class="line"></span><br><span class="line">DELETE /my_index_v2</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âš ï¸-ä¸ºä»€ä¹ˆ-shrink-split-ä¸èƒ½æ›¿ä»£-reindexï¼Ÿ"><a href="#âš ï¸-ä¸ºä»€ä¹ˆ-shrink-split-ä¸èƒ½æ›¿ä»£-reindexï¼Ÿ" class="headerlink" title="âš ï¸ ä¸ºä»€ä¹ˆ shrink + split ä¸èƒ½æ›¿ä»£ reindexï¼Ÿ"></a>âš ï¸ ä¸ºä»€ä¹ˆ shrink + split ä¸èƒ½æ›¿ä»£ reindexï¼Ÿ</h2><p>å¾ˆå¤šç”¨æˆ·ä¼šé—®ï¼šèƒ½ä¸èƒ½ <code>shrink â†’ split</code> æˆ– <code>split â†’ shrink</code> æ‹¼æ¥å‡ºä»»æ„åˆ†ç‰‡æ•°ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>æ•°å­¦ä¸Šä¸æˆç«‹ + å®æˆ˜é™åˆ¶å¤ªå¤šã€‚</strong></p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>split åªèƒ½å€å¢</td>
<td>ä¾‹å¦‚ï¼š1 â†’ 2 â†’ 4 â†’ 8 âœ…ï¼Œä½†ä¸èƒ½å˜æˆ 3ã€5ã€6 âŒ</td>
</tr>
<tr>
<td>shrink åªèƒ½æ•´é™¤</td>
<td>ä¾‹å¦‚ï¼š8 â†’ 4 â†’ 2 â†’ 1 âœ…ï¼Œä½†ä¸èƒ½å˜æˆ 3ã€5 âŒ</td>
</tr>
<tr>
<td>äºŒè€…ç»„åˆ</td>
<td>å—é™äºå€æ•° Ã— å› æ•°å…³ç³»ï¼Œ<strong>ä¸æ˜¯ä¸‡èƒ½å˜æ¢</strong>ï¼ˆå¤§å¤šæ•°ç›®æ ‡åˆ†ç‰‡æ•°æ ¹æœ¬åˆ°ä¸äº†ï¼‰</td>
</tr>
</tbody></table>
<h3 id="âœ…-å”¯ä¸€ä¸‡èƒ½æ–¹å¼ï¼šreindex"><a href="#âœ…-å”¯ä¸€ä¸‡èƒ½æ–¹å¼ï¼šreindex" class="headerlink" title="âœ… å”¯ä¸€ä¸‡èƒ½æ–¹å¼ï¼šreindex"></a>âœ… å”¯ä¸€ä¸‡èƒ½æ–¹å¼ï¼š<code>reindex</code></h3><p>å¯ä»¥ä»»æ„ï¼š</p>
<ul>
<li>è°ƒæ•´åˆ†ç‰‡æ•° âœ…</li>
<li>ä¿®æ”¹å­—æ®µç»“æ„ âœ…</li>
<li>æ”¹ settings âœ…</li>
<li>ä¿ç•™ç´¢å¼•å âœ…</li>
</ul>
<hr>
<h2 id="âœ…-æœ€ä½³å®è·µæ€»ç»“"><a href="#âœ…-æœ€ä½³å®è·µæ€»ç»“" class="headerlink" title="âœ… æœ€ä½³å®è·µæ€»ç»“"></a>âœ… æœ€ä½³å®è·µæ€»ç»“</h2><table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>æ¨èæ–¹å¼</th>
<th>ç†ç”±</th>
</tr>
</thead>
<tbody><tr>
<td>å†™å…¥å¹¶å‘ä¸è¶³ï¼ˆ1 â†’ 4ï¼‰</td>
<td>split</td>
<td>å¿«é€Ÿã€ä½é£é™©</td>
</tr>
<tr>
<td>å­˜å‚¨&#x2F;æŸ¥è¯¢ä¼˜åŒ–ï¼ˆ8 â†’ 1ï¼‰</td>
<td>shrink</td>
<td>èŠ‚çœèµ„æºã€é€‚åˆå½’æ¡£</td>
</tr>
<tr>
<td>ä¿®æ”¹ç´¢å¼•ç»“æ„ã€å­—æ®µã€settings</td>
<td>reindex</td>
<td>æœ€çµæ´»ã€å”¯ä¸€æ”¯æŒä»»æ„ç»“æ„</td>
</tr>
<tr>
<td>æƒ³ä¿ç•™åŸåä½†æ”¹åˆ†ç‰‡æ•°</td>
<td>reindexï¼ˆé…åˆ delete&#x2F;recreateï¼‰</td>
<td>åªæœ‰å®ƒèƒ½å®ç°</td>
</tr>
<tr>
<td>ä¸æƒ³ä¸­æ–­æœåŠ¡</td>
<td>reindex + alias åˆ‡æ¢</td>
<td>alias å®ç°æ— ç¼æ›¿æ¢</td>
</tr>
</tbody></table>
<hr>
<h2 id="ğŸš€-é™„åŠ å»ºè®®"><a href="#ğŸš€-é™„åŠ å»ºè®®" class="headerlink" title="ğŸš€ é™„åŠ å»ºè®®"></a>ğŸš€ é™„åŠ å»ºè®®</h2><p>S* split&#x2F;shrink ä¸€èˆ¬ç”¨äº <strong>çº¿ä¸Šå°èŒƒå›´ç»“æ„è°ƒæ•´</strong>ï¼›</p>
<ul>
<li>reindex ç”¨äº <strong>å‡çº§ã€æ¸…æ´—ã€ç»“æ„ä¼˜åŒ–</strong>ç­‰æ›´å¤§ç²’åº¦çš„æ”¹é€ ï¼›</li>
<li>å¦‚æœä½ ä¸æƒ³ä¸­æ–­æœåŠ¡ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ <strong>alias + reindex</strong> åšå¹³æ»‘åˆ‡æ¢ï¼›</li>
<li>ä¸å»ºè®®ç”¨ shrink + split æ‹¼æ¥æ–¹æ¡ˆï¼Œå®é™…è¿ç»´æ€§å·®ã€æ•°å­¦å…³ç³»è‹›åˆ»ã€‚E</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.734Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">1 å°æ—¶è¯»å®Œ (å¤§çº¦7180ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../%E6%9C%AC%E5%9C%B0-rag-%E5%AE%9E%E6%88%98%EF%BC%9A%E7%94%A8-easysearch-ollama-sdk-%E5%8D%8A%E5%B0%8F%E6%97%B6%E6%90%AD%E5%BB%BA%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F/">æœ¬åœ° RAG å®æˆ˜ï¼šç”¨ Easysearch + Ollama SDK åŠå°æ—¶æ­å»ºæ£€ç´¢å¢å¼ºé—®ç­”ç³»ç»Ÿ</a></p><div class="content"><blockquote>
<p>âœ… ç›®æ ‡ï¼šåªç”¨ä¸¤å°æœåŠ¡å™¨ï¼ˆæˆ–åŒä¸€å°ï¼‰å°±è·‘é€š <strong>â€œå‘é‡æ£€ç´¢ + æœ¬åœ°å¤§æ¨¡å‹â€</strong> åŸå‹<br>âœ… ç‰¹ç‚¹ï¼š<strong>å®Œå…¨ç¦»çº¿</strong>ã€ä¾èµ–æå°‘ã€éƒ¨ç½²è„šæœ¬å³æ–‡æ¡£<br>âœ… é€‚åˆï¼šå¿«é€Ÿ PoCã€å†…ç½‘åˆè§„åœºæ™¯ã€æƒ³æ·±æŒ– RAG å·¥ä½œæœºç†çš„å¼€å‘è€…</p>
</blockquote>
<h2 id="0-èƒŒæ™¯ä¸åŠ¨æœº"><a href="#0-èƒŒæ™¯ä¸åŠ¨æœº" class="headerlink" title="0. èƒŒæ™¯ä¸åŠ¨æœº"></a>0. èƒŒæ™¯ä¸åŠ¨æœº</h2><p>ç”Ÿæˆå¼ AI èŠå¤©å›ºç„¶å¼ºå¤§ï¼Œä½†å½“é—®é¢˜ä¾èµ–æœ¬åœ°ç§æœ‰çŸ¥è¯†æ—¶ï¼Œå•é  LLM å‚æ•°å†…çš„â€œä¸–ç•Œè®°å¿†â€å¾€å¾€ç­”éæ‰€é—®ã€‚<strong>RAGï¼ˆRetrieval-Augmented Generationï¼‰</strong> çš„æ€è·¯æ˜¯ï¼š</p>
<ol>
<li><strong>æŠŠæ–‡æ¡£åˆ‡ç‰‡ â†’ å‘é‡åŒ– â†’ å…¥åº“</strong></li>
<li><strong>ç”¨æˆ·æé—® â†’ åŒæ ·å‘é‡åŒ– â†’ æ£€ç´¢</strong></li>
<li>å°†å¬å›ç‰‡æ®µæ‹¼è¿› promptï¼Œè®©å¤§æ¨¡å‹â€œå¸¦ç€ææ–™â€å†å›ç­”</li>
</ol>
<p>å¤šæ•°æ•™ç¨‹ç›´æ¥ç”¨äº‘ç«¯ Embedding+OpenAI GPT-4oï¼Œä½†<strong>ä¸€äº›å›¢é˜Ÿå› éšç§ã€æˆæœ¬æˆ–ç¦»çº¿ç¯å¢ƒ</strong>æ— æ³•è¿™æ ·åšã€‚<br>æœ¬æ–‡é€‰ç”¨ï¼š</p>
<ul>
<li><strong>EasySearch (&#x3D; OpenSearch + Elastiknn)</strong> åšå‘é‡å­˜å–</li>
<li><strong>Ollama SDK</strong> è¿æ¥æœ¬åœ° LLM</li>
<li><strong>Python + requests + ollama</strong> ä¸‰ä¸ªä¾èµ–å³å¯</li>
</ul>
<h2 id="1-ç³»ç»Ÿæ¶æ„"><a href="#1-ç³»ç»Ÿæ¶æ„" class="headerlink" title="1. ç³»ç»Ÿæ¶æ„"></a>1. ç³»ç»Ÿæ¶æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æˆ·é—®é¢˜ â”€â”€â–¶ åµŒå…¥æ¨¡å‹ (Ollama) â”€â”€â–¶ EasySearch å‘é‡æ£€ç´¢ â”€â”€â–¶ Top-k ç‰‡æ®µ</span><br><span class="line">                    â–²                                             â”‚</span><br><span class="line">                    â”‚                                             â”‚</span><br><span class="line">       LLM (Ollama Chat) â—€â”€â”€ æ‹¼ Prompt + ç”Ÿæˆç­”æ¡ˆ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>åµŒå…¥æ¨¡å‹</strong>ï¼š<code>nomic-embed-text</code>ï¼ˆ768 ç»´ï¼Œå¤šè¯­è¨€é€šç”¨ï¼‰</li>
<li><strong>æ£€ç´¢å¼•æ“</strong>ï¼šEasySearch 2.x + Elastiknn <code>knn_dense_float_vector</code></li>
<li><strong>å¯¹è¯æ¨¡å‹</strong>ï¼š<code>deepseek-r1:7b</code>ï¼ˆè½»é‡ï¼Œå¥½éƒ¨ç½²ï¼›å¯æ¢ <code>llama3</code> &#x2F; <code>qwen</code>ï¼‰</li>
</ul>
<h2 id="2-ç¯å¢ƒä¸ä¾èµ–"><a href="#2-ç¯å¢ƒä¸ä¾èµ–" class="headerlink" title="2. ç¯å¢ƒä¸ä¾èµ–"></a>2. ç¯å¢ƒä¸ä¾èµ–</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, json, requests, warnings</span><br><span class="line"><span class="keyword">from</span> ollama <span class="keyword">import</span> Client</span><br><span class="line"><span class="keyword">from</span> requests.packages.urllib3.exceptions <span class="keyword">import</span> InsecureRequestWarning</span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>, category=InsecureRequestWarning)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python ä¾èµ–</span></span><br><span class="line">pip install ollama requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹‰å–æ¨¡å‹</span></span><br><span class="line">ollama pull nomic-embed-text</span><br><span class="line">ollama pull deepseek-r1:7b</span><br></pre></td></tr></table></figure>

<h2 id="3-ä»£ç é€æ®µæ‹†è§£"><a href="#3-ä»£ç é€æ®µæ‹†è§£" class="headerlink" title="3. ä»£ç é€æ®µæ‹†è§£"></a>3. ä»£ç é€æ®µæ‹†è§£</h2><h3 id="3-1-å…¨å±€é…ç½®"><a href="#3-1-å…¨å±€é…ç½®" class="headerlink" title="3.1 å…¨å±€é…ç½®"></a>3.1 å…¨å±€é…ç½®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é…ç½®åŒº â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line">ES_URL   = os.getenv(<span class="string">&quot;ES_URL&quot;</span>, <span class="string">&quot;https://localhost:9200&quot;</span>)</span><br><span class="line">ES_AUTH  = (<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;c59a759f31e901e8d279&quot;</span>)   <span class="comment"># æ— è®¤è¯è®¾ä¸º None</span></span><br><span class="line">INDEX    = <span class="string">&quot;rag_demo&quot;</span></span><br><span class="line"></span><br><span class="line">OLLAMA_HOST  = os.getenv(<span class="string">&quot;OLLAMA_URL&quot;</span>, <span class="string">&quot;http://localhost:11434&quot;</span>)</span><br><span class="line">EMBED_MODEL  = <span class="string">&quot;nomic-embed-text&quot;</span>         <span class="comment"># å‘é‡æ¨¡å‹</span></span><br><span class="line">CHAT_MODEL   = <span class="string">&quot;deepseek-r1:7b&quot;</span>           <span class="comment"># å¯¹è¯æ¨¡å‹</span></span><br><span class="line">TOP_K        = <span class="number">4</span></span><br><span class="line">NUM_CAND     = <span class="number">200</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç åªæ˜¯<strong>ç»™è„šæœ¬æå‰è®¾å®šä¸€äº›â€œè¿æ¥å‚æ•°â€ä¸â€œæ¨¡å‹é€‰æ‹©â€</strong>ï¼Œæ–¹ä¾¿åé¢ç»Ÿä¸€å¼•ç”¨ã€‚é€è¡Œè§£é‡Šå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ES_URL   = <span class="string">&quot;https://&lt;es_host&gt;:9200&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>ES_URL</strong>ï¼šEasySearch &#x2F; OpenSearch é›†ç¾¤çš„å®Œæ•´åœ°å€ï¼ˆå«åè®®ä¸ç«¯å£ï¼‰ã€‚</p>
<ul>
<li><code>&lt;es_host&gt;</code> æ˜¯å ä½ç¬¦ï¼Œå®é™…éƒ¨ç½²æ—¶è¦æ›¿æ¢æˆä½ çš„ IP æˆ–åŸŸåã€‚</li>
<li>å¦‚æœä½ çš„é›†ç¾¤æ²¡å¼€ TLSï¼Œå¯å†™æˆ <code>http://10.0.0.8:9200</code>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ES_AUTH  = (<span class="string">&quot;elastic&quot;</span>, <span class="string">&quot;password&quot;</span>)   <span class="comment"># æ— è®¤è¯è®¾ä¸º None</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>ES_AUTH</strong>ï¼šè¿æ¥é›†ç¾¤çš„è´¦å·å¯†ç å…ƒç»„ã€‚</p>
<ul>
<li>è„šæœ¬é‡Œä¼ ç»™ <code>requests</code> çš„ <code>auth=</code> å‚æ•°ï¼Œä¼šè‡ªåŠ¨åŠ  Basic Auth å¤´ã€‚</li>
<li>è‹¥é›†ç¾¤å…³é—­äº†å®‰å…¨è®¤è¯æˆ–èµ°å†…ç½‘åŒ¿åè®¿é—®ï¼Œå°±æŠŠå®ƒè®¾æˆ <code>None</code>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INDEX    = <span class="string">&quot;rag_demo&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>INDEX</strong>ï¼šå‘é‡ç´¢å¼•ï¼ˆæˆ–æ–‡æ¡£ç´¢å¼•ï¼‰çš„åç§°ã€‚</p>
<ul>
<li>è„šæœ¬åé¢ä¼šå¯¹è¯¥ç´¢å¼•åš <em>create &#x2F; bulk write &#x2F; search</em> ç­‰æ“ä½œã€‚</li>
<li>æ¢æˆåˆ«çš„åå­—æ—¶è®°å¾—ä¿æŒä¸€è‡´ï¼Œä¾‹å¦‚ <code>&quot;knowledge_base&quot;</code>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OLLAMA_HOST = <span class="string">&quot;http://&lt;ollama_host&gt;:11434&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>OLLAMA_HOST</strong>ï¼šæœ¬åœ° Ollama æœåŠ¡çš„ HTTP èµ·å§‹åœ°å€ã€‚</p>
<ul>
<li><code>&lt;ollama_host&gt;</code> ä¹Ÿæ˜¯å ä½ç¬¦ï¼›è‹¥è„šæœ¬ä¸ Ollama åœ¨åŒä¸€å°æœºå™¨ï¼Œå¯å†™ <code>http://localhost:11434</code>ã€‚</li>
<li>ç«¯å£ <code>11434</code> æ˜¯ Ollama é»˜è®¤ REST ç«¯å£ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EMBED_MODEL = <span class="string">&quot;nomic-embed-text&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>EMBED_MODEL</strong>ï¼šç”¨äºç”Ÿæˆæ–‡æœ¬å‘é‡ï¼ˆembeddingsï¼‰çš„æ¨¡å‹åã€‚</p>
<ul>
<li>åœ¨è„šæœ¬é‡Œä¼šè°ƒç”¨ <code>client.embeddings(model=EMBED_MODEL, â€¦)</code>ã€‚</li>
<li>æ›¿æ¢è§„åˆ™ï¼šå…ˆæ‰§è¡Œ <code>ollama pull &lt;æ¨¡å‹å&gt;</code>ï¼Œç¡®ä¿æœ¬åœ°å·²ä¸‹è½½ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHAT_MODEL  = <span class="string">&quot;deepseek-r1:7b&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>CHAT_MODEL</strong>ï¼šè´Ÿè´£æœ€ç»ˆå›ç­”çš„èŠå¤© &#x2F; ç”Ÿæˆå¼æ¨¡å‹ã€‚</p>
<ul>
<li>è„šæœ¬ä¼šç”¨ <code>client.chat(model=CHAT_MODEL, â€¦)</code> è¿›è¡Œå¯¹è¯ã€‚</li>
<li>åŒç†ï¼Œè‹¥æƒ³ç”¨ <code>llama3:8b-chat</code>ã€<code>qwen:7b-chat</code> ç­‰ï¼Œå…ˆ <code>ollama pull</code> å†æ”¹è¿™é‡Œã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="3-2-åµŒå…¥ä¸å¯¹è¯ï¼ˆOllama-SDKï¼‰"><a href="#3-2-åµŒå…¥ä¸å¯¹è¯ï¼ˆOllama-SDKï¼‰" class="headerlink" title="3.2 åµŒå…¥ä¸å¯¹è¯ï¼ˆOllama SDKï¼‰"></a>3.2 åµŒå…¥ä¸å¯¹è¯ï¼ˆOllama SDKï¼‰</h3><p>client æ˜¯è¿æ¥ Ollama æ¨¡å‹æœåŠ¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥å‘è¯·æ±‚ã€‚</p>
<p>session æ˜¯è®¿é—® Elasticsearch ç”¨çš„è¯·æ±‚ä¼šè¯ï¼Œèƒ½æé«˜ç½‘ç»œæ•ˆç‡ã€‚</p>
<p>ç”¨æŒ‡å®šçš„åµŒå…¥æ¨¡å‹ï¼ˆæ¯”å¦‚ nomic-embed-textï¼‰æŠŠæ–‡æœ¬è½¬æˆå‘é‡ï¼Œç”¨äºç›¸ä¼¼åº¦æœç´¢ã€‚</p>
<p>ç”¨æŒ‡å®šçš„èŠå¤©æ¨¡å‹ï¼ˆæ¯”å¦‚ deepseek-r1:7bï¼‰å›ç­”é—®é¢˜ï¼Œè¿”å›å›å¤æ–‡æœ¬ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆå§‹åŒ– â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line">client = Client(host=OLLAMA_HOST)</span><br><span class="line">session = requests.Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ollama å°è£… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">embed</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">list</span>[<span class="built_in">float</span>]:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¿”å›æ–‡æœ¬å‘é‡ (list[float])&quot;&quot;&quot;</span></span><br><span class="line">    resp = client.embeddings(model=EMBED_MODEL, prompt=text)</span><br><span class="line">    <span class="keyword">return</span> resp[<span class="string">&quot;embedding&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chat</span>(<span class="params">prompt: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸èŠå¤©æ¨¡å‹å¯¹è¯ï¼ˆå®Œæ•´å›å¤ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">    resp = client.chat(</span><br><span class="line">        model=CHAT_MODEL,</span><br><span class="line">        messages=[&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;],</span><br><span class="line">        <span class="comment"># stream=False</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> resp[<span class="string">&quot;message&quot;</span>][<span class="string">&quot;content&quot;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="3-3-å»ºç´¢å¼•ï¼ˆElastiknnï¼‰"><a href="#3-3-å»ºç´¢å¼•ï¼ˆElastiknnï¼‰" class="headerlink" title="3.3 å»ºç´¢å¼•ï¼ˆElastiknnï¼‰"></a>3.3 å»ºç´¢å¼•ï¼ˆElastiknnï¼‰</h3><p>åœ¨æ„å»ºåŸºäºå‘é‡çš„ RAGï¼ˆRetrieval-Augmented Generationï¼‰ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨å‘é‡æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªæ”¯æŒå‘é‡æ£€ç´¢çš„ç´¢å¼•ã€‚æœ¬æ–‡ä½¿ç”¨ EasySearch ä½œä¸ºåº•å±‚å­˜å‚¨ï¼Œå‘å…¶ä¸­æ³¨å†Œä¸€ä¸ªæ”¯æŒè¿‘ä¼¼å‘é‡æœç´¢çš„ç´¢å¼•ç»“æ„ã€‚</p>
<p>create_index å‡½æ•°çš„ä½œç”¨æ˜¯é€šè¿‡ RESTful API åˆ›å»ºä¸€ä¸ªåä¸º rag_demo çš„ç´¢å¼•ï¼Œå¹¶å®šä¹‰å­—æ®µç»“æ„å¦‚ä¸‹ï¼š</p>
<p>contentï¼šæ–‡æœ¬å†…å®¹å­—æ®µï¼Œç±»å‹ä¸º textï¼Œå¯ç”¨äºå…¨æ–‡æœç´¢æˆ–ä½œä¸ºä¸Šä¸‹æ–‡è¿”å›ã€‚</p>
<p>vecï¼šå‘é‡å­—æ®µï¼Œç±»å‹ä¸º knn_dense_float_vectorï¼Œæ”¯æŒé«˜ç»´å‘é‡çš„å¿«é€Ÿç›¸ä¼¼åº¦æœç´¢ã€‚<br>é…ç½®ä¸­ä½¿ç”¨äº† LSHï¼ˆå±€éƒ¨æ•æ„Ÿå“ˆå¸Œï¼‰æ¨¡å‹ä¸ cosine ç›¸ä¼¼åº¦åº¦é‡ï¼ŒåŒæ—¶è®¾å®šäº†è¿‘ä¼¼å‚æ•° L ä¸ kï¼Œåˆ†åˆ«æ§åˆ¶å€™é€‰æ ·æœ¬æ•°é‡å’Œè¿”å›ç»“æœæ•°ã€‚</p>
<p>é€šè¿‡è®¾å®š â€œindex.knnâ€: Trueï¼Œè¯¥ç´¢å¼•æ”¯æŒä½¿ç”¨ k-NN æŸ¥è¯¢æ¥é«˜æ•ˆåœ°æ£€ç´¢ä¸æŸ¥è¯¢å‘é‡æœ€ç›¸ä¼¼çš„æ–‡æ¡£ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼ŒåµŒå…¥æ¨¡å‹å¦‚ nomic-embed-text å¯å°†è¾“å…¥æ–‡æœ¬è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼Œå­˜å…¥æ­¤ç´¢å¼•ä¸­ï¼Œä¸ç”¨æˆ·æŸ¥è¯¢è¯­ä¹‰å¯¹é½ï¼Œå®ç°é«˜æ•ˆçš„è¯­ä¹‰æ£€ç´¢èƒ½åŠ›ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ---------- â‘  åˆ›å»ºç´¢å¼•ï¼šElastiknn æ˜ å°„ ----------</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_index</span>(<span class="params">dim: <span class="built_in">int</span></span>):</span><br><span class="line">    mapping = &#123;</span><br><span class="line">        <span class="string">&quot;settings&quot;</span>: &#123; <span class="string">&quot;index.knn&quot;</span>: <span class="literal">True</span> &#125;,</span><br><span class="line">        <span class="string">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;content&quot;</span>: &#123; <span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span> &#125;,</span><br><span class="line">                <span class="string">&quot;vec&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;knn_dense_float_vector&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;knn&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;dims&quot;</span>: dim,</span><br><span class="line">                        <span class="string">&quot;model&quot;</span>: <span class="string">&quot;lsh&quot;</span>,        <span class="comment"># ä¹Ÿå¯ hnsw / exact</span></span><br><span class="line">                        <span class="string">&quot;similarity&quot;</span>: <span class="string">&quot;cosine&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;L&quot;</span>: <span class="number">99</span>,</span><br><span class="line">                        <span class="string">&quot;k&quot;</span>: <span class="number">1</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    r = session.put(<span class="string">f&quot;<span class="subst">&#123;ES_URL&#125;</span>/<span class="subst">&#123;INDEX&#125;</span>&quot;</span>,</span><br><span class="line">                    json=mapping, verify=<span class="literal">False</span>, auth=ES_AUTH)</span><br><span class="line">    <span class="keyword">if</span> r.status_code <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">200</span>, <span class="number">201</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;resource_already_exists_exception&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> r.text:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Create index error:\n&quot;</span>, r.text)</span><br><span class="line">            r.raise_for_status()</span><br></pre></td></tr></table></figure>

<h3 id="3-4-å†™å…¥æ–‡æ¡£"><a href="#3-4-å†™å…¥æ–‡æ¡£" class="headerlink" title="3.4 å†™å…¥æ–‡æ¡£"></a>3.4 å†™å…¥æ–‡æ¡£</h3><p>ä»¥ä¸‹æ˜¯å¯¹è¿™æ®µ <code>bulk_upload</code> å‡½æ•°çš„ç®€æ˜è§£é‡Šï¼Œå¯ç”¨äºåšå®¢æ­£æ–‡æˆ–æŠ€æœ¯æ–‡æ¡£ï¼š</p>
<p>åœ¨ RAG ç³»ç»Ÿä¸­ï¼Œä¸ºäº†æ”¯æŒé«˜æ•ˆçš„è¯­ä¹‰æ£€ç´¢ï¼Œæˆ‘ä»¬éœ€è¦å°†åŸå§‹æ–‡æœ¬ä¸å…¶å¯¹åº”çš„å‘é‡ä¸€èµ·å†™å…¥å‘é‡ç´¢å¼•ä¸­ã€‚<code>bulk_upload</code> å‡½æ•°æ­£æ˜¯å®Œæˆè¿™ä¸€ä»»åŠ¡çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒä½¿ç”¨ Elasticsearch çš„ <code>_bulk</code> æ¥å£å®ç°æ‰¹é‡å†™å…¥ï¼Œæ˜¾è‘—æé«˜å†™å…¥æ•ˆç‡ã€‚</p>
<ul>
<li><p>æ¯æ¡è®°å½•åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><p><code>index</code> å…ƒæ•°æ®ï¼ŒæŒ‡å®šç›®æ ‡ç´¢å¼•ï¼ˆ<code>rag_demo</code>ï¼‰åŠæ–‡æ¡£ <code>_id</code>ã€‚</p>
</li>
<li><p>å®é™…æ–‡æ¡£å†…å®¹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>content</code>ï¼šåŸå§‹æ–‡æœ¬å†…å®¹ï¼›</li>
<li><code>vec</code>ï¼šå¯¹åº”çš„æ–‡æœ¬å‘é‡ï¼Œ<strong>å¿…é¡»ä½¿ç”¨ <code>&#123;&quot;values&quot;: [...]&#125;</code> çš„å¯¹è±¡ç»“æ„</strong>ã€‚</li>
</ul>
</li>
</ol>
</li>
<li><p>å‘é‡é€šè¿‡ <code>embed(t)</code> è·å¾—ï¼Œè°ƒç”¨æœ¬åœ°éƒ¨ç½²çš„ Ollama æ¨¡å‹ï¼ˆå¦‚ <code>nomic-embed-text</code>ï¼‰ç”Ÿæˆã€‚</p>
</li>
<li><p>æ‰€æœ‰æ•°æ®æœ€ç»ˆç¼–ç ä¸º JSONï¼Œé€šè¿‡ <code>Content-Type: application/x-ndjson</code> æäº¤åˆ° <code>/_bulk</code> API æ¥å£ï¼Œå®ç°ä¸€æ¬¡æ€§æ‰¹é‡å†™å…¥ã€‚</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ---------- â‘¡ æ‰¹é‡å†™å…¥ï¼šå‘é‡å¿…é¡»åŒ… &#123;&quot;values&quot;: â€¦&#125; ----------</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bulk_upload</span>(<span class="params">texts: <span class="built_in">list</span>[<span class="built_in">str</span>]</span>):</span><br><span class="line">    bulk = []</span><br><span class="line">    <span class="keyword">for</span> i, t <span class="keyword">in</span> <span class="built_in">enumerate</span>(texts):</span><br><span class="line">        bulk.append(&#123; <span class="string">&quot;index&quot;</span>: &#123; <span class="string">&quot;_index&quot;</span>: INDEX, <span class="string">&quot;_id&quot;</span>: i &#125; &#125;)</span><br><span class="line">        bulk.append(&#123;</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: t,</span><br><span class="line">            <span class="string">&quot;vec&quot;</span>: &#123; <span class="string">&quot;values&quot;</span>: embed(t) &#125;     <span class="comment"># â˜… å…³é”®ï¼šå¯¹è±¡æ ¼å¼</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ndjson = <span class="string">&quot;\n&quot;</span>.join(json.dumps(d, ensure_ascii=<span class="literal">False</span>) <span class="keyword">for</span> d <span class="keyword">in</span> bulk) + <span class="string">&quot;\n&quot;</span></span><br><span class="line">    r = session.post(<span class="string">f&quot;<span class="subst">&#123;ES_URL&#125;</span>/_bulk&quot;</span>,</span><br><span class="line">                     data=ndjson.encode(<span class="string">&quot;utf-8&quot;</span>),</span><br><span class="line">                     headers=&#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/x-ndjson&quot;</span>&#125;,</span><br><span class="line">                     verify=<span class="literal">False</span>, auth=ES_AUTH)</span><br><span class="line">    r.raise_for_status()</span><br></pre></td></tr></table></figure>

<h3 id="3-5-è¯­ä¹‰æ£€ç´¢"><a href="#3-5-è¯­ä¹‰æ£€ç´¢" class="headerlink" title="3.5 è¯­ä¹‰æ£€ç´¢"></a>3.5 è¯­ä¹‰æ£€ç´¢</h3><p>è¿™æ®µ <code>search</code> å‡½æ•°çš„ä½œç”¨æ˜¯åœ¨ RAG ç³»ç»Ÿä¸­æ‰§è¡ŒåŸºäºå‘é‡çš„è¯­ä¹‰æ£€ç´¢ï¼Œä»¥ä¸‹æ˜¯é€‚åˆç”¨äºåšå®¢ä¸­çš„ç®€æ˜è§£é‡Šï¼š</p>
<p>RAG ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ä»å‘é‡ç´¢å¼•ä¸­æ‰¾åˆ°ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸è¿‘çš„è¯­ä¹‰ç‰‡æ®µã€‚<code>search</code> å‡½æ•°å³å®Œæˆäº†è¿™ä¸ªè¿‡ç¨‹ï¼Œå®ƒè°ƒç”¨ EasySearch çš„å‘é‡æ£€ç´¢æ¥å£ï¼Œè¿”å›æœ€ç›¸ä¼¼çš„æ–‡æœ¬å†…å®¹ã€‚</p>
<ol>
<li><p><strong>æ–‡æœ¬å‘é‡åŒ–</strong>ï¼šé€šè¿‡ <code>embed(question)</code> æŠŠç”¨æˆ·è¾“å…¥çš„é—®é¢˜è½¬æ¢æˆå‘é‡ <code>qvec</code>ã€‚</p>
</li>
<li><p><strong>æ„é€ æ£€ç´¢è¯·æ±‚</strong>ï¼š<br>ä½¿ç”¨ <code>knn_nearest_neighbors</code> æŸ¥è¯¢</p>
<ul>
<li><code>field</code>: å‘é‡å­—æ®µåï¼ˆæœ¬ä¾‹ä¸­æ˜¯ <code>&quot;vec&quot;</code>ï¼‰ï¼›</li>
<li><code>vec</code>: æŸ¥è¯¢å‘é‡ï¼Œå¿…é¡»å†™æˆ <code>&#123; &quot;values&quot;: [...] &#125;</code> çš„å¯¹è±¡ç»“æ„ï¼›</li>
<li><code>model</code>: å‘é‡è¿‘ä¼¼æ£€ç´¢æ¨¡å‹ï¼ˆå¦‚ <code>&quot;lsh&quot;</code>ï¼‰ï¼›</li>
<li><code>similarity</code>: ç›¸ä¼¼åº¦åº¦é‡æ–¹å¼ï¼ˆå¦‚ <code>&quot;cosine&quot;</code>ï¼‰ï¼›</li>
<li><code>k</code>: è¿”å›çš„ç»“æœæ•°ï¼›</li>
<li><code>candidates</code>: å€™é€‰æ± å¤§å°ï¼Œç”¨äºç²—æ’ä¼˜åŒ–æ£€ç´¢æ•ˆæœã€‚</li>
</ul>
</li>
<li><p><strong>å‘é€è¯·æ±‚å¹¶è§£æå“åº”</strong>ï¼š<br>è¯·æ±‚é€šè¿‡ Elasticsearch <code>_search</code> æ¥å£æäº¤ï¼Œè‹¥è¿”å›ä¸æˆåŠŸï¼Œåˆ™è¾“å‡ºæŠ¥é”™ä¿¡æ¯ï¼›æˆåŠŸåæå– <code>_source[&quot;content&quot;]</code> å­—æ®µï¼Œè¿”å›ç»™ä¸Šå±‚ç”¨äºå›ç­”ç”Ÿæˆã€‚</p>
</li>
</ol>
<h3 id="âœ…-ç¤ºä¾‹ç”¨é€”ï¼š"><a href="#âœ…-ç¤ºä¾‹ç”¨é€”ï¼š" class="headerlink" title="âœ… ç¤ºä¾‹ç”¨é€”ï¼š"></a>âœ… ç¤ºä¾‹ç”¨é€”ï¼š</h3><p>ç”¨æˆ·æé—®ï¼šâ€œå¼ ä¸‰æ˜¯è°â€ï¼Œç³»ç»Ÿä¼šå°†è¯¥é—®é¢˜å‘é‡åŒ–ï¼Œç„¶ååœ¨å·²æœ‰æ–‡æœ¬å‘é‡ä¸­è¿›è¡Œç›¸ä¼¼åº¦åŒ¹é…ï¼Œä»è€Œè¿”å›å¦‚â€œå¼ ä¸‰æ˜¯æ³•å¾‹ä¸“å®¶â€¦â€¦â€çš„ç‰‡æ®µï¼Œä½œä¸ºæ„å»ºå›ç­”çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p>è¿™æ®µé€»è¾‘æ˜¯ RAG æ¨¡å‹â€œRetrieverâ€é˜¶æ®µçš„æ ¸å¿ƒï¼Œè®©å¤§æ¨¡å‹åœ¨â€œæœ‰çŸ¥è¯†â€çš„åŸºç¡€ä¸Šä½œç­”ï¼Œæå‡å‡†ç¡®æ€§å’Œå®ç”¨æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">question: <span class="built_in">str</span>, top_k: <span class="built_in">int</span> = TOP_K</span>):</span><br><span class="line">    qvec = embed(question)</span><br><span class="line">    body = &#123;</span><br><span class="line">        <span class="string">&quot;size&quot;</span>: top_k,</span><br><span class="line">        <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;knn_nearest_neighbors&quot;</span>: &#123;        <span class="comment"># è‹¥ Elastiknn 0.7.x ç”¨ elastiknn_nearest_neighbors</span></span><br><span class="line">                <span class="string">&quot;field&quot;</span>: <span class="string">&quot;vec&quot;</span>,</span><br><span class="line">                <span class="string">&quot;vec&quot;</span>: &#123; <span class="string">&quot;values&quot;</span>: qvec &#125;,</span><br><span class="line">                <span class="string">&quot;model&quot;</span>: <span class="string">&quot;lsh&quot;</span>,</span><br><span class="line">                <span class="string">&quot;similarity&quot;</span>: <span class="string">&quot;cosine&quot;</span>,</span><br><span class="line">                <span class="string">&quot;k&quot;</span>: top_k,</span><br><span class="line">                <span class="string">&quot;candidates&quot;</span>: <span class="number">200</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    r = session.post(<span class="string">f&quot;<span class="subst">&#123;ES_URL&#125;</span>/<span class="subst">&#123;INDEX&#125;</span>/_search&quot;</span>,</span><br><span class="line">                     json=body, verify=<span class="literal">False</span>, auth=ES_AUTH)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> r.ok:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;== ES response ==&quot;</span>, r.text)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    <span class="keyword">return</span> [hit[<span class="string">&quot;_source&quot;</span>][<span class="string">&quot;content&quot;</span>] <span class="keyword">for</span> hit <span class="keyword">in</span> r.json()[<span class="string">&quot;hits&quot;</span>][<span class="string">&quot;hits&quot;</span>]]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-6-ä¸»å¾ªç¯"><a href="#3-6-ä¸»å¾ªç¯" class="headerlink" title="3.6 ä¸»å¾ªç¯"></a>3.6 ä¸»å¾ªç¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CLI ä¸»é€»è¾‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    docs = [</span><br><span class="line">    <span class="comment"># åŸæ¥çš„ 3 æ¡</span></span><br><span class="line">    <span class="string">&quot;å¼ ä¸‰æ˜¯æ³•å¾‹ä¸“å®¶ï¼Œæ“…é•¿åˆåŒæ³•ä¸çŸ¥è¯†äº§æƒã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æå››åœ¨äººæœºäº¤äº’é¢†åŸŸç ”ç©¶å¤šå¹´ï¼Œå°¤å…¶å…³æ³¨å¯ç”¨æ€§æµ‹è¯•ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç‹äº”æ˜¯ä¸€åèµ„æ·±è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œå¯¹äº‘åŸç”Ÿã€DevOps æœ‰ä¸°å¯Œç»éªŒã€‚&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ–°å¢ 100 æ¡</span></span><br><span class="line">    <span class="string">&quot;èµµå…­æ˜¯ä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œä¸“æ³¨æœºå™¨å­¦ä¹ æ¨¡å‹è°ƒä¼˜ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å­™ä¸ƒå…·æœ‰åå¹´é‡‘èé£æ§ç»éªŒï¼Œç†Ÿæ‚‰å·´å¡å°”åè®®ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å‘¨å…«æ˜¯åŒºå—é“¾å¼€å‘è€…ï¼Œæ“…é•¿æ™ºèƒ½åˆçº¦å®‰å…¨å®¡è®¡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å´ä¹é•¿æœŸç ”ç©¶è¾¹ç¼˜è®¡ç®—ï¼Œåœ¨ IoT ç½‘å…³æ¶æ„æ–¹é¢æœ‰å®è·µã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éƒ‘åæ˜¯èµ„æ·± DBAï¼Œç²¾é€š MySQL æ€§èƒ½è°ƒä¼˜ä¸é«˜å¯ç”¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é’±åä¸€æ“…é•¿äº‘åŸç”Ÿå®‰å…¨æ²»ç†ï¼Œä¸»å¯¼å¤šå®¶ä¼ä¸šé›¶ä¿¡ä»»è½åœ°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è’‹åäºŒæ˜¯ GPU è¿ç»´ä¸“å®¶ï¼Œå¯¹ CUDA ä¼˜åŒ–æœ‰æ·±å…¥ç ”ç©¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ²ˆåä¸‰ä¸“æ³¨æ·±åº¦å­¦ä¹ æ¨ç†åŠ é€Ÿï¼Œç»´æŠ¤ TensorRT æ’ä»¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éŸ©åå››æ˜¯ FaaS å¹³å°æ¶æ„å¸ˆï¼Œå…³æ³¨å†·å¯åŠ¨ä¼˜åŒ–ç­–ç•¥ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å§šåäº”ä»äº‹é‡åŒ–äº¤æ˜“ç®—æ³•å¼€å‘ï¼Œå¯¹é«˜é¢‘æ•°æ®å¤„ç†ç†Ÿç»ƒã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚µåå…­æ˜¯æ¸—é€æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæ“…é•¿ Web æ¼æ´æŒ–æ˜ä¸åˆ©ç”¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ±ªåä¸ƒä¸»æ”» AIGC ç‰ˆæƒåˆè§„ï¼Œä¸ºå¤šå®¶åª’ä½“æœºæ„æä¾›æ–¹æ¡ˆã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å­”åå…«ç ”ç©¶è”é‚¦å­¦ä¹ ï¼Œè§£å†³æ•°æ®å­¤å²›éšç§é—®é¢˜ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ›¹åä¹è´Ÿè´£ SRE å›¢é˜Ÿï¼Œç²¾é€šæ··æ²Œå·¥ç¨‹ä¸é”™è¯¯é¢„ç®—ç®¡ç†ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¸¥äºŒåæ˜¯ç½‘ç»œå–è¯ä¸“å®¶ï¼Œå‚ä¸å¤šèµ·é‡å¤§æ¡ˆä»¶åˆ†æã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åäºŒä¸€ç ”å‘ AutoML å¹³å°ï¼Œé™ä½æ¨¡å‹è®­ç»ƒé—¨æ§›ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é›·äºŒäºŒåœ¨ 5G è¾¹ç¼˜ç½‘ååŒè®¡ç®—é¢†åŸŸå‘è¡¨å¤šç¯‡è®ºæ–‡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å‡ŒäºŒä¸‰æ˜¯ DevRel ç»ç†ï¼Œæ¨åŠ¨å¼€æºç¤¾åŒºå¢é•¿ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å²äºŒå››å¯¹ RAG æ¶æ„æœ‰æ·±å…¥å®è·µï¼Œä¼˜åŒ–æ£€ç´¢å¬å›ç‡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é˜®äºŒäº”æ˜¯ WebGPU å…ˆè¡Œè€…ï¼Œè‡´åŠ›æå‡å‰ç«¯æ¸²æŸ“æ€§èƒ½ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ­äºŒå…­ä¸»å¯¼å¤šäº‘æˆæœ¬æ²»ç†é¡¹ç›®ï¼ŒèŠ‚çœ 30% é¢„ç®—ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¹”äºŒä¸ƒæ˜¯ä¸€å AIGC Prompt å·¥ç¨‹å¸ˆï¼Œä¸“ç²¾å¤šæ¨¡æ€æŒ‡ä»¤è®¾è®¡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è©¹äºŒå…«æ“…é•¿å¤§è§„æ¨¡ AB æµ‹è¯•æ¡†æ¶è½åœ°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é¡¾äºŒä¹æ˜¯ Serverless æ¶æ„å¸ƒé“è€…ï¼Œç¼–å†™å¤šæœ¬æŠ€æœ¯ä¹¦ç±ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é¾šä¸‰åå…³æ³¨ DORA æŒ‡æ ‡ï¼Œç”¨æ•°æ®é©±åŠ¨ DevOps æ”¹è¿›ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è®¡ä¸‰ä¸€æ˜¯ API ç½‘å…³ä¸“å®¶ï¼Œå®ç°ç™¾ä¸‡ QPS ä½å»¶è¿Ÿã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è’²ä¸‰äºŒç ”ç©¶å½±åƒåˆ†å‰²æ¨¡å‹ï¼Œç”¨äºåŒ»å­¦è¾…åŠ©è¯Šæ–­ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚±ä¸‰ä¸‰æ˜¯ Zig è¯­è¨€æ—©æœŸè´¡çŒ®è€…ï¼Œæ¨è¡Œå†…å­˜å®‰å…¨ç¼–ç ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åº„ä¸‰å››é•¿æœŸç»´æŠ¤ Kafka é›†ç¾¤ï¼Œæ“…é•¿ Topic è§„åˆ’ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å®«ä¸‰äº”æ˜¯ä½ä»£ç å¹³å°æ¶æ„å¸ˆï¼Œå…³æ³¨æ’ä»¶ç”Ÿæ€ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è“ä¸‰å…­ç ”ç©¶ ICEBERG è¡¨æ ¼å¼ï¼Œæå‡æ¹–ä»“æŸ¥è¯¢æ•ˆç‡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è‚ä¸‰ä¸ƒåœ¨å®‰å…¨ç¼–æ’ SOAR äº§å“è®¾è®¡ä¸Šç»éªŒä¸°å¯Œã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é™†ä¸‰å…«ä¸»å¯¼ SaaS äº§å“å›½é™…åŒ–ï¼Œæœ¬åœ°åŒ–æµç¨‹æˆç†Ÿã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¸©ä¸‰ä¹è´Ÿè´£æ··åˆäº‘ DR æ–¹æ¡ˆï¼Œå®ç°åˆ†é’Ÿçº§åˆ‡æ¢ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è¢å››åæ˜¯è¯­éŸ³åˆæˆå·¥ç¨‹å¸ˆï¼Œä¼˜åŒ–å¤š speaker é€‚é…ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è´¾å››ä¸€æ·±å…¥ç ”ç©¶ DDDï¼Œå¸®åŠ©å›¢é˜Ÿç†æ¸…é¢†åŸŸè¾¹ç•Œã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¼å››äºŒä»äº‹å®æ—¶é£æ§å¤§æ•°æ®å¹³å°æ¶æ„ï¼Œå¤„ç†äº¿çº§æµé‡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç¨‹å››ä¸‰æ˜¯ ARM SoC é©±åŠ¨å·¥ç¨‹å¸ˆï¼Œå¯¹ç”µæºç®¡ç†ç†Ÿæ‚‰ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å±ˆå››å››åœ¨ Federated GraphQL ç½‘å…³æ²»ç†æ–¹é¢æœ‰æ¡ˆä¾‹ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç”³å››äº”å¸¦é˜Ÿå®ç° MLOps è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç½—å››å…­ç ”ç©¶ VDBMSï¼Œæ”¯æŒ PB çº§å‘é‡æ£€ç´¢ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç¥å››ä¸ƒæ˜¯ HTAP æ•°æ®åº“å¸ƒé“è€…ï¼Œä¼˜åŒ–æ··åˆè´Ÿè½½ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å·¦å››å…«åœ¨ IAM ä¸ RBAC è®¾è®¡é¢†åŸŸæ·±è€•ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å†·å››ä¹æ˜¯é“¾è·¯å¯è§‚æµ‹æ€§å·¥ç¨‹å¸ˆï¼Œæ¨å¹¿ OTEL æ ‡å‡†ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åŒ…äº”åæŠ•å…¥å¼‚æ„è®¡ç®—è°ƒåº¦æ¡†æ¶ç ”ç©¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ»‘äº”ä¸€ç²¾é€š eBPF åœ¨å®‰å…¨å¯è§‚æµ‹æ€§åœºæ™¯çš„è½åœ°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æŸ´äº”äºŒç ”ç©¶é‡å­å®‰å…¨ç®—æ³•ï¼Œå¯¹å›½å¯†è¿ç§»æ–¹æ¡ˆç†Ÿæ‚‰ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è°ˆäº”ä¸‰æ˜¯å†…æ ¸å®‰å…¨ç ”ç©¶å‘˜ï¼Œå‘ç°å¤šä¸ª 0-day æ¼æ´ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é„¢äº”å››ä¸»å¯¼ SaaS è®¡è´¹ç³»ç»Ÿé‡æ„ï¼Œæ”¯æŒçµæ´»å¥—é¤ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚¸äº”äº”æ˜¯ç»¿è‰²æ•°æ®ä¸­å¿ƒè§„åˆ’å¸ˆï¼Œæ¨åŠ¨ PUE é™åˆ° 1.2ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å€™äº”å…­åœ¨è‡ªåŠ¨é©¾é©¶ SLAM ç®—æ³•å…·æœ‰ä¸“åˆ©ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¤äº”ä¸ƒå…³æ³¨ CDP æ¶æ„ï¼Œè¿æ¥å¤šæºè¥é”€æ•°æ®ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¸äº”å…«æ˜¯ FPGA åŠ é€Ÿå·¥ç¨‹å¸ˆï¼Œå®ç°ä½å»¶è¿Ÿæ¨ç†ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é³äº”ä¹ç ”ç©¶ WASM è¾¹ç¼˜è¿è¡Œæ—¶ï¼Œé™ä½å†·å¯åŠ¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æŸ´å…­ååœ¨ DevSecOps æµæ°´çº¿é›†æˆæ–¹é¢ç»éªŒä¸°å¯Œã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;èŠ±å…­ä¸€ç­–åˆ’å¤§è§„æ¨¡é»‘å®¢é©¬æ‹‰æ¾ï¼Œä¿ƒæˆ 500+ é¡¹ç›®å­µåŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç‰›å…­äºŒæ˜¯è¾¹ç¼˜ AI æ¨ç†æ¡†æ¶ä½œè€…ï¼Œé‡è§†åŠŸè€—ä¼˜åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç„¦å…­ä¸‰ç ”ç©¶è‡ªç›‘ç£å­¦ä¹ åœ¨æ¨èç³»ç»Ÿçš„åº”ç”¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å•†å…­å››æ˜¯ Rust Web å¼€å‘è€…ï¼Œæ¨å¹¿é›¶æ‹·è´ JSON è§£æã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é˜å…­äº”æŠ•å…¥æ•°å­—å­ªç”ŸåŸå¸‚å¹³å°ç ”å‘ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¼“å…­å…­ä¸»æ”» OTA å‡çº§å®‰å…¨ï¼Œè¦†ç›–æ±½è½¦ ECUã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ€€å…­ä¸ƒæ˜¯ MAC æ•°æ®å¹³é¢ä¸“å®¶ï¼Œä¼˜åŒ–è½¬å‘æ€§èƒ½ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å®“å…­å…«å‚ä¸å¤šåœºç¾å¤‡æ¼”ç»ƒï¼Œå®Œå–„æ¼”ç»ƒè„šæœ¬ä½“ç³»ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éƒå…­ä¹æ˜¯ PKI æ¶æ„å¸ˆï¼Œè®¾è®¡å¤§è§„æ¨¡è¯ä¹¦ç”Ÿå‘½å‘¨æœŸã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åµ‡ä¸ƒåè‡´åŠ›äºå¤šåª’ä½“ç¼–è§£ç æ ‡å‡†åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚ä¸ƒä¸€ç ”ç©¶ EDA è‡ªåŠ¨å¸ƒçº¿ç®—æ³•ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¡‘ä¸ƒäºŒæ‰“é€  AI å·¥å‚æµæ°´çº¿ï¼Œå®ç°æ¨¡å‹å¿«é€Ÿè¿­ä»£ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¡‚ä¸ƒä¸‰ä¸“æ³¨ DPU åŠ é€Ÿç½‘ç»œè™šæ‹ŸåŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éº»ä¸ƒå››æ˜¯ Supabase ä¸­å›½ç¤¾åŒºç»´æŠ¤è€…ï¼Œæ¨å¹¿ BaaSã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä»‡ä¸ƒäº”å®ç°ä¼ä¸šçº§ KYC æµç¨‹è‡ªåŠ¨åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è–„ä¸ƒå…­ç ”ç©¶å¤šæ¨¡æ€æƒ…æ„Ÿåˆ†æï¼Œç”¨äºå®¢æœè´¨æ£€ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è°¯ä¸ƒä¸ƒæ˜¯ SD-WAN äº§å“ç»ç†ï¼Œèšç„¦æµ·å¤–ä¸“çº¿ä¼˜åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å·«ä¸ƒå…«è´Ÿè´£ Kafka to Pulsar è¿ç§»æ–¹æ¡ˆã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¡‘ä¸ƒä¹åœ¨ DAG å¼•æ“ä¼˜åŒ– CPS æµæ°´çº¿ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚¬å…«åç ”ç©¶ç«¯ä¾§ LLM è’¸é¦å‹ç¼©ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è‡§å…«ä¸€æ˜¯ä¸‰ç»´é‡å»ºç®—æ³•å·¥ç¨‹å¸ˆï¼ŒæœåŠ¡æ–‡åšæ•°å­—åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç¦¾å…«äºŒä¸“æ”» S3 å…¼å®¹å¯¹è±¡å­˜å‚¨ç½‘å…³ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åŸå…«ä¸‰å‚ä¸å¯ä¿¡æ‰§è¡Œç¯å¢ƒ TEE æ–¹æ¡ˆè½åœ°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ·¦å…«å››æ˜¯å·¥ä¸šäº’è”ç½‘å®‰å…¨è§„åˆ’é¡¾é—®ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç»ƒå…«äº”å®ç° GPU å¤šç§Ÿæˆ· QoS è°ƒåº¦å™¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç¦¹å…«å…­å…³æ³¨è·¨å¢ƒåˆè§„è¦æ±‚ï¼Œç²¾é€š GDPRã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å»‰å…«ä¸ƒæ˜¯ SDN æ§åˆ¶å™¨å¼€æºè´¡çŒ®è€…ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;äº“å…«å…«ä¸“æ³¨é«˜å¹¶å‘é•¿è¿æ¥ç½‘å…³ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å®—å…«ä¹æ‰“é€ é›¶ä»£ç æœºå™¨å­¦ä¹ å¹³å°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å…¬å†¶ä¹åç ”ç©¶ PIM å­˜å†…è®¡ç®—æ¶æ„ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;çº¢ä¹ä¸€æ˜¯ MESH ç½‘ç»œæ€§èƒ½è°ƒä¼˜ä¸“å®¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;çœ­ä¹äºŒè‡´åŠ›äº AI åˆæˆéŸ³é¢‘ç‰ˆæƒæ£€æµ‹ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç±³ä¹ä¸‰æ¨åŠ¨ç¢³æ’æ”¾æ•°æ®å¹³å°å»ºè®¾ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éš—ä¹å››æ˜¯æœºå™¨äººè¿åŠ¨è§„åˆ’ç®—æ³•ä¸“å®¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ‹‰ä¹äº”ç ”ç©¶è¯­ä¹‰åˆ†å‰²åœ¨é¥æ„Ÿå›¾åƒçš„åº”ç”¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è”ºä¹å…­è´Ÿè´£ 0-RTT QUIC åè®®ä¼˜åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è‡§ä¹ä¸ƒä¸“æ³¨ BERT åœ¨æ³•å¾‹æ–‡æœ¬çš„ç»†ç²’åº¦å®ä½“æŠ½å–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ˜ä¹å…«æ˜¯ RPG æ¸¸æˆ AI NPC è¡Œä¸ºæ ‘ä½œè€…ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è´ä¹ä¹ç ”ç©¶å·®åˆ†éšç§åœ¨å¹¿å‘Šæ•°æ®çš„å®è·µã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ–½ä¸€ç™¾ä¸»å¯¼äº‘åŸç”Ÿ API å®‰å…¨ç›‘æ§å¹³å°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¼ä¸€é›¶ä¸€ä¼˜åŒ– Kafka Connect å¤§è§„æ¨¡åŒæ­¥ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å µä¸€é›¶äºŒç ”ç©¶è½¦è¾† V2X åè®®æ ˆå®ç°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;èä¸€é›¶ä¸‰èšç„¦ A/B å†³ç­–å¹³å°å¯è§†åŒ–ã€‚&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    dim = <span class="built_in">len</span>(embed(<span class="string">&quot;ç»´åº¦æ¢æµ‹&quot;</span>))      <span class="comment"># åŠ¨æ€æ¢æµ‹å‘é‡ç»´åº¦</span></span><br><span class="line">    create_index(dim)</span><br><span class="line">    bulk_upload(docs)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;[âˆš] åˆå§‹åŒ–å®Œæˆï¼ˆå‘é‡ç»´åº¦ <span class="subst">&#123;dim&#125;</span>ï¼‰ã€‚å¼€å§‹æé—®ï¼ŒCtrl+C é€€å‡ºã€‚\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            q = <span class="built_in">input</span>(<span class="string">&quot;Q: &quot;</span>).strip()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> q:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            passages = search(q)</span><br><span class="line">            context  = <span class="string">&quot;\n&quot;</span>.join(<span class="string">f&quot;èµ„æ–™<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>ï¼š<span class="subst">&#123;p&#125;</span>&quot;</span> <span class="keyword">for</span> i, p <span class="keyword">in</span> <span class="built_in">enumerate</span>(passages))</span><br><span class="line">            prompt   = (<span class="string">f&quot;å·²çŸ¥èµ„æ–™å¦‚ä¸‹ï¼š\n<span class="subst">&#123;context&#125;</span>\n\nè¯·æ ¹æ®ä»¥ä¸Šèµ„æ–™å›ç­”ç”¨æˆ·é—®é¢˜ï¼š<span class="subst">&#123;q&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\nA:&quot;</span>, chat(prompt))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å¼•ç”¨:&quot;</span>, passages, <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\nBye!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-è¿è¡Œæ•ˆæœ"><a href="#4-è¿è¡Œæ•ˆæœ" class="headerlink" title="4. è¿è¡Œæ•ˆæœ"></a>4. è¿è¡Œæ•ˆæœ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Q: å¼ ä¸‰æ“…é•¿ä»€ä¹ˆ</span><br><span class="line">A: å¼ ä¸‰æ˜¯ä¸€åæ³•å¾‹ä¸“å®¶ï¼Œä¸“é•¿é¢†åŸŸä¸ºåˆåŒæ³•ä¸çŸ¥è¯†äº§æƒã€‚</span><br><span class="line">å¼•ç”¨: [&#x27;å¼ ä¸‰æ˜¯æ³•å¾‹ä¸“å®¶ï¼Œæ“…é•¿åˆåŒæ³•ä¸çŸ¥è¯†äº§æƒã€‚&#x27;]</span><br></pre></td></tr></table></figure>

<p>ç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i-blog.csdnimg.cn/direct/71056e7c44e147e5837cc0048b896be0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å®Œæ•´ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, json, requests, warnings</span><br><span class="line"><span class="keyword">from</span> ollama <span class="keyword">import</span> Client</span><br><span class="line"><span class="keyword">from</span> requests.packages.urllib3.exceptions <span class="keyword">import</span> InsecureRequestWarning</span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>, category=InsecureRequestWarning)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é…ç½®åŒº â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line">ES_URL   = os.getenv(<span class="string">&quot;ES_URL&quot;</span>, <span class="string">&quot;https://localhost:9200&quot;</span>)</span><br><span class="line">ES_AUTH  = (<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;c59a759f31e901e8d279&quot;</span>)   <span class="comment"># æ— è®¤è¯è®¾ä¸º None</span></span><br><span class="line">INDEX    = <span class="string">&quot;rag_demo&quot;</span></span><br><span class="line"></span><br><span class="line">OLLAMA_HOST  = os.getenv(<span class="string">&quot;OLLAMA_URL&quot;</span>, <span class="string">&quot;http://localhost:11434&quot;</span>)</span><br><span class="line">EMBED_MODEL  = <span class="string">&quot;nomic-embed-text&quot;</span>         <span class="comment"># å‘é‡æ¨¡å‹</span></span><br><span class="line">CHAT_MODEL   = <span class="string">&quot;deepseek-r1:7b&quot;</span>           <span class="comment"># å¯¹è¯æ¨¡å‹</span></span><br><span class="line">TOP_K        = <span class="number">4</span></span><br><span class="line">NUM_CAND     = <span class="number">200</span>                        <span class="comment"># kNN å…ˆç²—å¬å›æ¡æ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆå§‹åŒ– â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line">client = Client(host=OLLAMA_HOST)</span><br><span class="line">session = requests.Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ollama å°è£… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">embed</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">list</span>[<span class="built_in">float</span>]:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¿”å›æ–‡æœ¬å‘é‡ (list[float])&quot;&quot;&quot;</span></span><br><span class="line">    resp = client.embeddings(model=EMBED_MODEL, prompt=text)</span><br><span class="line">    <span class="keyword">return</span> resp[<span class="string">&quot;embedding&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chat</span>(<span class="params">prompt: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸èŠå¤©æ¨¡å‹å¯¹è¯ï¼ˆå®Œæ•´å›å¤ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">    resp = client.chat(</span><br><span class="line">        model=CHAT_MODEL,</span><br><span class="line">        messages=[&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;],</span><br><span class="line">        <span class="comment"># stream=False</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> resp[<span class="string">&quot;message&quot;</span>][<span class="string">&quot;content&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------- â‘  åˆ›å»ºç´¢å¼•ï¼šElastiknn æ˜ å°„ ----------</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_index</span>(<span class="params">dim: <span class="built_in">int</span></span>):</span><br><span class="line">    mapping = &#123;</span><br><span class="line">        <span class="string">&quot;settings&quot;</span>: &#123; <span class="string">&quot;index.knn&quot;</span>: <span class="literal">True</span> &#125;,</span><br><span class="line">        <span class="string">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;content&quot;</span>: &#123; <span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span> &#125;,</span><br><span class="line">                <span class="string">&quot;vec&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;knn_dense_float_vector&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;knn&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;dims&quot;</span>: dim,</span><br><span class="line">                        <span class="string">&quot;model&quot;</span>: <span class="string">&quot;lsh&quot;</span>,        <span class="comment"># ä¹Ÿå¯ hnsw / exact</span></span><br><span class="line">                        <span class="string">&quot;similarity&quot;</span>: <span class="string">&quot;cosine&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;L&quot;</span>: <span class="number">99</span>,</span><br><span class="line">                        <span class="string">&quot;k&quot;</span>: <span class="number">1</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    r = session.put(<span class="string">f&quot;<span class="subst">&#123;ES_URL&#125;</span>/<span class="subst">&#123;INDEX&#125;</span>&quot;</span>,</span><br><span class="line">                    json=mapping, verify=<span class="literal">False</span>, auth=ES_AUTH)</span><br><span class="line">    <span class="keyword">if</span> r.status_code <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">200</span>, <span class="number">201</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;resource_already_exists_exception&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> r.text:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Create index error:\n&quot;</span>, r.text)</span><br><span class="line">            r.raise_for_status()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------- â‘¡ æ‰¹é‡å†™å…¥ï¼šå‘é‡å¿…é¡»åŒ… &#123;&quot;values&quot;: â€¦&#125; ----------</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bulk_upload</span>(<span class="params">texts: <span class="built_in">list</span>[<span class="built_in">str</span>]</span>):</span><br><span class="line">    bulk = []</span><br><span class="line">    <span class="keyword">for</span> i, t <span class="keyword">in</span> <span class="built_in">enumerate</span>(texts):</span><br><span class="line">        bulk.append(&#123; <span class="string">&quot;index&quot;</span>: &#123; <span class="string">&quot;_index&quot;</span>: INDEX, <span class="string">&quot;_id&quot;</span>: i &#125; &#125;)</span><br><span class="line">        bulk.append(&#123;</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: t,</span><br><span class="line">            <span class="string">&quot;vec&quot;</span>: &#123; <span class="string">&quot;values&quot;</span>: embed(t) &#125;     <span class="comment"># â˜… å…³é”®ï¼šå¯¹è±¡æ ¼å¼</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ndjson = <span class="string">&quot;\n&quot;</span>.join(json.dumps(d, ensure_ascii=<span class="literal">False</span>) <span class="keyword">for</span> d <span class="keyword">in</span> bulk) + <span class="string">&quot;\n&quot;</span></span><br><span class="line">    r = session.post(<span class="string">f&quot;<span class="subst">&#123;ES_URL&#125;</span>/_bulk&quot;</span>,</span><br><span class="line">                     data=ndjson.encode(<span class="string">&quot;utf-8&quot;</span>),</span><br><span class="line">                     headers=&#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/x-ndjson&quot;</span>&#125;,</span><br><span class="line">                     verify=<span class="literal">False</span>, auth=ES_AUTH)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------- â‘¢ æŸ¥è¯¢ï¼šknn_nearest_neighbors ----------</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">question: <span class="built_in">str</span>, top_k: <span class="built_in">int</span> = TOP_K</span>):</span><br><span class="line">    qvec = embed(question)</span><br><span class="line">    body = &#123;</span><br><span class="line">        <span class="string">&quot;size&quot;</span>: top_k,</span><br><span class="line">        <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;knn_nearest_neighbors&quot;</span>: &#123;        <span class="comment"># è‹¥ Elastiknn 0.7.x ç”¨ elastiknn_nearest_neighbors</span></span><br><span class="line">                <span class="string">&quot;field&quot;</span>: <span class="string">&quot;vec&quot;</span>,</span><br><span class="line">                <span class="string">&quot;vec&quot;</span>: &#123; <span class="string">&quot;values&quot;</span>: qvec &#125;,</span><br><span class="line">                <span class="string">&quot;model&quot;</span>: <span class="string">&quot;lsh&quot;</span>,</span><br><span class="line">                <span class="string">&quot;similarity&quot;</span>: <span class="string">&quot;cosine&quot;</span>,</span><br><span class="line">                <span class="string">&quot;k&quot;</span>: top_k,</span><br><span class="line">                <span class="string">&quot;candidates&quot;</span>: <span class="number">200</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    r = session.post(<span class="string">f&quot;<span class="subst">&#123;ES_URL&#125;</span>/<span class="subst">&#123;INDEX&#125;</span>/_search&quot;</span>,</span><br><span class="line">                     json=body, verify=<span class="literal">False</span>, auth=ES_AUTH)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> r.ok:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;== ES response ==&quot;</span>, r.text)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    <span class="keyword">return</span> [hit[<span class="string">&quot;_source&quot;</span>][<span class="string">&quot;content&quot;</span>] <span class="keyword">for</span> hit <span class="keyword">in</span> r.json()[<span class="string">&quot;hits&quot;</span>][<span class="string">&quot;hits&quot;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CLI ä¸»é€»è¾‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    docs = [</span><br><span class="line">    <span class="comment"># åŸæ¥çš„ 3 æ¡</span></span><br><span class="line">    <span class="string">&quot;å¼ ä¸‰æ˜¯æ³•å¾‹ä¸“å®¶ï¼Œæ“…é•¿åˆåŒæ³•ä¸çŸ¥è¯†äº§æƒã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æå››åœ¨äººæœºäº¤äº’é¢†åŸŸç ”ç©¶å¤šå¹´ï¼Œå°¤å…¶å…³æ³¨å¯ç”¨æ€§æµ‹è¯•ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç‹äº”æ˜¯ä¸€åèµ„æ·±è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œå¯¹äº‘åŸç”Ÿã€DevOps æœ‰ä¸°å¯Œç»éªŒã€‚&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ–°å¢ 100 æ¡</span></span><br><span class="line">    <span class="string">&quot;èµµå…­æ˜¯ä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œä¸“æ³¨æœºå™¨å­¦ä¹ æ¨¡å‹è°ƒä¼˜ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å­™ä¸ƒå…·æœ‰åå¹´é‡‘èé£æ§ç»éªŒï¼Œç†Ÿæ‚‰å·´å¡å°”åè®®ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å‘¨å…«æ˜¯åŒºå—é“¾å¼€å‘è€…ï¼Œæ“…é•¿æ™ºèƒ½åˆçº¦å®‰å…¨å®¡è®¡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å´ä¹é•¿æœŸç ”ç©¶è¾¹ç¼˜è®¡ç®—ï¼Œåœ¨ IoT ç½‘å…³æ¶æ„æ–¹é¢æœ‰å®è·µã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éƒ‘åæ˜¯èµ„æ·± DBAï¼Œç²¾é€š MySQL æ€§èƒ½è°ƒä¼˜ä¸é«˜å¯ç”¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é’±åä¸€æ“…é•¿äº‘åŸç”Ÿå®‰å…¨æ²»ç†ï¼Œä¸»å¯¼å¤šå®¶ä¼ä¸šé›¶ä¿¡ä»»è½åœ°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è’‹åäºŒæ˜¯ GPU è¿ç»´ä¸“å®¶ï¼Œå¯¹ CUDA ä¼˜åŒ–æœ‰æ·±å…¥ç ”ç©¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ²ˆåä¸‰ä¸“æ³¨æ·±åº¦å­¦ä¹ æ¨ç†åŠ é€Ÿï¼Œç»´æŠ¤ TensorRT æ’ä»¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éŸ©åå››æ˜¯ FaaS å¹³å°æ¶æ„å¸ˆï¼Œå…³æ³¨å†·å¯åŠ¨ä¼˜åŒ–ç­–ç•¥ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å§šåäº”ä»äº‹é‡åŒ–äº¤æ˜“ç®—æ³•å¼€å‘ï¼Œå¯¹é«˜é¢‘æ•°æ®å¤„ç†ç†Ÿç»ƒã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚µåå…­æ˜¯æ¸—é€æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæ“…é•¿ Web æ¼æ´æŒ–æ˜ä¸åˆ©ç”¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ±ªåä¸ƒä¸»æ”» AIGC ç‰ˆæƒåˆè§„ï¼Œä¸ºå¤šå®¶åª’ä½“æœºæ„æä¾›æ–¹æ¡ˆã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å­”åå…«ç ”ç©¶è”é‚¦å­¦ä¹ ï¼Œè§£å†³æ•°æ®å­¤å²›éšç§é—®é¢˜ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ›¹åä¹è´Ÿè´£ SRE å›¢é˜Ÿï¼Œç²¾é€šæ··æ²Œå·¥ç¨‹ä¸é”™è¯¯é¢„ç®—ç®¡ç†ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¸¥äºŒåæ˜¯ç½‘ç»œå–è¯ä¸“å®¶ï¼Œå‚ä¸å¤šèµ·é‡å¤§æ¡ˆä»¶åˆ†æã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åäºŒä¸€ç ”å‘ AutoML å¹³å°ï¼Œé™ä½æ¨¡å‹è®­ç»ƒé—¨æ§›ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é›·äºŒäºŒåœ¨ 5G è¾¹ç¼˜ç½‘ååŒè®¡ç®—é¢†åŸŸå‘è¡¨å¤šç¯‡è®ºæ–‡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å‡ŒäºŒä¸‰æ˜¯ DevRel ç»ç†ï¼Œæ¨åŠ¨å¼€æºç¤¾åŒºå¢é•¿ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å²äºŒå››å¯¹ RAG æ¶æ„æœ‰æ·±å…¥å®è·µï¼Œä¼˜åŒ–æ£€ç´¢å¬å›ç‡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é˜®äºŒäº”æ˜¯ WebGPU å…ˆè¡Œè€…ï¼Œè‡´åŠ›æå‡å‰ç«¯æ¸²æŸ“æ€§èƒ½ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ­äºŒå…­ä¸»å¯¼å¤šäº‘æˆæœ¬æ²»ç†é¡¹ç›®ï¼ŒèŠ‚çœ 30% é¢„ç®—ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¹”äºŒä¸ƒæ˜¯ä¸€å AIGC Prompt å·¥ç¨‹å¸ˆï¼Œä¸“ç²¾å¤šæ¨¡æ€æŒ‡ä»¤è®¾è®¡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è©¹äºŒå…«æ“…é•¿å¤§è§„æ¨¡ AB æµ‹è¯•æ¡†æ¶è½åœ°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é¡¾äºŒä¹æ˜¯ Serverless æ¶æ„å¸ƒé“è€…ï¼Œç¼–å†™å¤šæœ¬æŠ€æœ¯ä¹¦ç±ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é¾šä¸‰åå…³æ³¨ DORA æŒ‡æ ‡ï¼Œç”¨æ•°æ®é©±åŠ¨ DevOps æ”¹è¿›ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è®¡ä¸‰ä¸€æ˜¯ API ç½‘å…³ä¸“å®¶ï¼Œå®ç°ç™¾ä¸‡ QPS ä½å»¶è¿Ÿã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è’²ä¸‰äºŒç ”ç©¶å½±åƒåˆ†å‰²æ¨¡å‹ï¼Œç”¨äºåŒ»å­¦è¾…åŠ©è¯Šæ–­ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚±ä¸‰ä¸‰æ˜¯ Zig è¯­è¨€æ—©æœŸè´¡çŒ®è€…ï¼Œæ¨è¡Œå†…å­˜å®‰å…¨ç¼–ç ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åº„ä¸‰å››é•¿æœŸç»´æŠ¤ Kafka é›†ç¾¤ï¼Œæ“…é•¿ Topic è§„åˆ’ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å®«ä¸‰äº”æ˜¯ä½ä»£ç å¹³å°æ¶æ„å¸ˆï¼Œå…³æ³¨æ’ä»¶ç”Ÿæ€ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è“ä¸‰å…­ç ”ç©¶ ICEBERG è¡¨æ ¼å¼ï¼Œæå‡æ¹–ä»“æŸ¥è¯¢æ•ˆç‡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è‚ä¸‰ä¸ƒåœ¨å®‰å…¨ç¼–æ’ SOAR äº§å“è®¾è®¡ä¸Šç»éªŒä¸°å¯Œã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é™†ä¸‰å…«ä¸»å¯¼ SaaS äº§å“å›½é™…åŒ–ï¼Œæœ¬åœ°åŒ–æµç¨‹æˆç†Ÿã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¸©ä¸‰ä¹è´Ÿè´£æ··åˆäº‘ DR æ–¹æ¡ˆï¼Œå®ç°åˆ†é’Ÿçº§åˆ‡æ¢ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è¢å››åæ˜¯è¯­éŸ³åˆæˆå·¥ç¨‹å¸ˆï¼Œä¼˜åŒ–å¤š speaker é€‚é…ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è´¾å››ä¸€æ·±å…¥ç ”ç©¶ DDDï¼Œå¸®åŠ©å›¢é˜Ÿç†æ¸…é¢†åŸŸè¾¹ç•Œã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¼å››äºŒä»äº‹å®æ—¶é£æ§å¤§æ•°æ®å¹³å°æ¶æ„ï¼Œå¤„ç†äº¿çº§æµé‡ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç¨‹å››ä¸‰æ˜¯ ARM SoC é©±åŠ¨å·¥ç¨‹å¸ˆï¼Œå¯¹ç”µæºç®¡ç†ç†Ÿæ‚‰ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å±ˆå››å››åœ¨ Federated GraphQL ç½‘å…³æ²»ç†æ–¹é¢æœ‰æ¡ˆä¾‹ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç”³å››äº”å¸¦é˜Ÿå®ç° MLOps è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç½—å››å…­ç ”ç©¶ VDBMSï¼Œæ”¯æŒ PB çº§å‘é‡æ£€ç´¢ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç¥å››ä¸ƒæ˜¯ HTAP æ•°æ®åº“å¸ƒé“è€…ï¼Œä¼˜åŒ–æ··åˆè´Ÿè½½ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å·¦å››å…«åœ¨ IAM ä¸ RBAC è®¾è®¡é¢†åŸŸæ·±è€•ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å†·å››ä¹æ˜¯é“¾è·¯å¯è§‚æµ‹æ€§å·¥ç¨‹å¸ˆï¼Œæ¨å¹¿ OTEL æ ‡å‡†ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åŒ…äº”åæŠ•å…¥å¼‚æ„è®¡ç®—è°ƒåº¦æ¡†æ¶ç ”ç©¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ»‘äº”ä¸€ç²¾é€š eBPF åœ¨å®‰å…¨å¯è§‚æµ‹æ€§åœºæ™¯çš„è½åœ°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æŸ´äº”äºŒç ”ç©¶é‡å­å®‰å…¨ç®—æ³•ï¼Œå¯¹å›½å¯†è¿ç§»æ–¹æ¡ˆç†Ÿæ‚‰ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è°ˆäº”ä¸‰æ˜¯å†…æ ¸å®‰å…¨ç ”ç©¶å‘˜ï¼Œå‘ç°å¤šä¸ª 0-day æ¼æ´ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é„¢äº”å››ä¸»å¯¼ SaaS è®¡è´¹ç³»ç»Ÿé‡æ„ï¼Œæ”¯æŒçµæ´»å¥—é¤ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚¸äº”äº”æ˜¯ç»¿è‰²æ•°æ®ä¸­å¿ƒè§„åˆ’å¸ˆï¼Œæ¨åŠ¨ PUE é™åˆ° 1.2ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å€™äº”å…­åœ¨è‡ªåŠ¨é©¾é©¶ SLAM ç®—æ³•å…·æœ‰ä¸“åˆ©ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¤äº”ä¸ƒå…³æ³¨ CDP æ¶æ„ï¼Œè¿æ¥å¤šæºè¥é”€æ•°æ®ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¸äº”å…«æ˜¯ FPGA åŠ é€Ÿå·¥ç¨‹å¸ˆï¼Œå®ç°ä½å»¶è¿Ÿæ¨ç†ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é³äº”ä¹ç ”ç©¶ WASM è¾¹ç¼˜è¿è¡Œæ—¶ï¼Œé™ä½å†·å¯åŠ¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æŸ´å…­ååœ¨ DevSecOps æµæ°´çº¿é›†æˆæ–¹é¢ç»éªŒä¸°å¯Œã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;èŠ±å…­ä¸€ç­–åˆ’å¤§è§„æ¨¡é»‘å®¢é©¬æ‹‰æ¾ï¼Œä¿ƒæˆ 500+ é¡¹ç›®å­µåŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç‰›å…­äºŒæ˜¯è¾¹ç¼˜ AI æ¨ç†æ¡†æ¶ä½œè€…ï¼Œé‡è§†åŠŸè€—ä¼˜åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç„¦å…­ä¸‰ç ”ç©¶è‡ªç›‘ç£å­¦ä¹ åœ¨æ¨èç³»ç»Ÿçš„åº”ç”¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å•†å…­å››æ˜¯ Rust Web å¼€å‘è€…ï¼Œæ¨å¹¿é›¶æ‹·è´ JSON è§£æã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é˜å…­äº”æŠ•å…¥æ•°å­—å­ªç”ŸåŸå¸‚å¹³å°ç ”å‘ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¼“å…­å…­ä¸»æ”» OTA å‡çº§å®‰å…¨ï¼Œè¦†ç›–æ±½è½¦ ECUã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ€€å…­ä¸ƒæ˜¯ MAC æ•°æ®å¹³é¢ä¸“å®¶ï¼Œä¼˜åŒ–è½¬å‘æ€§èƒ½ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å®“å…­å…«å‚ä¸å¤šåœºç¾å¤‡æ¼”ç»ƒï¼Œå®Œå–„æ¼”ç»ƒè„šæœ¬ä½“ç³»ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éƒå…­ä¹æ˜¯ PKI æ¶æ„å¸ˆï¼Œè®¾è®¡å¤§è§„æ¨¡è¯ä¹¦ç”Ÿå‘½å‘¨æœŸã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åµ‡ä¸ƒåè‡´åŠ›äºå¤šåª’ä½“ç¼–è§£ç æ ‡å‡†åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚ä¸ƒä¸€ç ”ç©¶ EDA è‡ªåŠ¨å¸ƒçº¿ç®—æ³•ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¡‘ä¸ƒäºŒæ‰“é€  AI å·¥å‚æµæ°´çº¿ï¼Œå®ç°æ¨¡å‹å¿«é€Ÿè¿­ä»£ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¡‚ä¸ƒä¸‰ä¸“æ³¨ DPU åŠ é€Ÿç½‘ç»œè™šæ‹ŸåŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éº»ä¸ƒå››æ˜¯ Supabase ä¸­å›½ç¤¾åŒºç»´æŠ¤è€…ï¼Œæ¨å¹¿ BaaSã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä»‡ä¸ƒäº”å®ç°ä¼ä¸šçº§ KYC æµç¨‹è‡ªåŠ¨åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è–„ä¸ƒå…­ç ”ç©¶å¤šæ¨¡æ€æƒ…æ„Ÿåˆ†æï¼Œç”¨äºå®¢æœè´¨æ£€ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è°¯ä¸ƒä¸ƒæ˜¯ SD-WAN äº§å“ç»ç†ï¼Œèšç„¦æµ·å¤–ä¸“çº¿ä¼˜åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å·«ä¸ƒå…«è´Ÿè´£ Kafka to Pulsar è¿ç§»æ–¹æ¡ˆã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¡‘ä¸ƒä¹åœ¨ DAG å¼•æ“ä¼˜åŒ– CPS æµæ°´çº¿ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é‚¬å…«åç ”ç©¶ç«¯ä¾§ LLM è’¸é¦å‹ç¼©ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è‡§å…«ä¸€æ˜¯ä¸‰ç»´é‡å»ºç®—æ³•å·¥ç¨‹å¸ˆï¼ŒæœåŠ¡æ–‡åšæ•°å­—åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç¦¾å…«äºŒä¸“æ”» S3 å…¼å®¹å¯¹è±¡å­˜å‚¨ç½‘å…³ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;åŸå…«ä¸‰å‚ä¸å¯ä¿¡æ‰§è¡Œç¯å¢ƒ TEE æ–¹æ¡ˆè½åœ°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ·¦å…«å››æ˜¯å·¥ä¸šäº’è”ç½‘å®‰å…¨è§„åˆ’é¡¾é—®ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç»ƒå…«äº”å®ç° GPU å¤šç§Ÿæˆ· QoS è°ƒåº¦å™¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç¦¹å…«å…­å…³æ³¨è·¨å¢ƒåˆè§„è¦æ±‚ï¼Œç²¾é€š GDPRã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å»‰å…«ä¸ƒæ˜¯ SDN æ§åˆ¶å™¨å¼€æºè´¡çŒ®è€…ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;äº“å…«å…«ä¸“æ³¨é«˜å¹¶å‘é•¿è¿æ¥ç½‘å…³ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å®—å…«ä¹æ‰“é€ é›¶ä»£ç æœºå™¨å­¦ä¹ å¹³å°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å…¬å†¶ä¹åç ”ç©¶ PIM å­˜å†…è®¡ç®—æ¶æ„ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;çº¢ä¹ä¸€æ˜¯ MESH ç½‘ç»œæ€§èƒ½è°ƒä¼˜ä¸“å®¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;çœ­ä¹äºŒè‡´åŠ›äº AI åˆæˆéŸ³é¢‘ç‰ˆæƒæ£€æµ‹ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç±³ä¹ä¸‰æ¨åŠ¨ç¢³æ’æ”¾æ•°æ®å¹³å°å»ºè®¾ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éš—ä¹å››æ˜¯æœºå™¨äººè¿åŠ¨è§„åˆ’ç®—æ³•ä¸“å®¶ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ‹‰ä¹äº”ç ”ç©¶è¯­ä¹‰åˆ†å‰²åœ¨é¥æ„Ÿå›¾åƒçš„åº”ç”¨ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è”ºä¹å…­è´Ÿè´£ 0-RTT QUIC åè®®ä¼˜åŒ–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è‡§ä¹ä¸ƒä¸“æ³¨ BERT åœ¨æ³•å¾‹æ–‡æœ¬çš„ç»†ç²’åº¦å®ä½“æŠ½å–ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ˜ä¹å…«æ˜¯ RPG æ¸¸æˆ AI NPC è¡Œä¸ºæ ‘ä½œè€…ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;è´ä¹ä¹ç ”ç©¶å·®åˆ†éšç§åœ¨å¹¿å‘Šæ•°æ®çš„å®è·µã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ–½ä¸€ç™¾ä¸»å¯¼äº‘åŸç”Ÿ API å®‰å…¨ç›‘æ§å¹³å°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¼ä¸€é›¶ä¸€ä¼˜åŒ– Kafka Connect å¤§è§„æ¨¡åŒæ­¥ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å µä¸€é›¶äºŒç ”ç©¶è½¦è¾† V2X åè®®æ ˆå®ç°ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;èä¸€é›¶ä¸‰èšç„¦ A/B å†³ç­–å¹³å°å¯è§†åŒ–ã€‚&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    dim = <span class="built_in">len</span>(embed(<span class="string">&quot;ç»´åº¦æ¢æµ‹&quot;</span>))      <span class="comment"># åŠ¨æ€æ¢æµ‹å‘é‡ç»´åº¦</span></span><br><span class="line">    create_index(dim)</span><br><span class="line">    bulk_upload(docs)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;[âˆš] åˆå§‹åŒ–å®Œæˆï¼ˆå‘é‡ç»´åº¦ <span class="subst">&#123;dim&#125;</span>ï¼‰ã€‚å¼€å§‹æé—®ï¼ŒCtrl+C é€€å‡ºã€‚\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            q = <span class="built_in">input</span>(<span class="string">&quot;Q: &quot;</span>).strip()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> q:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            passages = search(q)</span><br><span class="line">            context  = <span class="string">&quot;\n&quot;</span>.join(<span class="string">f&quot;èµ„æ–™<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>ï¼š<span class="subst">&#123;p&#125;</span>&quot;</span> <span class="keyword">for</span> i, p <span class="keyword">in</span> <span class="built_in">enumerate</span>(passages))</span><br><span class="line">            prompt   = (<span class="string">f&quot;å·²çŸ¥èµ„æ–™å¦‚ä¸‹ï¼š\n<span class="subst">&#123;context&#125;</span>\n\nè¯·æ ¹æ®ä»¥ä¸Šèµ„æ–™å›ç­”ç”¨æˆ·é—®é¢˜ï¼š<span class="subst">&#123;q&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\nA:&quot;</span>, chat(prompt))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å¼•ç”¨:&quot;</span>, passages, <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\nBye!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><blockquote>
<p><strong>EasySearch Ã— Ollama</strong> è®©æˆ‘ä»¬åœ¨æœ¬åœ°å°±èƒ½ä½“éªŒåˆ°â€œRAG çš„çˆ½ç‚¹â€ï¼šæ£€ç´¢å¸¦æ¥å®æ—¶ã€å¯ä¿¡çš„ä¸Šä¸‹æ–‡ï¼Œå¤§æ¨¡å‹è´Ÿè´£è‡ªç„¶è¯­è¨€è¡¨è¾¾ï¼ŒäºŒè€…åˆä½“å³æ˜¯ä¸€ä¸ªå¯äº¤ä»˜çš„â€œä¼ä¸šç§æœ‰çŸ¥è¯†åŠ©æ‰‹â€ã€‚å¦‚æœä½ ä¹Ÿæƒ³åœ¨å†…ç½‘å¿«é€ŸéªŒè¯ PoCï¼Œè¿™ä»½è„šæœ¬æ‹·è¿‡å»æ”¹ä¸¤ä¸ªåœ°å€å³å¯å¼€è·‘ã€‚ç¥ç©å¾—å¼€å¿ƒï¼</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.734Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">12 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1869ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../easysearch-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%92%8C%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%EF%BC%9Ainfini-console-%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D/">Easysearch æ•°æ®å¯è§†åŒ–å’Œç®¡ç†å¹³å°ï¼šINFINI Console ä½¿ç”¨ä»‹ç»</a></p><div class="content"><p>éšç€æ•°æ®åˆ†æéœ€æ±‚çš„ä¸æ–­å¢é•¿ï¼Œé«˜æ•ˆæŸ¥è¯¢å’Œåˆ†æå¤§æ•°æ®é›†å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚Easysearch ä½œä¸ºä¸€ç§å¼ºå¤§çš„å›½äº§åŒ–æœç´¢å’Œåˆ†æå¼•æ“ï¼ŒåŒæ—¶ä½œä¸º Elasticsearch å›½äº§æ›¿ä»£æ–¹æ¡ˆï¼Œæ”¯æŒåŸç”Ÿ DSL æŸ¥è¯¢è¯­æ³•å’Œ SQL æŸ¥è¯¢ï¼Œç¡®ä¿åŸä¸šåŠ¡ä»£ç æ— éœ€è°ƒæ•´å³å¯æ— ç¼è¿ç§»ã€‚Easysearch å…¼å®¹ ES 7.x ç°æœ‰çš„ SDK å’Œç´¢å¼•å­˜å‚¨æ ¼å¼ï¼Œæ”¯æŒå†·çƒ­æ¶æ„å’Œç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä¸ºç”¨æˆ·æä¾›äº†å…¨é¢çš„æ•°æ®å¤„ç†è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ ES 7.x Python SDK ä¸ Easysearch è¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬å®‰è£…ã€è¿æ¥ã€æ•°æ®æ“ä½œå’ŒæŸ¥è¯¢ç­‰æ–¹é¢ã€‚</p>
<h2 id="1-å®‰è£…-Elasticsearch-Python-å®¢æˆ·ç«¯"><a href="#1-å®‰è£…-Elasticsearch-Python-å®¢æˆ·ç«¯" class="headerlink" title="1. å®‰è£… Elasticsearch Python å®¢æˆ·ç«¯"></a>1. å®‰è£… Elasticsearch Python å®¢æˆ·ç«¯</h2><p>è¦ä½¿ç”¨ Elasticsearch Python å®¢æˆ·ç«¯ï¼Œé¦–å…ˆéœ€è¦é€šè¿‡<code>pip</code>è¿›è¡Œå®‰è£…ã€‚æ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ï¼Œå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install elasticsearch==7.13.1</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½¿ç”¨é»˜è®¤ç‰ˆæœ¬å®‰è£…ï¼Œä¼šå®‰è£… 8.x çš„ä¾èµ–ï¼Œå¯èƒ½ä¼šæŠ¥é”™ <code>elasticsearch.UnsupportedProductError: The client noticed that the server is not Elasticsearch and we do not support this unknown product.</code></p>
<p>ç”±äº Elasticsearch 7.10.2 ä»¥åå˜æ›´äº†è®¸å¯æ¨¡å¼ï¼Œå¼•å…¥äº† Server Side Public License (SSPL) å’Œ Elastic Licenseï¼Œå¾ˆå¤šåŸºäº Elasticsearch 7.10.2 åˆ†æ”¯å‡ºæ¥çš„æœç´¢å¼•æ“éœ€è¦ä½¿ç”¨ 7.x ç‰ˆæœ¬çš„ SDK å’Œ agentï¼Œæ¯”å¦‚ Beats å…¨å®¶æ¡¶ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/direct/c6a4f8799be34a8498aa6b11c43b7788.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿™æ˜¯ä¸€ä¸ªè·å–é›†ç¾¤ä¿¡æ¯çš„ demoï¼Œä½¿ç”¨<code>es.cluster.health()</code> è°ƒç”¨ Elasticsearch é›†ç¾¤çš„å¥åº·æ£€æŸ¥ APIï¼Œè¿”å›é›†ç¾¤çš„å¥åº·çŠ¶æ€ã€‚</p>
<p>ç”±äºä½¿ç”¨äº†è‡ªç­¾åè¯ä¹¦ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ–æ—¶åŠ ä¸Š <code>verify_certs=False</code> å‚æ•°ï¼ŒåŒæ—¶ä½¿ç”¨ <code>warnings.filterwarnings(&quot;ignore&quot;)</code> è®¾ç½® Python çš„è­¦å‘Šç³»ç»Ÿï¼Œå¿½ç•¥æ‰€æœ‰å‘å‡ºçš„è­¦å‘Šã€‚è¿™åœ¨ç”Ÿäº§ä»£ç ä¸­é€šå¸¸ä¸æ¨èï¼Œå› ä¸ºå®ƒä¼šéšè—æ½œåœ¨çš„é—®é¢˜ï¼Œä½†åœ¨å¼€å‘æˆ–æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå¦‚æœè­¦å‘Šä¿¡æ¯å¤ªå¤šå¹²æ‰°è°ƒè¯•ï¼Œå¯èƒ½ä¼šæš‚æ—¶ä½¿ç”¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">import</span> elasticsearch</span><br><span class="line"><span class="keyword">from</span> elasticsearch <span class="keyword">import</span> Elasticsearch</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦ç”¨æ‰€æœ‰è­¦å‘Š</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(elasticsearch.VERSION)</span><br><span class="line"><span class="comment"># ç¦ç”¨è­¦å‘Š</span></span><br><span class="line">urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://ip:9200/&quot;</span></span><br><span class="line">user_passwd = (<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;passwd&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹è¿æ¥</span></span><br><span class="line">es = Elasticsearch(</span><br><span class="line">    [url],</span><br><span class="line">    http_auth=user_passwd,</span><br><span class="line">    verify_certs=<span class="literal">False</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥é›†ç¾¤å¥åº·çŠ¶æ€</span></span><br><span class="line">health = es.cluster.health()</span><br><span class="line">pprint(health)</span><br></pre></td></tr></table></figure>

<h2 id="2-å‡†å¤‡ç¤ºä¾‹æ•°æ®"><a href="#2-å‡†å¤‡ç¤ºä¾‹æ•°æ®" class="headerlink" title="2. å‡†å¤‡ç¤ºä¾‹æ•°æ®"></a>2. å‡†å¤‡ç¤ºä¾‹æ•°æ®</h2><p>åœ¨è¿›è¡ŒæŸ¥è¯¢ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Easysearch ä¸­åˆ›å»ºä¸€äº›ç¤ºä¾‹æ•°æ®ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ç¤ºä¾‹æ•°æ®</span></span><br><span class="line">sample_data = [</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;value1&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">10</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;value2&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;value3&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">30</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;bulk_value1&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">100</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;bulk_value2&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">200</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;bulk_value3&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">300</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¹é‡æ’å…¥ç¤ºä¾‹æ•°æ®</span></span><br><span class="line">response = es.bulk(body=sample_data)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>

<h2 id="3-ä½¿ç”¨-REST-API-è¿›è¡ŒæŸ¥è¯¢"><a href="#3-ä½¿ç”¨-REST-API-è¿›è¡ŒæŸ¥è¯¢" class="headerlink" title="3. ä½¿ç”¨ REST API è¿›è¡ŒæŸ¥è¯¢"></a>3. ä½¿ç”¨ REST API è¿›è¡ŒæŸ¥è¯¢</h2><p>REST API æ˜¯ä¸ Easysearch è¿›è¡Œé€šä¿¡çš„å¸¸ç”¨æ–¹å¼ã€‚é€šè¿‡ REST APIï¼Œå¼€å‘è€…å¯ä»¥å‘é€ HTTP è¯·æ±‚æ¥æ‰§è¡Œå„ç§æ“ä½œï¼ŒåŒ…æ‹¬ç´¢å¼•æ–‡æ¡£ã€æœç´¢æ•°æ®ç­‰ã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ Python ä¸­æ‰§è¡Œ REST æŸ¥è¯¢ã€‚</p>
<p>ç”±äºæ˜¯ REST APIï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ Postman è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/direct/1379de6b582147e6862b04574d6fc58b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° HTTP ç«¯ç‚¹å¯ä»¥æ­£å¸¸è¿”å›ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ç¼–ç¨‹æ–¹å¼è¿›è¡Œè®¿é—®äº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.auth <span class="keyword">import</span> HTTPBasicAuth</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://ip:9200/&quot;</span></span><br><span class="line">user_passwd = (<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;passwd&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºæŸ¥è¯¢å‚æ•°</span></span><br><span class="line">query = &#123;</span><br><span class="line">    <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;field&quot;</span>: <span class="string">&quot;value1&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dsl = <span class="string">f&quot;<span class="subst">&#123;url&#125;</span>/my_index/_search&quot;</span></span><br><span class="line"></span><br><span class="line">response = requests.get(dsl, json=query, auth=HTTPBasicAuth(*user_passwd), verify=<span class="literal">False</span>)</span><br><span class="line">pprint(response.json())</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤„ç†æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    results = response.json()</span><br><span class="line">    <span class="keyword">for</span> hit <span class="keyword">in</span> results[<span class="string">&#x27;hits&#x27;</span>][<span class="string">&#x27;hits&#x27;</span>]:</span><br><span class="line">        <span class="built_in">print</span>(hit)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="4-é€šè¿‡-DSL-å¯¹ç´¢å¼•æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥"><a href="#4-é€šè¿‡-DSL-å¯¹ç´¢å¼•æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥" class="headerlink" title="4. é€šè¿‡ DSL å¯¹ç´¢å¼•æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥"></a>4. é€šè¿‡ DSL å¯¹ç´¢å¼•æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥</h2><p>DSLï¼ˆDomain-Specific Languageï¼‰æ˜¯ Easysearch çš„åŸç”ŸæŸ¥è¯¢è¯­è¨€ï¼Œå…è®¸ç”¨æˆ·æ„å»ºå¤æ‚çš„æŸ¥è¯¢ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ„å»º DSL æŸ¥è¯¢</span></span><br><span class="line">dsl_query = &#123;</span><br><span class="line">    <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;field&quot;</span>: <span class="string">&quot;value1&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œ DSL æŸ¥è¯¢</span></span><br><span class="line">response = es.search(index=<span class="string">&quot;my_index&quot;</span>, body=dsl_query)</span><br><span class="line"></span><br><span class="line">results = response.get(<span class="string">&quot;hits&quot;</span>)</span><br><span class="line"><span class="comment"># å¤„ç†æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"><span class="keyword">if</span> results:</span><br><span class="line">    <span class="keyword">for</span> hit <span class="keyword">in</span> results[<span class="string">&#x27;hits&#x27;</span>]:</span><br><span class="line">        <span class="built_in">print</span>(hit)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p>å¦‚æœä¸æŒ‡å®š document IDï¼Œé‚£ä¹ˆéšæœºç”Ÿæˆä¸€ä¸ª ID å¹¶å†™å…¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">doc = &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;value4&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">9999</span>&#125;</span><br><span class="line">response = es.index(index=<span class="string">&quot;my_index&quot;</span>, body=doc)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>

<h3 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h3><p>æŒ‡å®š ID ä¸º 1 æ¥æ‰‹åŠ¨æ›´æ–°ç´¢å¼•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">doc = &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;value4&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">9999</span>&#125;</span><br><span class="line">response = es.index(index=<span class="string">&quot;my_index&quot;</span>, body=doc, <span class="built_in">id</span>=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>

<h3 id="æ›´æ–°å•æ¡æ•°æ®"><a href="#æ›´æ–°å•æ¡æ•°æ®" class="headerlink" title="æ›´æ–°å•æ¡æ•°æ®"></a>æ›´æ–°å•æ¡æ•°æ®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°å•æ¡æ•°æ®</span></span><br><span class="line">update_body = &#123;<span class="string">&quot;doc&quot;</span>: &#123;<span class="string">&quot;another_field&quot;</span>: <span class="number">50</span>&#125;&#125;</span><br><span class="line">response = es.update(index=<span class="string">&quot;my_index&quot;</span>, <span class="built_in">id</span>=<span class="string">&quot;1&quot;</span>, body=update_body)</span><br><span class="line">pprint(response)</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤å•æ¡æ•°æ®</span></span><br><span class="line">response = es.delete(index=<span class="string">&quot;my_index&quot;</span>, <span class="built_in">id</span>=<span class="string">&quot;1&quot;</span>)</span><br><span class="line">pprint(response)</span><br></pre></td></tr></table></figure>

<h2 id="5-ç´¢å¼•æ•°æ®-SQL-æŸ¥è¯¢"><a href="#5-ç´¢å¼•æ•°æ®-SQL-æŸ¥è¯¢" class="headerlink" title="5. ç´¢å¼•æ•°æ® SQL æŸ¥è¯¢"></a>5. ç´¢å¼•æ•°æ® SQL æŸ¥è¯¢</h2><p>åˆ›å»ºå®¢æˆ·ç«¯å®ä¾‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>sql</code> æ–¹æ³•æ‰§è¡Œ SQL æŸ¥è¯¢ã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•æ‰§è¡Œä¸€ä¸ªç®€å•çš„ SELECT æŸ¥è¯¢ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰§è¡Œ SQL æŸ¥è¯¢</span></span><br><span class="line">query_sql = &#123;</span><br><span class="line">    <span class="string">&quot;query&quot;</span>: <span class="string">&quot;SELECT * FROM my_index&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">res = es.sql.query(body=query_sql)</span><br><span class="line">pprint(res)</span><br></pre></td></tr></table></figure>

<h2 id="6-ç´¢å¼•æ•°æ®æ‰¹é‡æ“ä½œ"><a href="#6-ç´¢å¼•æ•°æ®æ‰¹é‡æ“ä½œ" class="headerlink" title="6. ç´¢å¼•æ•°æ®æ‰¹é‡æ“ä½œ"></a>6. ç´¢å¼•æ•°æ®æ‰¹é‡æ“ä½œ</h2><p>Bulk API å…è®¸ç”¨æˆ·ä¸€æ¬¡æ€§å¯¹å¤šä¸ªæ–‡æ¡£è¿›è¡Œåˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤æ“ä½œï¼Œæå¤§æé«˜äº†æ“ä½œæ•ˆç‡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p>
<h3 id="æ‰¹é‡æ’å…¥æ•°æ®"><a href="#æ‰¹é‡æ’å…¥æ•°æ®" class="headerlink" title="æ‰¹é‡æ’å…¥æ•°æ®"></a>æ‰¹é‡æ’å…¥æ•°æ®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰æ‰¹é‡æ’å…¥æ•°æ®</span></span><br><span class="line">bulk_data = [</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;bulk_value1&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">100</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;bulk_value2&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">200</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;index&quot;</span>: &#123;<span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;field&quot;</span>: <span class="string">&quot;bulk_value3&quot;</span>, <span class="string">&quot;another_field&quot;</span>: <span class="number">300</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œæ‰¹é‡æ’å…¥æ“ä½œ</span></span><br><span class="line">response = es.bulk(body=bulk_data)</span><br><span class="line">pprint(response)</span><br></pre></td></tr></table></figure>

<h3 id="æ‰¹é‡æ›´æ–°æ•°æ®"><a href="#æ‰¹é‡æ›´æ–°æ•°æ®" class="headerlink" title="æ‰¹é‡æ›´æ–°æ•°æ®"></a>æ‰¹é‡æ›´æ–°æ•°æ®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰æ‰¹é‡æ›´æ–°æ•°æ®</span></span><br><span class="line">bulk_update_data = [</span><br><span class="line">    &#123;<span class="string">&quot;update&quot;</span>: &#123;<span class="string">&quot;_id&quot;</span>: <span class="string">&quot;1&quot;</span>, <span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;doc&quot;</span>: &#123;<span class="string">&quot;another_field&quot;</span>: <span class="number">110</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;update&quot;</span>: &#123;<span class="string">&quot;_id&quot;</span>: <span class="string">&quot;2&quot;</span>, <span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;doc&quot;</span>: &#123;<span class="string">&quot;another_field&quot;</span>: <span class="number">220</span>&#125;&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œæ‰¹é‡æ›´æ–°æ“ä½œ</span></span><br><span class="line">response = es.bulk(body=bulk_update_data)</span><br><span class="line">pprint(response)</span><br></pre></td></tr></table></figure>

<h3 id="æ‰¹é‡åˆ é™¤æ•°æ®"><a href="#æ‰¹é‡åˆ é™¤æ•°æ®" class="headerlink" title="æ‰¹é‡åˆ é™¤æ•°æ®"></a>æ‰¹é‡åˆ é™¤æ•°æ®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰æ‰¹é‡åˆ é™¤æ•°æ®</span></span><br><span class="line">bulk_delete_data = [</span><br><span class="line">    &#123;<span class="string">&quot;delete&quot;</span>: &#123;<span class="string">&quot;_id&quot;</span>: <span class="string">&quot;1&quot;</span>, <span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;delete&quot;</span>: &#123;<span class="string">&quot;_id&quot;</span>: <span class="string">&quot;2&quot;</span>, <span class="string">&quot;_index&quot;</span>: <span class="string">&quot;my_index&quot;</span>&#125;&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œæ‰¹é‡åˆ é™¤æ“ä½œ</span></span><br><span class="line">response = es.bulk(body=bulk_delete_data)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>

<h2 id="7-ç´¢å¼•çº§åˆ«çš„æ“ä½œ"><a href="#7-ç´¢å¼•çº§åˆ«çš„æ“ä½œ" class="headerlink" title="7. ç´¢å¼•çº§åˆ«çš„æ“ä½œ"></a>7. ç´¢å¼•çº§åˆ«çš„æ“ä½œ</h2><p>æ¥ä¸‹æ¥ï¼Œä»‹ç»ç´¢å¼•åˆ›å»ºã€åˆ é™¤å’Œæ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨æ“ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p>
<h3 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç´¢å¼•</span></span><br><span class="line">index_body = &#123;</span><br><span class="line">    <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;number_of_shards&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;number_of_replicas&quot;</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;field&quot;</span>: &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>&#125;,</span><br><span class="line">            <span class="string">&quot;another_field&quot;</span>: &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span>&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">response = es.indices.create(index=<span class="string">&quot;new_index&quot;</span>, body=index_body)</span><br><span class="line">pprint(response)</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤ç´¢å¼•"><a href="#åˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ é™¤ç´¢å¼•"></a>åˆ é™¤ç´¢å¼•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤ç´¢å¼•</span></span><br><span class="line">response = es.indices.delete(index=<span class="string">&quot;new_index&quot;</span>)</span><br><span class="line">pprint(response)</span><br></pre></td></tr></table></figure>

<h3 id="æ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨"><a href="#æ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨"></a>æ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">response = es.indices.exists(index=<span class="string">&quot;new_index&quot;</span>)</span><br><span class="line">pprint(response)</span><br></pre></td></tr></table></figure>

<h2 id="8-æ€»ç»“"><a href="#8-æ€»ç»“" class="headerlink" title="8. æ€»ç»“"></a>8. æ€»ç»“</h2><p>Easysearch è™½ç„¶æ²¡æœ‰ä¸“é—¨çš„ Python SDKï¼Œä½†å®Œå…¨å…¼å®¹ ES 7.x çš„ Python SDK å®¢æˆ·ç«¯ï¼Œè¿™ä¸ºå¼€å‘è€…æä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚é€šè¿‡ä½¿ç”¨ ES 7.x Python SDKï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾åœ°ä½¿ç”¨ DSL å’Œ SQL è¯­æ³•å¯¹ Easysearch è¿›è¡ŒæŸ¥è¯¢å’Œæ•°æ®æ“ä½œã€‚Easysearch ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p>
<ol>
<li>å…¼å®¹æ€§å¼ºï¼šæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ï¼Œå³å¯ä» ES è¿ç§»åˆ° Easysearchã€‚</li>
<li>åŠŸèƒ½å…¨é¢ï¼šæ”¯æŒ DSL æŸ¥è¯¢ã€SQL æŸ¥è¯¢ã€æ‰¹é‡æ“ä½œç­‰é«˜çº§åŠŸèƒ½ã€‚</li>
<li>æ˜“äºä½¿ç”¨ï¼šæä¾›ç®€æ´æ˜äº†çš„ APIï¼Œé™ä½å­¦ä¹ æˆæœ¬ã€‚</li>
<li>é«˜æ•ˆæ€§èƒ½ï¼šæ‰¹é‡æ“ä½œ API å¤§å¹…æé«˜æ•°æ®å¤„ç†æ•ˆç‡ã€‚</li>
</ol>
<p>Easysearch ç»“åˆ ES 7.x Python SDK çš„å¼ºå¤§åŠŸèƒ½ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªé«˜æ•ˆã€çµæ´»çš„å¤§æ•°æ®å¤„ç†å¹³å°ã€‚æ— è®ºæ˜¯æ‰§è¡Œç®€å•çš„ SQL æŸ¥è¯¢ï¼Œè¿˜æ˜¯æ„å»ºå¤æ‚çš„ DSL æŸ¥è¯¢ï¼Œéƒ½èƒ½æ»¡è¶³å„ç§æ•°æ®åˆ†æéœ€æ±‚ã€‚å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªå¼ºå¤§çš„æœç´¢å’Œåˆ†æè§£å†³æ–¹æ¡ˆï¼ŒEasysearch ç»å¯¹å€¼å¾—ä¸€è¯•ã€‚å®ƒä¸ä»…èƒ½å¸®åŠ©æ‚¨æ›´é«˜æ•ˆåœ°å¤„ç†å’Œåˆ†æå¤§æ•°æ®é›†ï¼Œè¿˜èƒ½ä¸ºæ•°æ®é©±åŠ¨çš„å†³ç­–æä¾›æœ‰åŠ›æ”¯æŒã€‚</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.734Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">21 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦3198ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../easysearch%E3%80%81elasticsearch%E3%80%81amazon-opensearch-%E5%BF%AB%E7%85%A7%E5%85%BC%E5%AE%B9%E5%AF%B9%E6%AF%94/">Easysearchã€Elasticsearchã€Amazon OpenSearch å¿«ç…§å…¼å®¹å¯¹æ¯”</a></p><div class="content"><p>åœ¨å½“ä»Šçš„æ•°æ®é©±åŠ¨æ—¶ä»£ï¼Œæœç´¢å¼•æ“çš„å¿«ç…§åŠŸèƒ½åœ¨æ•°æ®ä¿æŠ¤å’Œç¾éš¾æ¢å¤ä¸­è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†å¯¹ Easysearchã€Elasticsearch å’Œ Amazon OpenSearch çš„å¿«ç…§å…¼å®¹æ€§è¿›è¡Œæ¯”è¾ƒï¼Œåˆ†æå®ƒä»¬åœ¨å¿«ç…§åˆ›å»ºã€æ¢å¤ã€å­˜å‚¨æ ¼å¼å’Œè·¨å¹³å°å…¼å®¹æ€§ç­‰æ–¹é¢çš„ç‰¹ç‚¹ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£è¿™äº›æœç´¢å¼•æ“çš„å·®å¼‚ï¼Œä»è€Œé€‰æ‹©æœ€é€‚åˆè‡ªå·±éœ€æ±‚çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="å¯åŠ¨é›†ç¾¤"><a href="#å¯åŠ¨é›†ç¾¤" class="headerlink" title="å¯åŠ¨é›†ç¾¤"></a>å¯åŠ¨é›†ç¾¤</h2><h3 id="Easysearch"><a href="#Easysearch" class="headerlink" title="Easysearch"></a>Easysearch</h3><p>æœåŠ¡å™¨ä¸€èˆ¬æƒ…å†µä¸‹é»˜è®¤å‚æ•°éƒ½æ˜¯å¾ˆä½çš„ï¼Œè€Œ Easysearch&#x2F;Elasticsearch æ˜¯å†…å­˜å¤§æˆ·ï¼Œæ‰€ä»¥å°±éœ€è¦è¿›è¡Œç³»ç»Ÿè°ƒä¼˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w vm.max_map_count=262144</span><br></pre></td></tr></table></figure>

<p><code>vm.max_map_count</code> æ˜¯ä¸€ä¸ª Linux å†…æ ¸å‚æ•°ï¼Œç”¨äºæ§åˆ¶å•ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰çš„æœ€å¤§å†…å­˜æ˜ å°„åŒºåŸŸï¼ˆVMAï¼ŒVirtual Memory Areasï¼‰çš„æ•°é‡ã€‚å†…å­˜æ˜ å°„åŒºåŸŸæ˜¯æŒ‡é€šè¿‡å†…å­˜æ˜ å°„æ–‡ä»¶æˆ–åŒ¿åå†…å­˜æ˜ å°„åˆ›å»ºçš„è™šæ‹Ÿå†…å­˜åŒºåŸŸã€‚</p>
<p>è¿™ä¸ªå‚æ•°åœ¨ä¸€äº›åº”ç”¨ç¨‹åºä¸­éå¸¸é‡è¦ï¼Œå°¤å…¶æ˜¯é‚£äº›éœ€è¦å¤§é‡å†…å­˜æ˜ å°„çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ Elasticsearchã€‚Elasticsearch ä½¿ç”¨å†…å­˜æ˜ å°„æ–‡ä»¶æ¥ç´¢å¼•å’Œæœç´¢æ•°æ®ï¼Œè¿™å¯èƒ½éœ€è¦å¤§é‡çš„å†…å­˜æ˜ å°„åŒºåŸŸã€‚å¦‚æœ <code>vm.max_map_count</code> è®¾ç½®å¾—å¤ªä½ï¼ŒElasticsearch å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå¹¶ä¼šå‡ºç°é”™è¯¯ä¿¡æ¯ã€‚</p>
<p>è°ƒæ•´ <code>vm.max_map_count</code> å‚æ•°çš„ä¸€äº›å¸¸è§åŸå› ï¼š</p>
<ol>
<li><p><strong>æ”¯æŒå¤§å‹æ•°æ®é›†</strong>ï¼š<br>åº”ç”¨ç¨‹åºï¼ˆå¦‚ Elasticsearchï¼‰åœ¨å¤„ç†å¤§å‹æ•°æ®é›†æ—¶å¯èƒ½éœ€è¦å¤§é‡å†…å­˜æ˜ å°„åŒºåŸŸã€‚å¢åŠ  <code>vm.max_map_count</code> å¯ä»¥ç¡®ä¿è¿™äº›åº”ç”¨ç¨‹åºæœ‰è¶³å¤Ÿçš„å†…å­˜æ˜ å°„åŒºåŸŸæ¥å¤„ç†æ•°æ®ã€‚</p>
</li>
<li><p><strong>é˜²æ­¢å†…å­˜é”™è¯¯</strong>ï¼š<br>å¦‚æœ <code>vm.max_map_count</code> è®¾ç½®å¾—å¤ªä½ï¼Œå½“åº”ç”¨ç¨‹åºå°è¯•åˆ›å»ºè¶…è¿‡é™åˆ¶çš„å†…å­˜æ˜ å°„æ—¶ï¼Œä¼šå‡ºç°é”™è¯¯ï¼Œå¯¼è‡´åº”ç”¨ç¨‹åºå´©æºƒæˆ–æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p>
</li>
<li><p><strong>ä¼˜åŒ–æ€§èƒ½</strong>ï¼š<br>é€‚å½“åœ°è®¾ç½® <code>vm.max_map_count</code> å¯ä»¥ä¼˜åŒ–åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œç¡®ä¿å†…å­˜æ˜ å°„æ“ä½œé¡ºåˆ©è¿›è¡Œã€‚</p>
</li>
</ol>
<p>æ£€æŸ¥å½“å‰çš„ <code>vm.max_map_count</code> å€¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl vm.max_map_count</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…æŸ¥çœ‹ <code>/proc/sys/vm/max_map_count</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/sys/vm/max_map_count</span><br></pre></td></tr></table></figure>

<p>Elasticsearch å®˜æ–¹å»ºè®®å°† <code>vm.max_map_count</code> è®¾ç½®ä¸ºè‡³å°‘ 262144ã€‚å¯¹äºå…¶ä»–åº”ç”¨ç¨‹åºã€‚</p>
<p>Easysearch å…·ä½“å®‰è£…æ­¥éª¤è§<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_38781498/article/details/140077785">INFINI Easysearch å°é²œ Hands on
</a></p>
<h3 id="Amazon-OpenSearch"><a href="#Amazon-OpenSearch" class="headerlink" title="Amazon OpenSearch"></a>Amazon OpenSearch</h3><p>ä½¿ç”¨ Amazon Web Services æ§åˆ¶å°è¿›è¡Œåˆ›å»ºã€‚</p>
<h3 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h3><p>ä½¿ç”¨å¦‚ä¸‹ docker compose éƒ¨ç½²ä¸€ä¸ªä¸‰èŠ‚ç‚¹çš„ ES é›†ç¾¤ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;2.2&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">es01:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">docker.elastic.co/elasticsearch/elasticsearch:7.10.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">es01</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">node.name=es01</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">cluster.name=es-docker-cluster</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">discovery.seed_hosts=es02,es03</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">cluster.initial_master_nodes=es01,es02,es03</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">bootstrap.memory_lock=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">data01:/usr/share/elasticsearch/data</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">9200</span><span class="string">:9200</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">elastic</span></span><br><span class="line">  <span class="attr">es02:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">docker.elastic.co/elasticsearch/elasticsearch:7.10.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">es02</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">node.name=es02</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">cluster.name=es-docker-cluster</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">discovery.seed_hosts=es01,es03</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">cluster.initial_master_nodes=es01,es02,es03</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">bootstrap.memory_lock=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">data02:/usr/share/elasticsearch/data</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">elastic</span></span><br><span class="line">  <span class="attr">es03:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">docker.elastic.co/elasticsearch/elasticsearch:7.10.2</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">es03</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">node.name=es03</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">cluster.name=es-docker-cluster</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">discovery.seed_hosts=es01,es02</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">cluster.initial_master_nodes=es01,es02,es03</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">bootstrap.memory_lock=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">data03:/usr/share/elasticsearch/data</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">elastic</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">data01:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">data02:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">data03:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">elastic:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br></pre></td></tr></table></figure>

<p>ç”±äºè¿™ä¸ª docker compose æ²¡æœ‰å…³äº kibana çš„é…ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯ç”¨ Console æ·»åŠ åŸç”Ÿçš„ Elasticsearch é›†ç¾¤<img src="https://i-blog.csdnimg.cn/direct/edc37c2feb794c4d8d06ba9a7d8bd190.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p>
<p>é›†ç¾¤ä¿¡æ¯</p>
<p><img src="https://i-blog.csdnimg.cn/direct/b814ba386e294a9f81c3375c0669f59c.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p>
<h2 id="å¿«ç…§è¿˜åŸçš„æ­¥éª¤"><a href="#å¿«ç…§è¿˜åŸçš„æ­¥éª¤" class="headerlink" title="å¿«ç…§è¿˜åŸçš„æ­¥éª¤"></a>å¿«ç…§è¿˜åŸçš„æ­¥éª¤</h2><h3 id="å¿«ç…§å‰çš„å‡†å¤‡"><a href="#å¿«ç…§å‰çš„å‡†å¤‡" class="headerlink" title="å¿«ç…§å‰çš„å‡†å¤‡"></a>å¿«ç…§å‰çš„å‡†å¤‡</h3><h3 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h3><p>æœ¬æ¬¡æµ‹è¯•é€‰æ‹©æŠŠç´¢å¼•å¿«ç…§å¤‡ä»½åˆ° Amazon S3ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ S3 repository pluginï¼Œè¿™ä¸ªæ’ä»¶æ·»åŠ äº†å¯¹ä½¿ç”¨ Amazon S3 ä½œä¸ºå¿«ç…§&#x2F;æ¢å¤å­˜å‚¨åº“çš„æ”¯æŒã€‚</p>
<p>Easysearch å’Œ OpenSearch é›†ç¾¤è‡ªå¸¦äº†è¿™ä¸ªæ’ä»¶ï¼Œæ‰€ä»¥æ— éœ€é¢å¤–å®‰è£…ã€‚</p>
<p>å¯¹äºè‡ªå·±éƒ¨ç½²çš„ä¸‰èŠ‚ç‚¹ Elasticsearch åˆ™éœ€è¦è¿›å…¥æ¯ä¸€ä¸ªèŠ‚ç‚¹è¿è¡Œå®‰è£…å‘½ä»¤ç„¶åå†é‡å¯é›†ç¾¤ï¼Œå»ºè®®ä½¿ç”¨è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·æ¥åšè¿™æ­¥ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> bin/elasticsearch-plugin install repository-s3</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸å†éœ€è¦è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥è¿™æ ·åˆ é™¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> bin/elasticsearch-plugin remove repository-s3</span><br></pre></td></tr></table></figure>

<p>ç”±äºéœ€è¦å’Œ Amazon Web Services æ‰“äº¤é“ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½® IAM å‡­è¯ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥ä» EC2 IAM instance profileï¼ŒECS task role ä»¥åŠ EKS çš„ Service account è¯»å–ç›¸åº”çš„å‡­è¯ã€‚</p>
<p>å¯¹äºæ‰˜ç®¡çš„ Amazon OpenSearch æ¥è¯´ï¼Œæˆ‘ä»¬æ— æ³•åœ¨æ‰˜ç®¡çš„ EC2 ä¸Šç»‘å®šæˆ‘ä»¬çš„å‡­è¯ï¼Œæ‰€ä»¥éœ€è¦æ–°å»ºä¸€ä¸ª OpenSearchSnapshotRoleï¼Œç„¶åé€šè¿‡å½“å‰çš„ç”¨æˆ·æŠŠè¿™ä¸ªè§’è‰²ä¼ é€’ç»™æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ IAM:PassRoleã€‚</p>
<p>åˆ›å»º OpenSearchSnapshotRoleï¼Œç­–ç•¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;Version&quot;</span>: <span class="string">&quot;2012-10-17&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Statement&quot;</span>: [&#123;</span><br><span class="line">      <span class="string">&quot;Action&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;s3:ListBucket&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;Effect&quot;</span>: <span class="string">&quot;Allow&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Resource&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;arn:aws:s3:::bucket-name&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;Action&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;s3:GetObject&quot;</span>,</span><br><span class="line">        <span class="string">&quot;s3:PutObject&quot;</span>,</span><br><span class="line">        <span class="string">&quot;s3:DeleteObject&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;Effect&quot;</span>: <span class="string">&quot;Allow&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Resource&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;arn:aws:s3:::bucket-name/*&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿¡ä»»å…³ç³»å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2012-10-17&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Principal&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Service&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es.amazonaws.com&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sts:AssumeRole&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨æˆ‘ä»¬çš„ IAM user ä¸ŠåŠ ä¸Š PassRole çš„æƒé™ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ OpenSearchSnapshotRole ä¼ é€’ç»™ OpenSearch é›†ç¾¤ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2012-10-17&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iam:PassRole&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:iam::123456789012:role/OpenSearchSnapshotRole&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ³¨å†Œå­˜å‚¨åº“"><a href="#æ³¨å†Œå­˜å‚¨åº“" class="headerlink" title="æ³¨å†Œå­˜å‚¨åº“"></a>æ³¨å†Œå­˜å‚¨åº“</h3><p>åœ¨æºé›†ç¾¤æ‰§è¡Œæ³¨å†Œ</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PUT /_snapshot/snapshot-repo-name</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;bucket-name&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;base_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;bucket-prefix&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="punctuation">&#125;</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ç›®æ ‡é›†ç¾¤åŒæ ·æ‰§è¡Œè¿™ä¸ªè¯­å¥ï¼Œä¸ºäº†é˜²æ­¢è¦†ç›–æºé›†ç¾¤å­˜å‚¨åº“çš„æ•°æ®ï¼Œå°† â€œreadonlyâ€: true æ·»åŠ åˆ°â€settingsâ€ PUT è¯·æ±‚ä¸­ï¼Œè¿™æ ·å°±åªæœ‰ä¸€ä¸ªé›†ç¾¤å…·æœ‰å¯¹å­˜å‚¨åº“çš„å†™å…¥æƒé™ã€‚</p>
<p>å¦‚æœ Bucket åœ¨ä¸­å›½åŒºï¼Œé‚£ä¹ˆè¿˜éœ€è¦åŠ ä¸Š<strong>endpoint: <a target="_blank" rel="noopener" href="https://s3/">https://s3</a>.&lt; region &gt;.amazonaws.com.cn</strong>è¿™æ ·çš„å‚æ•°ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PUT /_snapshot/snapshot-repo-name</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;bucket-name&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;base_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;bucket-prefix&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;readonly&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">   <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å¯¹äº OpenSearch æ¥è¯´ï¼Œè¿˜éœ€è¦æ‰§è¡Œ passroleï¼Œæ‰€ä»¥è¿˜éœ€è¦æ·»åŠ <strong>role_arn</strong>è¿™ä¸ªå­—æ®µï¼Œç”±äº IAM:PassRole éœ€è¦å¯¹ HTTP è¯·æ±‚åš signV4 æ—¥ç­¾åï¼Œæ‰€ä»¥è¿™éƒ¨å¸¸å¸¸ä½¿ç”¨ Postman æ¥å®Œæˆã€‚æŠŠè§’è‰²ä¼ é€’è¿‡å»ä¹‹åï¼Œæ¥ä¸‹æ¥çš„å¿«ç…§è¿˜åŸæ“ä½œå°±å¯ä»¥åœ¨ OpenSearch Dashboard ä¸­è¿›è¡Œæ“ä½œäº†ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/direct/0db4d578214d47d483d1f15cde3f848e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œéœ€è¦åœ¨ auth è¿™é‡Œè¾“å…¥ AccessKeyï¼ŒSecretKeyï¼ŒAWS Regionï¼ŒService Nameï¼ˆesï¼‰æ¥åš SignV4 çš„ç­¾åã€‚<br><img src="https://i-blog.csdnimg.cn/direct/26d8ee62236a4c97a498419328746bfc.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¯·æ±‚ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;bucket-name&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;base_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;bucket-prefix&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;readonly&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;role_arn&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:iam::123456789012:role/OpenSearchSnapshotRole&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><ul>
<li><strong>æŸ¥çœ‹æ‰€æœ‰æ³¨å†Œçš„å­˜å‚¨åº“</strong>ï¼š<ul>
<li><code>GET _snapshot</code>ï¼šè¿™ä¸ªå‘½ä»¤è¿”å›æ‰€æœ‰å·²æ³¨å†Œçš„å¿«ç…§å­˜å‚¨åº“åˆ—è¡¨åŠå…¶åŸºæœ¬ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET _snapshot</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;es_repository&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your-s3-bucket-name&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your-s3-bucket-region&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æŸ¥çœ‹ç‰¹å®šå­˜å‚¨åº“çš„è¯¦ç»†ä¿¡æ¯</strong>ï¼š<br><code>GET _snapshot/es_repository</code>ï¼šè¿™ä¸ªå‘½ä»¤è¿”å›åä¸º<code>es_repository</code>çš„å­˜å‚¨åº“çš„è¯¦ç»†é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­˜å‚¨æ¡¶åç§°ã€åŒºåŸŸå’Œå…¶ä»–è®¾ç½®ã€‚</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET _snapshot/es_repository</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;es_repository&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your-s3-bucket-name&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your-s3-bucket-region&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;access_key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your-access-key&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;secret_key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your-secret-key&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æŸ¥çœ‹ç‰¹å®šå­˜å‚¨åº“ä¸­çš„å¿«ç…§</strong>ï¼š<br><code>GET _cat/snapshots/es_repository?v</code>ï¼šè¿™ä¸ªå‘½ä»¤è¿”å›<code>es_repository</code>å­˜å‚¨åº“ä¸­çš„æ‰€æœ‰å¿«ç…§åŠå…¶è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¿«ç…§ IDã€çŠ¶æ€ã€å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€æŒç»­æ—¶é—´ã€åŒ…å«çš„ç´¢å¼•æ•°é‡ã€æˆåŠŸå’Œå¤±è´¥çš„åˆ†ç‰‡æ•°é‡ç­‰ã€‚</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET _cat/snapshots/es_repository?v</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span>                     status start_epoch start_time end_epoch end_time duration indices successful_shards failed_shards total_shards</span><br><span class="line">snapshot_1             SUCCESS 1628884800 08:00:00   1628888400 09:00:00 1h       3       10                0             10</span><br><span class="line">snapshot_2             SUCCESS 1628971200 08:00:00   1628974800 09:00:00 1h       3       10                0             10</span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»ºç´¢å¼•å¿«ç…§"><a href="#åˆ›å»ºç´¢å¼•å¿«ç…§" class="headerlink" title="åˆ›å»ºç´¢å¼•å¿«ç…§"></a>åˆ›å»ºç´¢å¼•å¿«ç…§</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PUT _snapshot/my_repository/&lt;my_snapshot_&#123;now/d&#125;&gt;</span></span><br><span class="line">PUT _snapshot/my_repository/my_snapshot</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;indices&quot;</span>: <span class="string">&quot;my-index,logs-my_app-default&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®å¿«ç…§çš„å¤§å°ä¸åŒï¼Œå®Œæˆå¿«ç…§å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œcreate snapshot API åªä¼šå¼‚æ­¥å¯åŠ¨å¿«ç…§è¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹åœ¨åå°è¿è¡Œã€‚è¦æ›´æ”¹ä¸ºåŒæ­¥è°ƒç”¨ï¼Œå¯ä»¥å°† <code>wait_for_completion</code> æŸ¥è¯¢å‚æ•°è®¾ç½®ä¸º <code>true</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUT _snapshot/my_repository/my_snapshot?wait_for_completion=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>å¦å¤–è¿˜å¯ä»¥ä½¿ç”¨ clone snapshot API å…‹éš†ç°æœ‰çš„å¿«ç…§ã€‚è¦ç›‘æ§å½“å‰æ­£åœ¨è¿è¡Œçš„å¿«ç…§ï¼Œå¯ä»¥ä½¿ç”¨å¸¦æœ‰ <code>_current</code> è¯·æ±‚è·¯å¾„å‚æ•°çš„ get snapshot APIã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET _snapshot/my_repository/_current</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦è·å–å‚ä¸å½“å‰è¿è¡Œå¿«ç…§çš„æ¯ä¸ªåˆ†ç‰‡çš„å®Œæ•´è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ get snapshot status APIã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET _snapshot/_status</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸåˆ›å»ºå¿«ç…§ä¹‹åï¼Œå°±å¯ä»¥åœ¨ S3 ä¸Šçœ‹åˆ°å¤‡ä»½çš„æ•°æ®å—æ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯æ­£ç¡®çš„å¿«ç…§å±‚çº§ç»“æ„ï¼š<br><img src="https://i-blog.csdnimg.cn/direct/5f14fe8a4724434bb821fa649e1ce1c1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ â€œbase_pathâ€: â€œ<bucket-prefix>â€œè¿™é‡Œæœ€å¥½ä¸è¦åŠ &#x2F;ï¼Œè™½ç„¶ä¸å½±å“åŒé›†ç¾¤è¿ç§»ï¼Œè¿™ä¸ªä¼šä¸ºæˆ‘ä»¬åœ¨ä¸åŒå‚å•†çš„æœç´¢å¼•æ“ä¸­è¿ç§»é‡åˆ°é—®é¢˜ï¼Œå¯èƒ½æ˜¯è¿™æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦æ³¨æ„ã€‚<img src="https://i-blog.csdnimg.cn/direct/f07f8927c0724ddc8bd363c1dc13fd64.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°">æ‰€ä»¥åœ¨ Open Search ä¸­è¿˜åŸ Elasticsearch å°±é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root_cause&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_missing_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[easy_repository:2/-jOQ0oucQDGF3hJMNz-vKQ] is missing&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_missing_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[easy_repository:2/-jOQ0oucQDGF3hJMNz-vKQ] is missing&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;caused_by&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;no_such_file_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Blob object [11111/indices/7fv2zAi4Rt203JfsczUrBg/meta-YGnzxZABRBxW-2vqcmci.dat] not found: The specified key does not exist. (Service: S3, Status Code: 404, Request ID: R71DDHX4XXM0434T, Extended Request ID: d9M/HWvPvMFdPhB6KX+wYCW3ZFqeFo9EoscWPkulOXWa+TnovAE5PlemtuVzKXjlC+rrgskXAus=)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">404</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¢å¤ç´¢å¼•å¿«ç…§"><a href="#æ¢å¤ç´¢å¼•å¿«ç…§" class="headerlink" title="æ¢å¤ç´¢å¼•å¿«ç…§"></a>æ¢å¤ç´¢å¼•å¿«ç…§</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">POST _snapshot/my_repository/my_snapshot_2099.05.06/_restore</span><br><span class="line">&#123;</span><br><span class="line">  &quot;indices&quot;: &quot;my-index,logs-my_app-default&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å„ä¸ªé›†ç¾¤çš„è¿˜åŸ"><a href="#å„ä¸ªé›†ç¾¤çš„è¿˜åŸ" class="headerlink" title="å„ä¸ªé›†ç¾¤çš„è¿˜åŸ"></a>å„ä¸ªé›†ç¾¤çš„è¿˜åŸ</h2><ol>
<li><p>Elasticsearch 7.10.2 çš„å¿«ç…§å¯ä»¥è¿˜åŸåˆ° Easysearch å’Œ Amazon OpenSearch</p>
</li>
<li><p>ä» Easysearch 1.8.2 è¿˜åŸåˆ° Elasticsearch 7.10.2 æŠ¥é”™å¦‚ä¸‹ï¼š</p>
</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root_cause&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_restore_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[s3_repository:1/a2qV4NYIReqvgW6BX_nxxw] cannot restore index [my_indexs] because it cannot be upgraded&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_restore_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[s3_repository:1/a2qV4NYIReqvgW6BX_nxxw] cannot restore index [my_indexs] because it cannot be upgraded&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;caused_by&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;illegal_state_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The index [[my_indexs/ALlTCIr0RJqtP06ouQmf0g]] was created with version [1.8.2] but the minimum compatible version is [6.0.0-beta1]. It should be re-indexed in Elasticsearch 6.x before upgrading to 7.10.2.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">500</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä» Amazon OpenSearch 2.1.3 è¿˜åŸåˆ° Elasticsearch 7.10.2 æŠ¥é”™å¦‚ä¸‹ï¼ˆæ— è®ºæ˜¯å¦å¼€å¯å…¼å®¹æ¨¡å¼ï¼‰ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root_cause&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_restore_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[aos:2/D-oyYSscSdCbZFcmPZa_yg] the snapshot was created with Elasticsearch version [36.34.78-beta2] which is higher than the version of this node [7.10.2]&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_restore_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[aos:2/D-oyYSscSdCbZFcmPZa_yg] the snapshot was created with Elasticsearch version [36.34.78-beta2] which is higher than the version of this node [7.10.2]&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">500</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ä» Easysearch 1.8.2 è¿˜åŸåˆ° Amazon OpenSearch2.13 æŠ¥é”™å¦‚ä¸‹ï¼ˆæ— è®ºæ˜¯å¦å¼€å¯å…¼å®¹æ¨¡å¼ï¼‰ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root_cause&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_restore_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[easy_repository:2/LE18AWHlRJu9rpz9BJatUQ] cannot restore index [my_indexs] because it cannot be upgraded&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_restore_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[easy_repository:2/LE18AWHlRJu9rpz9BJatUQ] cannot restore index [my_indexs] because it cannot be upgraded&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;caused_by&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;illegal_state_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The index [[my_indexs/VHOo7yfDTRa48uhQvquFzQ]] was created with version [1.8.2] but the minimum compatible version is OpenSearch 1.0.0 (or Elasticsearch 7.0.0). It should be re-indexed in OpenSearch 1.x (or Elasticsearch 7.x) before upgrading to 2.13.0.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">500</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>Amazon OpenSearch è¿˜åŸåˆ° Easysearch åŒæ ·å¤±è´¥</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root_cause&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_restore_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[aoss:2/D-oyYSscSdCbZFcmPZa_yg] cannot restore index [aos] because it cannot be upgraded&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snapshot_restore_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[aoss:2/D-oyYSscSdCbZFcmPZa_yg] cannot restore index [aos] because it cannot be upgraded&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;caused_by&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;illegal_state_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The index [[aos/864WjTAXQCaxJ829V5ktaw]] was created with version [36.34.78-beta2] but the minimum compatible version is [6.0.0]. It should be re-indexed in Easysearch 6.x before upgrading to 1.8.2.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">500</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>Elasticsearch8.14.3 è¿ç§»åˆ° Amazon OpenSearch æˆ–è€… Elasticsearch éƒ½æ˜¯æœ‰è¿™ä¸ªæŠ¥é”™ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root_cause&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;parsing_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Failed to parse object: unknown field [uuid] found&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;col&quot;</span><span class="punctuation">:</span> <span class="number">25</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;repository_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[snap] Unexpected exception when loading repository data&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;caused_by&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;parsing_exception&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Failed to parse object: unknown field [uuid] found&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;col&quot;</span><span class="punctuation">:</span> <span class="number">25</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">500</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ç”±äº Elasticsearch8 åœ¨åˆ›å»ºå¿«ç…§çš„æ—¶å€™ä¼šé»˜è®¤åŠ ä¸Šä¸€ä¸ª UUID çš„å­—æ®µï¼Œæ‰€ä»¥æˆ‘ä»¬ä½ç‰ˆæœ¬çš„ Easysearchã€Amazon OpenSearch ä¸­ä¼šæ‰¾ä¸åˆ°è¿™ä¸ªå­—æ®µï¼Œåœ¨æ‰§è¡Œ<code>GET _cat/snapshots/snap?v</code>çš„æ—¶å€™å°±æŠ¥é”™ï¼ŒåŠæ—¶åœ¨æ³¨å†Œå­˜å‚¨åº“çš„æ—¶å€™æ˜¾ç¤ºåŠ ä¸Š UUID çš„å­—æ®µä¹Ÿæ— äº‹æ— è¡¥ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;snapshot-repo-name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;uuid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;qlJ0uqErRmW6aww2Fyt4Fg&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;bucket-name&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;base_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;bucket-prefix&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯å…¼å®¹æ€§å¯¹æ¯”ï¼Œæ¯è¡Œç¬¬ä¸€åˆ—ä»£è¡¨æºé›†ç¾¤ï¼Œç¬¬ä¸€è¡Œä»£è¡¨ç›®æ ‡é›†ç¾¤ï¼š</p>
<table>
<thead>
<tr>
<th>å¿«ç…§å…¼å®¹å¯¹æ¯”</th>
<th>Easysearch 1.8.2</th>
<th>Elasticsearch 7.10.2</th>
<th>OpenSearch 2.13</th>
</tr>
</thead>
<tbody><tr>
<td>Easysearch 1.8.2</td>
<td>å…¼å®¹</td>
<td><strong>ä¸å…¼å®¹</strong></td>
<td><strong>ä¸å…¼å®¹</strong></td>
</tr>
<tr>
<td>Elasticsearch 7.10.2</td>
<td>å…¼å®¹</td>
<td>å…¼å®¹</td>
<td>å…¼å®¹</td>
</tr>
<tr>
<td>OpenSearch 2.13</td>
<td><strong>ä¸å…¼å®¹</strong></td>
<td><strong>ä¸å…¼å®¹</strong></td>
<td>å…¼å®¹</td>
</tr>
</tbody></table>
<p>Elasticsearch çš„å…¼å®¹åˆ—è¡¨å®˜æ–¹çš„åˆ—è¡¨å¦‚ä¸‹ï¼š<br><img src="https://i-blog.csdnimg.cn/direct/42760eba986a4605a15256c0b9264b1c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>å¼€å§‹ä½¿ç”¨ Elastic Stack å’Œ Docker Composeï¼šç¬¬ 1 éƒ¨åˆ†<br><a target="_blank" rel="noopener" href="https://www.elastic.co/cn/blog/getting-started-with-the-elastic-stack-and-docker-compose">https://www.elastic.co/cn/blog/getting-started-with-the-elastic-stack-and-docker-compose</a></p>
<p>Docker Compose éƒ¨ç½²å¤šèŠ‚ç‚¹ Elasticsearch</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/docker.html#docker-compose-file">https://www.elastic.co/guide/en/elasticsearch/reference/7.10/docker.html#docker-compose-file</a></p>
<p>repository-s3 æ•™ç¨‹</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/8.14/repository-s3.html">https://www.elastic.co/guide/en/elasticsearch/reference/8.14/repository-s3.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/repository-s3.html">https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/repository-s3.html</a></p>
<p>snapshot-restore</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/snapshot-restore.html">https://www.elastic.co/guide/en/elasticsearch/reference/7.10/snapshot-restore.html</a></p>
<p>åœ¨äºšé©¬é€Š OpenSearch æœåŠ¡ä¸­åˆ›å»ºç´¢å¼•å¿«ç…§</p>
<p><a target="_blank" rel="noopener" href="https://docs.amazonaws.cn/zh_cn/opensearch-service/latest/developerguide/managedomains-snapshots.html#managedomains-snapshot-restore">https://docs.amazonaws.cn/zh_cn/opensearch-service/latest/developerguide/managedomains-snapshots.html#managedomains-snapshot-restore</a></p>
<p>æ•™ç¨‹ï¼šè¿ç§»è‡³ Amazon OpenSearch Service</p>
<p><a target="_blank" rel="noopener" href="https://docs.amazonaws.cn/zh_cn/opensearch-service/latest/developerguide/migration.html">https://docs.amazonaws.cn/zh_cn/opensearch-service/latest/developerguide/migration.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.734Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">5 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦738ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../%E6%8E%A8%E8%8D%90%E7%BB%99-easysearch-%E6%96%B0%E7%94%A8%E6%88%B7%E7%9A%84%E5%87%A0%E4%B8%AA-elasticsearch-%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/">æ¨èç»™ Easysearch æ–°ç”¨æˆ·çš„å‡ ä¸ª Elasticsearch å¯è§†åŒ–å·¥å…·</a></p><div class="content"><p>Easysearch ä½œä¸ºå›½äº§åŒ–çš„ Elasticsearchï¼ˆESï¼‰æ›¿ä»£æ–¹æ¡ˆï¼Œå…¼å®¹ Elasticsearch ç”Ÿæ€ç³»ç»Ÿä¸­çš„å¤šç§å·¥å…·ã€‚æœ¬æ–‡å°†ä»‹ç»å‡ æ¬¾é€‚åˆ Easysearch ç”¨æˆ·çš„å¯è§†åŒ–å·¥å…·ï¼Œå¸®åŠ©æ‚¨æ›´é«˜æ•ˆåœ°ç®¡ç†å’ŒæŸ¥è¯¢æ•°æ®ã€‚</p>
<h3 id="1-Elasticsearch-Head-æ’ä»¶"><a href="#1-Elasticsearch-Head-æ’ä»¶" class="headerlink" title="1. Elasticsearch Head æ’ä»¶"></a>1. Elasticsearch Head æ’ä»¶</h3><p>åœ¨ ES åŸ¹è®­ç»å¸¸æåˆ°çš„ Elasticsearch Head æ˜¯ä¸€æ¬¾åŸºäºæµè§ˆå™¨çš„æ’ä»¶ï¼Œé€‚åˆä¸æƒ³éƒ¨ç½² Kibana ç­‰å¤æ‚å·¥å…·çš„ç”¨æˆ·ã€‚å®ƒæä¾›äº†ç®€æ´çš„ç•Œé¢ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ã€ç´¢å¼•åˆ†å¸ƒã€åˆ†ç‰‡ä¿¡æ¯ç­‰ã€‚</p>
<h4 id="ä¸»è¦åŠŸèƒ½ï¼š"><a href="#ä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="ä¸»è¦åŠŸèƒ½ï¼š"></a>ä¸»è¦åŠŸèƒ½ï¼š</h4><ul>
<li><p><strong>ç´¢å¼•åˆ†å¸ƒæŸ¥çœ‹</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/3b97af37be16f5933582b9ff59cc1f0e.png" alt="image-20250220212800529"></p>
</li>
<li><p><strong>ç´¢å¼•è¯¦ç»†ä¿¡æ¯</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/48457d48ecd03439f8c5e5fdf522df28.png" alt="image-20250220214716206"></p>
</li>
<li><p><strong>åˆ†ç‰‡ä¿¡æ¯æŸ¥çœ‹</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/2b0dbf3a2b97198d122ba8b3f40e8662.png" alt="image-20250220214729464"></p>
</li>
<li><p><strong>DSL æŸ¥è¯¢</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/fb96526276868690ff0c01af4207f6ca.png"></p>
</li>
</ul>
<h3 id="2-Elasticvue-æ’ä»¶"><a href="#2-Elasticvue-æ’ä»¶" class="headerlink" title="2. Elasticvue æ’ä»¶"></a>2. Elasticvue æ’ä»¶</h3><p>Elasticvue æ˜¯ä¸€æ¬¾é«˜è¯„åˆ†ã€é«˜é¢œå€¼çš„ Chrome æ’ä»¶ï¼ŒåŠŸèƒ½å…¨é¢ï¼Œé€‚åˆéœ€è¦æ›´ä¸°å¯ŒåŠŸèƒ½çš„ç”¨æˆ·ã€‚</p>
<h4 id="ä¸»è¦åŠŸèƒ½ï¼š-1"><a href="#ä¸»è¦åŠŸèƒ½ï¼š-1" class="headerlink" title="ä¸»è¦åŠŸèƒ½ï¼š"></a>ä¸»è¦åŠŸèƒ½ï¼š</h4><ul>
<li><p><strong>èŠ‚ç‚¹ä¿¡æ¯æŸ¥çœ‹</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/1fe678284f16178ec42847dcfd6f3857.png"></p>
</li>
<li><p><strong>ç´¢å¼•æŸ¥çœ‹</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/1fe678284f16178ec42847dcfd6f3857.png" alt="image-20250220214619935"></p>
</li>
<li><p><strong>DSL æŸ¥è¯¢</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/26f4d54f74c49a8c624a9c0b5a5937b8.png" alt="image-20250220214557277"></p>
</li>
<li><p><strong>å¿«ç…§å­˜å‚¨åº“ç®¡ç†</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/6375e74b0e378bd8f7af75f9f9b4dc03.png" alt="image-20250220214520263"></p>
</li>
</ul>
<h3 id="3-Cerebro"><a href="#3-Cerebro" class="headerlink" title="3. Cerebro"></a>3. Cerebro</h3><p>Cerebro æ˜¯ä¸€æ¬¾éœ€è¦è‡ªè¡Œéƒ¨ç½²çš„å·¥å…·ï¼Œå»ºè®®ä½¿ç”¨ Docker è¿›è¡Œå®‰è£…ã€‚ä¸ºäº†é¿å…ç«¯å£å†²çªå’Œ TLS è®¤è¯é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡ Gateway è¿›è¡Œè½¬å‘ã€‚</p>
<h4 id="éƒ¨ç½²æ­¥éª¤ï¼š"><a href="#éƒ¨ç½²æ­¥éª¤ï¼š" class="headerlink" title="éƒ¨ç½²æ­¥éª¤ï¼š"></a>éƒ¨ç½²æ­¥éª¤ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 9100:9000 lmenezes/cerebro</span><br></pre></td></tr></table></figure>

<h4 id="ä¸»è¦åŠŸèƒ½ï¼š-2"><a href="#ä¸»è¦åŠŸèƒ½ï¼š-2" class="headerlink" title="ä¸»è¦åŠŸèƒ½ï¼š"></a>ä¸»è¦åŠŸèƒ½ï¼š</h4><ul>
<li><p><strong>é›†ç¾¤ç®¡ç†</strong><br><img src="https://i-blog.csdnimg.cn/img_convert/c4684c2805620db2baa822137df95b00.png" alt="image-20250220214359979"></p>
</li>
<li><p><strong>ç½‘ç»œè¯·æ±‚å¤„ç†</strong><br>Cerebro æœ‰è‡ªå·±çš„åç«¯æœåŠ¡ï¼Œè¯·æ±‚å¹¶éç›´æ¥ä»æµè§ˆå™¨å‘å‡ºã€‚å› æ­¤ï¼Œå¯åŠ¨ Docker å®¹å™¨æ—¶ï¼Œé¿å…è¿æ¥ <code>localhost</code>ï¼Œä»¥å…è¿›å…¥å®¹å™¨å†…éƒ¨ã€‚<br><img src="https://i-blog.csdnimg.cn/img_convert/1690bffb19a0cfeb124742d3ac18dd9b.png" alt="image-20250220213719116"></p>
</li>
</ul>
<p>æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/direct/9cbda99b13ef4d84827e69e7c3043a68.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å¯è§†åŒ–åŠŸèƒ½ä¸€è§ˆï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/165c89bef5d1d63f8a9e7ae63534f609.png" alt="image-20250220215239365"></p>
<h3 id="4-è®¤è¯ä¸å®‰å…¨"><a href="#4-è®¤è¯ä¸å®‰å…¨" class="headerlink" title="4. è®¤è¯ä¸å®‰å…¨"></a>4. è®¤è¯ä¸å®‰å…¨</h3><p>å¯¹äºéœ€è¦å¯†ç è®¤è¯çš„è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li><p><strong>ç›´æ¥è¿æ¥</strong>ï¼š<br><code>https://admin:xxxxx@localhost:9200/</code></p>
</li>
<li><p><strong>Base64 ç¼–ç å‡­è¯</strong>ï¼š<br>å¯ä»¥ä½¿ç”¨ Postman æˆ–å…¶ä»–å·¥å…·ç”Ÿæˆ Base64 ç¼–ç çš„å‡­è¯ï¼Œå¹¶åœ¨è¯·æ±‚å¤´ä¸­ä¼ é€’ã€‚</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://localhost:9200&quot;</span></span><br><span class="line">payload = <span class="string">&quot;&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">  <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Basic YWRtaW46NzllYTM4MzMwMmM2OGZiYWM0MDc=&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.request(<span class="string">&quot;GET&quot;</span>, url, headers=headers, data=payload)</span><br><span class="line"><span class="built_in">print</span>(response.text)</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä»¥ä¸Šå·¥å…·å„æœ‰ç‰¹è‰²ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚æ— è®ºæ˜¯ç®€å•çš„æµè§ˆå™¨æ’ä»¶ï¼Œè¿˜æ˜¯åŠŸèƒ½æ›´å¼ºå¤§çš„ Cerebroï¼Œéƒ½èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç®¡ç†å’ŒæŸ¥è¯¢ Easysearch é›†ç¾¤ã€‚</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.734Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">5 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦683ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../%E4%BD%BF%E7%94%A8-infini-console-%E9%85%8D%E7%BD%AE%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7-webhook-%E9%80%9A%E7%9F%A5%E6%8C%87%E5%8D%97/">ä½¿ç”¨ INFINI Console é…ç½®é›†ç¾¤ç›‘æ§ Webhook é€šçŸ¥æŒ‡å—</a></p><div class="content"><p>åœ¨é›†ç¾¤ç®¡ç†ä¸­ï¼Œç›‘æ§å…³é”®æŒ‡æ ‡å¦‚ CPUã€å†…å­˜ã€ç£ç›˜ã€JVM ç­‰æ˜¯è‡³å…³é‡è¦çš„ã€‚å¯¹äº Easysearch åŠ ES ç”Ÿæ€ç³»ç»Ÿï¼Œè¿˜éœ€è¦å…³æ³¨é›†ç¾¤æœ¬èº«çš„æŒ‡æ ‡ï¼Œä¾‹å¦‚æœç´¢å»¶è¿Ÿã€é›†ç¾¤çŠ¶æ€ã€èŠ‚ç‚¹ç§»é™¤ç­‰ã€‚INFINI Console ä¸ä»…æä¾›äº†é»˜è®¤çš„ç›‘æ§æŒ‡æ ‡ï¼Œè¿˜æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ç›‘æ§é¡¹ã€‚å½“ç›‘æ§æ•°å€¼è¾¾åˆ°é¢„è®¾é˜ˆå€¼æ—¶ï¼Œç³»ç»Ÿå¯ä»¥é€šè¿‡ Webhook å‘é€é€šçŸ¥è‡³ Slackã€é£ä¹¦ç­‰å¹³å°ã€‚</p>
<h2 id="ç›‘æ§é…ç½®æµç¨‹"><a href="#ç›‘æ§é…ç½®æµç¨‹" class="headerlink" title="ç›‘æ§é…ç½®æµç¨‹"></a>ç›‘æ§é…ç½®æµç¨‹</h2><h3 id="1-å‘Šè­¦å¯¹è±¡ä¸é€šçŸ¥æ¸ é“è®¾ç½®"><a href="#1-å‘Šè­¦å¯¹è±¡ä¸é€šçŸ¥æ¸ é“è®¾ç½®" class="headerlink" title="1. å‘Šè­¦å¯¹è±¡ä¸é€šçŸ¥æ¸ é“è®¾ç½®"></a>1. å‘Šè­¦å¯¹è±¡ä¸é€šçŸ¥æ¸ é“è®¾ç½®</h3><p>åœ¨ INFINI Console ä¸­ï¼Œé¦–å…ˆéœ€è¦é…ç½®ç›‘æ§å¯¹è±¡å’Œé€šçŸ¥æ¸ é“ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/538575c336afcb2dc23ccf58f640e79b.png" alt="å‘Šè­¦å¯¹è±¡ä¸é€šçŸ¥æ¸ é“è®¾ç½®"></p>
<h3 id="2-å‘Šè­¦ä¸­å¿ƒç®¡ç†"><a href="#2-å‘Šè­¦ä¸­å¿ƒç®¡ç†" class="headerlink" title="2. å‘Šè­¦ä¸­å¿ƒç®¡ç†"></a>2. å‘Šè­¦ä¸­å¿ƒç®¡ç†</h3><p>é€šè¿‡å‘Šè­¦ä¸­å¿ƒå¯ä»¥é›†ä¸­ç®¡ç†æ‰€æœ‰ç›‘æ§å‘Šè­¦ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/5567b0c6d58cea73cd5c65f6762f8719.png" alt="å‘Šè­¦ä¸­å¿ƒ"></p>
<h3 id="3-å‘Šè­¦è¯¦æƒ…æŸ¥çœ‹"><a href="#3-å‘Šè­¦è¯¦æƒ…æŸ¥çœ‹" class="headerlink" title="3. å‘Šè­¦è¯¦æƒ…æŸ¥çœ‹"></a>3. å‘Šè­¦è¯¦æƒ…æŸ¥çœ‹</h3><p>æ¯ä¸ªå‘Šè­¦äº‹ä»¶éƒ½æä¾›è¯¦ç»†ä¿¡æ¯æŸ¥çœ‹åŠŸèƒ½ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/261d152fe8bdabd58d7a0612214381b3.png" alt="å‘Šè­¦è¯¦æƒ…"></p>
<h3 id="4-å‘Šè­¦å†å²è®°å½•"><a href="#4-å‘Šè­¦å†å²è®°å½•" class="headerlink" title="4. å‘Šè­¦å†å²è®°å½•"></a>4. å‘Šè­¦å†å²è®°å½•</h3><p>ç³»ç»Ÿå®Œæ•´è®°å½•æ‰€æœ‰å†å²å‘Šè­¦ä¿¡æ¯ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/96c0420bdb598598ffefb67de36b5fd5.png" alt="å‘Šè­¦å†å²"></p>
<h2 id="Webhook-å®ç°ç¤ºä¾‹"><a href="#Webhook-å®ç°ç¤ºä¾‹" class="headerlink" title="Webhook å®ç°ç¤ºä¾‹"></a>Webhook å®ç°ç¤ºä¾‹</h2><p>ä»¥ä¸‹æ˜¯ç”¨ Python å®ç°çš„ Webhook æ¥æ”¶æœåŠ¡ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, jsonify</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/webhook&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">webhook</span>():</span><br><span class="line">    <span class="comment"># è·å–å¹¶å¤„ç†è¯·æ±‚æ•°æ®</span></span><br><span class="line">    raw_data = request.data</span><br><span class="line">    decoded_data = raw_data.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    data = json.loads(decoded_data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ‰“å°æ¥æ”¶åˆ°çš„æ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Received data:&quot;</span>)</span><br><span class="line">    pprint(data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿”å›å“åº”</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Webhook received&quot;</span></span><br><span class="line">    &#125;), <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">8000</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Webhook-é…ç½®æ­¥éª¤"><a href="#Webhook-é…ç½®æ­¥éª¤" class="headerlink" title="Webhook é…ç½®æ­¥éª¤"></a>Webhook é…ç½®æ­¥éª¤</h2><ol>
<li>åœ¨ Console ä¸­æ·»åŠ  Webhook é…ç½®ï¼š</li>
</ol>
<p><img src="https://i-blog.csdnimg.cn/img_convert/d958ec2c9b1d388d118133b343f10cf4.png" alt="Webhooké…ç½®"></p>
<ol start="2">
<li>æŸ¥çœ‹æ•è·çš„å‘Šè­¦ä¿¡æ¯ï¼š</li>
</ol>
<p><img src="https://i-blog.csdnimg.cn/img_convert/a3b8fb1254294fdd8ffa43b68a7bb96c.png" alt="å‘Šè­¦æ•è·"></p>
<h2 id="é£ä¹¦-Webhook-é›†æˆ"><a href="#é£ä¹¦-Webhook-é›†æˆ" class="headerlink" title="é£ä¹¦ Webhook é›†æˆ"></a>é£ä¹¦ Webhook é›†æˆ</h2><h3 id="1-åˆ›å»ºé£ä¹¦ç¾¤ç»„"><a href="#1-åˆ›å»ºé£ä¹¦ç¾¤ç»„" class="headerlink" title="1. åˆ›å»ºé£ä¹¦ç¾¤ç»„"></a>1. åˆ›å»ºé£ä¹¦ç¾¤ç»„</h3><p>åœ¨é£ä¹¦å®¢æˆ·ç«¯åˆ›å»ºæ–°çš„ç¾¤ç»„ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/5b1d540e964f56fc6e21d1d792fcbdb9.png" alt="åˆ›å»ºç¾¤ç»„"></p>
<h3 id="2-æ·»åŠ è‡ªå®šä¹‰æœºå™¨äºº"><a href="#2-æ·»åŠ è‡ªå®šä¹‰æœºå™¨äºº" class="headerlink" title="2. æ·»åŠ è‡ªå®šä¹‰æœºå™¨äºº"></a>2. æ·»åŠ è‡ªå®šä¹‰æœºå™¨äºº</h3><p>é€‰æ‹©æ·»åŠ è‡ªå®šä¹‰æœºå™¨äººï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/e4ec3a7ad1a2954b79bc91269ef3638e.png" alt="æ·»åŠ æœºå™¨äºº"></p>
<h3 id="3-é…ç½®æœºå™¨äººä¿¡æ¯"><a href="#3-é…ç½®æœºå™¨äººä¿¡æ¯" class="headerlink" title="3. é…ç½®æœºå™¨äººä¿¡æ¯"></a>3. é…ç½®æœºå™¨äººä¿¡æ¯</h3><p>è®¾ç½®æœºå™¨äººåç§°å’Œæè¿°ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/8368a27cc85bbfd67b03281b6066532b.png" alt="æœºå™¨äººé…ç½®"></p>
<h3 id="4-è·å–-Webhook-URL"><a href="#4-è·å–-Webhook-URL" class="headerlink" title="4. è·å– Webhook URL"></a>4. è·å– Webhook URL</h3><p>å®Œæˆé…ç½®åè·å– Webhook åœ°å€ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/5616ce87b3732646bd71d51c3a5554d7.png" alt="Webhook URL"></p>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œå³å¯å®ç°é›†ç¾¤ç›‘æ§å‘Šè­¦çš„å®æ—¶é€šçŸ¥ï¼Œç¡®ä¿ç³»ç»Ÿè¿ç»´äººå‘˜èƒ½å¤ŸåŠæ—¶å“åº”å„ç§å¼‚å¸¸æƒ…å†µã€‚</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.734Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">36 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦5411ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../macbook-pro%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BAeasysearch%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83/">Macbook Proå¿«é€Ÿæ­å»ºEasysearchå­¦ä¹ ç¯å¢ƒ</a></p><div class="content"><p>åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶èº«è¾¹æ²¡æœ‰å¯ç”¨çš„æœåŠ¡å™¨ï¼Œè¿™æ—¶å°±éœ€è¦å€ŸåŠ©è‡ªå·±çš„ Mac æ¥å®‰è£…å’Œå­¦ä¹  Easysearchã€‚ç„¶è€Œï¼ŒEasysearch å®˜ç½‘å¹¶æœªæä¾› Mac ç‰ˆæœ¬çš„å®‰è£…æ•™ç¨‹ï¼Œä¸‹é¢æˆ‘å°†è¯¦ç»†æ•´ç†æˆ‘åœ¨ Mac ä¸Šå®‰è£…å’Œä½¿ç”¨ Easysearch çš„æŠ˜è…¾ç»å†ã€‚<img src="https://i-blog.csdnimg.cn/direct/e549bc7f2a41481e8c7a49817bf9d76d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="Easysearch"><a href="#Easysearch" class="headerlink" title="Easysearch"></a>Easysearch</h3><p>Easysearch çš„è¿è¡Œä¾èµ–äº Javaï¼Œç¨‹åºå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ä»å½“å‰ç›®å½•çš„ JDK ä¸­æŸ¥æ‰¾ Java ç¯å¢ƒã€‚å› æ­¤ï¼Œå³ä¾¿ç¯å¢ƒå˜é‡ä¸­å·²ç»é…ç½®äº† Javaï¼Œç¨‹åºä¹Ÿå¯èƒ½æ— æ³•æ‰¾åˆ°ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š<br>ä¸‹è½½ JDK çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå°†å…¶é‡å‘½åä¸º â€œjdkâ€ï¼Œå¹¶æ”¾ç½®åœ¨ Easysearch çš„æ ¹ç›®å½•ä¸‹ã€‚<br>ä¸‹è½½ Easysearch çš„ bundle åŒ…ï¼Œè¯¥åŒ…ä¼šè‡ªå¸¦ä¸€ä¸ª JDKã€‚ä¸‹è½½é“¾æ¥ä¸ºï¼š<a target="_blank" rel="noopener" href="https://release.infinilabs.com/Easysearch/stable/bundle/">https://release.infinilabs.com/Easysearch/stable/bundle/</a><br>å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼šé¦–å…ˆæ‰§è¡Œåˆå§‹åŒ–è„šæœ¬ï¼Œæ­¤è„šæœ¬ä¼šè®¾ç½® TLS è¯ä¹¦å’Œé›†ç¾¤å¯†ç ã€‚åœ¨æ‰§è¡Œè„šæœ¬ä¹‹å‰ï¼Œlog ç›®å½•ä¸ºç©ºã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">bin/initialize.sh</span><br><span class="line"></span><br><span class="line">                                 @@@@@@@@@@@</span><br><span class="line">                                @@@@@@@@@@@@</span><br><span class="line">                                @@@@@@@@@@@@</span><br><span class="line">                               @@@@@@@@@&amp;@@@</span><br><span class="line">                              <span class="comment">#@@@@@@@@@@@@@</span></span><br><span class="line">        @@@                   @@@@@@@@@@@@@</span><br><span class="line">       &amp;@@@@@@@              &amp;@@@@@@@@@@@@@</span><br><span class="line">       @&amp;@@@@@@@&amp;@           @@@&amp;@@@@@@@&amp;@</span><br><span class="line">      @@@@@@@@@@@@@@@@      @@@@@@@@@@@@@@</span><br><span class="line">      @@@@@@@@@@@@@@@@@@&amp;   @@@@@@@@@@@@@</span><br><span class="line">        %@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">            @@@@@@@@@@@@&amp;@@@@@@@@@@@@@@@</span><br><span class="line">    @@         ,@@@@@@@@@@@@@@@@@@@@@@@&amp;</span><br><span class="line">    @@@@@.         @@@@@&amp;@@@@@@@@@@@@@@</span><br><span class="line">   @@@@@@@@@@          @@@@@@@@@@@@@@@#</span><br><span class="line">   @&amp;@@@&amp;@@@&amp;@@@          &amp;@&amp;@@@&amp;@@@&amp;@</span><br><span class="line">  @@@@@@@@@@@@@.              @@@@@@@*</span><br><span class="line">  @@@@@@@@@@@@@                  %@@@</span><br><span class="line"> @@@@@@@@@@@@@</span><br><span class="line">/@@@@@@@&amp;@@@@@</span><br><span class="line">@@@@@@@@@@@@@</span><br><span class="line">@@@@@@@@@@@@@</span><br><span class="line">@@@@@@@@@@@@        Welcome to INFINI Labs!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Now attempting the initializing...</span><br><span class="line"></span><br><span class="line">RISK WARNING: The initialization script will overwrite certificates and passwords. If this is not the first run, please acknowledge the risks before proceeding. This is a dangerous operation. Do you want to proceed? [y/N]:y</span><br><span class="line"></span><br><span class="line">NOTICE: Do you want to <span class="built_in">log</span> credentials to /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/logs/initialize.log? Default is no logging. Press Enter to skip. [y/N]:y</span><br><span class="line">Using bundled JDK at /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/jdk</span><br><span class="line"></span><br><span class="line">Certificate request self-signature ok</span><br><span class="line">subject=C = IN, ST = FI, L = NI, O = ORG, OU = UNIT, CN = infini.cloud</span><br><span class="line">Certificate request self-signature ok</span><br><span class="line">subject=C = IN, ST = FI, L = NI, O = ORG, OU = UNIT, CN = admin.infini.cloud</span><br><span class="line">                DNS:infini.cloud, DNS:*.infini.cloud</span><br><span class="line">                DNS:infini.cloud, DNS:*.infini.cloud</span><br><span class="line"></span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@    NOTICE: Please remember the bootstrap credential <span class="keyword">for</span> further usage    @</span><br><span class="line">@                        admin:db3e19a8c1c9f7755763                        @</span><br><span class="line">@    Usage:  curl -ku admin:db3e19a8c1c9f7755763 https://localhost:9200    @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line"></span><br><span class="line">Your plugins directory is not empty. Please install the plugin manually.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Initialization successful! [Easysearch] is ready to use!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line"><span class="built_in">cd</span> /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle &amp;&amp; bin/Easysearch</span><br><span class="line">----------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   __ _  __ ____ __ _  __ __</span><br><span class="line">  / // |/ // __// // |/ // /</span><br><span class="line"> / // || // _/ / // || // /</span><br><span class="line">/_//_/|_//_/  /_//_/|_//_/</span><br><span class="line"></span><br><span class="line">Â©INFINI.LTD, All Rights Reserved.</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ‰“å°äº†é›†ç¾¤çš„å¯†ç å’Œè¿æ¥ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -ku admin:db3e19a8c1c9f7755763 https://localhost:9200</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯åŠ¨é›†ç¾¤ï¼Œé»˜è®¤ç›‘å¬åœ¨ 9200 ç«¯å£ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">â°xuâ™~/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundleâ±âœ”â‰» bin/Easysearch        (base) 13:50:14</span><br><span class="line">[2025-02-11T13:50:28,686][WARN ][o.e.b.Natives            ] [xudeMacBook-Pro.<span class="built_in">local</span>] unable to load JNA native support library, native methods will be disabled.</span><br><span class="line">java.lang.UnsatisfiedLinkError: /Users/xu/Library/Caches/JNA/temp/jna114104068097844929.tmp: dlopen(/Users/xu/Library/Caches/JNA/temp/jna114104068097844929.tmp, 0x0001): tried: <span class="string">&#x27;/Users/xu/Library/Caches/JNA/temp/jna114104068097844929.tmp&#x27;</span> (fat file, but missing compatible architecture (have <span class="string">&#x27;i386,x86_64&#x27;</span>, need <span class="string">&#x27;arm64e&#x27;</span> or <span class="string">&#x27;arm64&#x27;</span>)), <span class="string">&#x27;/System/Volumes/Preboot/Cryptexes/OS/Users/xu/Library/Caches/JNA/temp/jna114104068097844929.tmp&#x27;</span> (no such file), <span class="string">&#x27;/Users/xu/Library/Caches/JNA/temp/jna114104068097844929.tmp&#x27;</span> (fat file, but missing compatible architecture (have <span class="string">&#x27;i386,x86_64&#x27;</span>, need <span class="string">&#x27;arm64e&#x27;</span> or <span class="string">&#x27;arm64&#x27;</span>))</span><br><span class="line">	at jdk.internal.loader.NativeLibraries.load(Native Method) ~[?:?]</span><br><span class="line">	at jdk.internal.loader.NativeLibraries<span class="variable">$NativeLibraryImpl</span>.open(Unknown Source) ~[?:?]</span><br><span class="line">	at jdk.internal.loader.NativeLibraries.loadLibrary(Unknown Source) ~[?:?]</span><br><span class="line">	at jdk.internal.loader.NativeLibraries.loadLibrary(Unknown Source) ~[?:?]</span><br><span class="line">	at java.lang.ClassLoader.loadLibrary(Unknown Source) ~[?:?]</span><br><span class="line">	at java.lang.Runtime.load0(Unknown Source) ~[?:?]</span><br><span class="line">	at java.lang.System.load(Unknown Source) ~[?:?]</span><br><span class="line">	at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:1018) ~[jna-5.5.0.jar:5.5.0 (b0)]</span><br><span class="line">	at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:988) ~[jna-5.5.0.jar:5.5.0 (b0)]</span><br><span class="line">	at com.sun.jna.Native.&lt;clinit&gt;(Native.java:195) ~[jna-5.5.0.jar:5.5.0 (b0)]</span><br><span class="line">	at java.lang.Class.forName0(Native Method) ~[?:?]</span><br><span class="line">	at java.lang.Class.forName(Unknown Source) ~[?:?]</span><br><span class="line">	at org.Easysearch.bootstrap.Natives.&lt;clinit&gt;(Natives.java:30) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:95) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.bootstrap.Bootstrap.setup(Bootstrap.java:163) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.bootstrap.Bootstrap.init(Bootstrap.java:378) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.bootstrap.Easysearch.init(Easysearch.java:169) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.bootstrap.Easysearch.execute(Easysearch.java:160) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:71) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.cli.Command.mainWithoutErrorHandling(Command.java:112) ~[Easysearch-cli-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.cli.Command.main(Command.java:75) ~[Easysearch-cli-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.bootstrap.Easysearch.main(Easysearch.java:125) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">	at org.Easysearch.bootstrap.Easysearch.main(Easysearch.java:67) ~[Easysearch-1.10.1.jar:1.10.1]</span><br><span class="line">[2025-02-11T13:50:28,689][WARN ][o.e.b.Natives            ] [xudeMacBook-Pro.<span class="built_in">local</span>] cannot check <span class="keyword">if</span> running as root because JNA is not available</span><br><span class="line">[2025-02-11T13:50:28,689][WARN ][o.e.b.Natives            ] [xudeMacBook-Pro.<span class="built_in">local</span>] cannot install system call filter because JNA is not available</span><br><span class="line">[2025-02-11T13:50:28,689][WARN ][o.e.b.Natives            ] [xudeMacBook-Pro.<span class="built_in">local</span>] cannot register console handler because JNA is not available</span><br><span class="line">[2025-02-11T13:50:28,690][WARN ][o.e.b.Natives            ] [xudeMacBook-Pro.<span class="built_in">local</span>] cannot getrlimit RLIMIT_NPROC because JNA is not available</span><br><span class="line">[2025-02-11T13:50:28,690][WARN ][o.e.b.Natives            ] [xudeMacBook-Pro.<span class="built_in">local</span>] cannot getrlimit RLIMIT_AS because JNA is not available</span><br><span class="line">[2025-02-11T13:50:28,690][WARN ][o.e.b.Natives            ] [xudeMacBook-Pro.<span class="built_in">local</span>] cannot getrlimit RLIMIT_FSIZE because JNA is not available</span><br><span class="line">[2025-02-11T13:50:28,757][INFO ][o.e.n.Node               ] [xudeMacBook-Pro.<span class="built_in">local</span>] version[1.10.1], pid[18338], build[default/tar/1505f74d355bb2bac84162077fe66e9a32fc1be2/2025-01-24T21:02:00.632579Z], OS[Mac OS X/15.3/aarch64], JVM[Azul Systems, Inc./OpenJDK 64-Bit Server VM/17.0.13/17.0.13+11-LTS]</span><br><span class="line">[2025-02-11T13:50:28,757][INFO ][o.e.n.Node               ] [xudeMacBook-Pro.<span class="built_in">local</span>] JVM home [/Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/jdk]</span><br><span class="line">[2025-02-11T13:50:28,758][INFO ][o.e.n.Node               ] [xudeMacBook-Pro.<span class="built_in">local</span>] JVM arguments [-Xshare:auto, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=<span class="literal">true</span>, -Dfile.encoding=UTF-8, -Djna.nosys=<span class="literal">true</span>, -XX:-OmitStackTraceInFastThrow, -XX:+ShowCodeDetailsInExceptionMessages, -Dio.netty.noUnsafe=<span class="literal">true</span>, -Dio.netty.noKeySetOptimization=<span class="literal">true</span>, -Dio.netty.recycler.maxCapacityPerThread=0, -Dio.netty.allocator.numDirectArenas=0, -Dlog4j.shutdownHookEnabled=<span class="literal">false</span>, -Dlog4j2.disable.jmx=<span class="literal">true</span>, -Xms1g, -Xmx1g, -XX:+UseG1GC, -XX:G1ReservePercent=25, -XX:InitiatingHeapOccupancyPercent=30, -Djava.io.tmpdir=/var/folders/ft/rfbtvz_n5l9dg007x5lsk7jw0000gn/T/Easysearch-134350959148498936, -Djava.security.manager=allow, -Djava.locale.providers=SPI,COMPAT, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -XX:MaxDirectMemorySize=536870912, -Des.path.home=/Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle, -Des.path.conf=/Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config, -Des.distribution.flavor=oss, -Des.distribution.type=tar, -Des.bundled_jdk=<span class="literal">false</span>]</span><br><span class="line">[2025-02-11T13:50:29,116][INFO ][c.i.s.s.t.SSLConfig      ] [xudeMacBook-Pro.<span class="built_in">local</span>] SSL dual mode is disabled</span><br><span class="line">[2025-02-11T13:50:29,117][INFO ][c.i.s.SecurityPlugin     ] [xudeMacBook-Pro.<span class="built_in">local</span>] ES Config path is /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config</span><br><span class="line">[2025-02-11T13:50:29,184][INFO ][c.i.s.s.DefaultSecurityKeyStore] [xudeMacBook-Pro.<span class="built_in">local</span>] JVM supports TLSv1.3</span><br><span class="line">[2025-02-11T13:50:29,185][INFO ][c.i.s.s.DefaultSecurityKeyStore] [xudeMacBook-Pro.<span class="built_in">local</span>] Config directory is /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config/, from there the key- and truststore files are resolved relatively</span><br><span class="line">[2025-02-11T13:50:29,389][INFO ][c.i.s.s.DefaultSecurityKeyStore] [xudeMacBook-Pro.<span class="built_in">local</span>] TLS Transport Client Provider : JDK</span><br><span class="line">[2025-02-11T13:50:29,389][INFO ][c.i.s.s.DefaultSecurityKeyStore] [xudeMacBook-Pro.<span class="built_in">local</span>] TLS Transport Server Provider : JDK</span><br><span class="line">[2025-02-11T13:50:29,389][INFO ][c.i.s.s.DefaultSecurityKeyStore] [xudeMacBook-Pro.<span class="built_in">local</span>] TLS HTTP Provider             : JDK</span><br><span class="line">[2025-02-11T13:50:29,389][INFO ][c.i.s.s.DefaultSecurityKeyStore] [xudeMacBook-Pro.<span class="built_in">local</span>] Enabled TLS protocols <span class="keyword">for</span> transport layer : [TLSv1.3, TLSv1.2]</span><br><span class="line">[2025-02-11T13:50:29,389][INFO ][c.i.s.s.DefaultSecurityKeyStore] [xudeMacBook-Pro.<span class="built_in">local</span>] Enabled TLS protocols <span class="keyword">for</span> HTTP layer      : [TLSv1.3, TLSv1.2]</span><br><span class="line">[2025-02-11T13:50:29,391][INFO ][c.i.s.SecurityPlugin     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Clustername: Easysearch</span><br><span class="line">[2025-02-11T13:50:29,745][INFO ][o.e.j.JobSchedulerPlugin ] [xudeMacBook-Pro.<span class="built_in">local</span>] Loaded scheduler extension: Easysearch-index-management, index: .Easysearch-ilm-config</span><br><span class="line">[2025-02-11T13:50:29,748][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [aggs-matrix-stats]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [analysis-common]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [custom-codecs]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [geo]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [job-scheduler]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [lang-expression]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [lang-mustache]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [lang-painless]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [mapper-extras]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [parent-join]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [percolator]</span><br><span class="line">[2025-02-11T13:50:29,749][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [rank-eval]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [reindex]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [repository-s3]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [repository-url]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [security]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded module [transport-netty4]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [analysis-icu]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [analysis-ik]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [analysis-pinyin]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [analysis-stconvert]</span><br><span class="line">[2025-02-11T13:50:29,750][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [cross-cluster-replication]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [index-management]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [ingest-common]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [ingest-geoip]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [ingest-user-agent]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [knn]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [mapper-annotated-text]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [mapper-murmur3]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [mapper-size]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [sql]</span><br><span class="line">[2025-02-11T13:50:29,751][INFO ][o.e.p.PluginsService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] loaded plugin [transport-nio]</span><br><span class="line">[2025-02-11T13:50:29,759][INFO ][c.i.s.SecurityPlugin     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Disabled https compression by default to mitigate BREACH attacks. You can <span class="built_in">enable</span> it by setting <span class="string">&#x27;http.compression: true&#x27;</span> <span class="keyword">in</span> Easysearch.yml</span><br><span class="line">[2025-02-11T13:50:29,767][INFO ][o.e.e.NodeEnvironment    ] [xudeMacBook-Pro.<span class="built_in">local</span>] using [1] data paths, mounts [[/System/Volumes/Data (/dev/disk3s5)]], net usable_space [57gb], net total_space [926.3gb], types [apfs]</span><br><span class="line">[2025-02-11T13:50:29,767][INFO ][o.e.e.NodeEnvironment    ] [xudeMacBook-Pro.<span class="built_in">local</span>] heap size [1gb], compressed ordinary object pointers [<span class="literal">true</span>]</span><br><span class="line">[2025-02-11T13:50:29,784][INFO ][o.e.n.Node               ] [xudeMacBook-Pro.<span class="built_in">local</span>] node name [xudeMacBook-Pro.<span class="built_in">local</span>], node ID [w5zzEDPfTDSE30HWYkUNcw], cluster name [Easysearch], roles [master, remote_cluster_client, data, ingest]</span><br><span class="line">[2025-02-11T13:50:30,915][WARN ][c.i.s.c.Salt             ] [xudeMacBook-Pro.<span class="built_in">local</span>] If you plan to use field masking pls configure compliance salt e1ukloTxxxOgPquJ to be a random string of 16 chars length identical on all nodes</span><br><span class="line">[2025-02-11T13:50:30,921][INFO ][c.i.s.a.i.AuditLogging   ] [xudeMacBook-Pro.<span class="built_in">local</span>] Message routing enabled: <span class="literal">true</span></span><br><span class="line">[2025-02-11T13:50:30,945][INFO ][c.i.s.f.SecurityFilter   ] [xudeMacBook-Pro.<span class="built_in">local</span>] &lt;NONE&gt; indices are made immutable.</span><br><span class="line">[2025-02-11T13:50:31,104][INFO ][o.e.t.NettyAllocator     ] [xudeMacBook-Pro.<span class="built_in">local</span>] creating NettyAllocator with the following configs: [name=unpooled, suggested_max_allocation_size=256kb, factors=&#123;es.unsafe.use_unpooled_allocator=null, g1gc_enabled=<span class="literal">true</span>, g1gc_region_size=1mb, heap_size=1gb&#125;]</span><br><span class="line">[2025-02-11T13:50:31,132][INFO ][o.e.d.DiscoveryModule    ] [xudeMacBook-Pro.<span class="built_in">local</span>] using discovery <span class="built_in">type</span> [zen] and seed hosts providers [settings]</span><br><span class="line">[2025-02-11T13:50:31,250][WARN ][o.e.g.DanglingIndicesState] [xudeMacBook-Pro.<span class="built_in">local</span>] gateway.auto_import_dangling_indices is disabled, dangling indices will not be automatically detected or imported and must be managed manually</span><br><span class="line">[2025-02-11T13:50:31,335][WARN ][o.e.r.MethodHandlers     ] [xudeMacBook-Pro.<span class="built_in">local</span>] replace existing handler <span class="keyword">for</span> [/&#123;index&#125;/_search] <span class="keyword">for</span> method: GET existing:com.infinilabs.security.filter.SecurityRestFilter<span class="variable">$1</span>@41fbe8c0 to com.infinilabs.security.filter.SecurityRestFilter<span class="variable">$1</span>@1e8fd198</span><br><span class="line">[2025-02-11T13:50:31,335][WARN ][o.e.r.MethodHandlers     ] [xudeMacBook-Pro.<span class="built_in">local</span>] replace existing handler <span class="keyword">for</span> [/&#123;index&#125;/_search] <span class="keyword">for</span> method: POST existing:com.infinilabs.security.filter.SecurityRestFilter<span class="variable">$1</span>@4f75c627 to com.infinilabs.security.filter.SecurityRestFilter<span class="variable">$1</span>@1631a614</span><br><span class="line">[2025-02-11T13:50:31,344][INFO ][o.e.n.Node               ] [xudeMacBook-Pro.<span class="built_in">local</span>] initialized</span><br><span class="line">[2025-02-11T13:50:31,344][INFO ][o.e.n.Node               ] [xudeMacBook-Pro.<span class="built_in">local</span>] starting ...</span><br><span class="line">[2025-02-11T13:50:31,345][INFO ][o.e.i.r.a.s.RollupListener] [xudeMacBook-Pro.<span class="built_in">local</span>] Rollup listener start</span><br><span class="line">[2025-02-11T13:50:31,391][INFO ][o.e.t.TransportService   ] [xudeMacBook-Pro.<span class="built_in">local</span>] publish_address &#123;127.0.0.1:9300&#125;, bound_addresses &#123;[::1]:9300&#125;, &#123;127.0.0.1:9300&#125;</span><br><span class="line">[2025-02-11T13:50:31,473][WARN ][o.e.b.BootstrapChecks    ] [xudeMacBook-Pro.<span class="built_in">local</span>] system call filters failed to install; check the logs and fix your configuration or <span class="built_in">disable</span> system call filters at your own risk</span><br><span class="line">[2025-02-11T13:50:31,473][WARN ][o.e.b.BootstrapChecks    ] [xudeMacBook-Pro.<span class="built_in">local</span>] the default discovery settings are unsuitable <span class="keyword">for</span> production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</span><br><span class="line">[2025-02-11T13:50:31,477][INFO ][o.e.c.c.ClusterBootstrapService] [xudeMacBook-Pro.<span class="built_in">local</span>] no discovery configuration found, will perform best-effort cluster bootstrapping after [3s] unless existing master is discovered</span><br><span class="line">[2025-02-11T13:50:34,481][INFO ][o.e.c.c.Coordinator      ] [xudeMacBook-Pro.<span class="built_in">local</span>] setting initial configuration to VotingConfiguration&#123;w5zzEDPfTDSE30HWYkUNcw&#125;</span><br><span class="line">[2025-02-11T13:50:34,576][INFO ][o.e.c.s.MasterService    ] [xudeMacBook-Pro.<span class="built_in">local</span>] elected-as-master ([1] nodes joined)[&#123;xudeMacBook-Pro.<span class="built_in">local</span>&#125;&#123;w5zzEDPfTDSE30HWYkUNcw&#125;&#123;KMu1pbs-RB2vaWucEO8dmg&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;dimr&#125; elect leader, _BECOME_MASTER_TASK_, _FINISH_ELECTION_], term: 1, version: 1, delta: master node changed &#123;previous [], current [&#123;xudeMacBook-Pro.<span class="built_in">local</span>&#125;&#123;w5zzEDPfTDSE30HWYkUNcw&#125;&#123;KMu1pbs-RB2vaWucEO8dmg&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;dimr&#125;]&#125;</span><br><span class="line">[2025-02-11T13:50:34,601][INFO ][o.e.c.c.CoordinationState] [xudeMacBook-Pro.<span class="built_in">local</span>] cluster UUID <span class="built_in">set</span> to [kJHbUT_zT2ionNVL9f3raQ]</span><br><span class="line">[2025-02-11T13:50:34,623][INFO ][o.e.c.s.ClusterApplierService] [xudeMacBook-Pro.<span class="built_in">local</span>] master node changed &#123;previous [], current [&#123;xudeMacBook-Pro.<span class="built_in">local</span>&#125;&#123;w5zzEDPfTDSE30HWYkUNcw&#125;&#123;KMu1pbs-RB2vaWucEO8dmg&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;dimr&#125;]&#125;, term: 1, version: 1, reason: Publication&#123;term=1, version=1&#125;</span><br><span class="line">[2025-02-11T13:50:34,627][INFO ][o.e.i.i.ManagedIndexCoordinator] [xudeMacBook-Pro.<span class="built_in">local</span>] Cache cluster manager node onClusterManager <span class="keyword">time</span>: 1739253034627</span><br><span class="line">[2025-02-11T13:50:34,637][INFO ][o.e.h.AbstractHttpServerTransport] [xudeMacBook-Pro.<span class="built_in">local</span>] publish_address &#123;127.0.0.1:9200&#125;, bound_addresses &#123;[::1]:9200&#125;, &#123;127.0.0.1:9200&#125;</span><br><span class="line">[2025-02-11T13:50:34,640][INFO ][o.e.n.Node               ] [xudeMacBook-Pro.<span class="built_in">local</span>] started</span><br><span class="line">[2025-02-11T13:50:34,640][INFO ][c.i.s.SecurityPlugin     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Node started</span><br><span class="line">[2025-02-11T13:50:34,640][INFO ][c.i.s.c.ConfigurationRepository] [xudeMacBook-Pro.<span class="built_in">local</span>] Will attempt to create index .security and default configs <span class="keyword">if</span> they are absent</span><br><span class="line">[2025-02-11T13:50:34,641][INFO ][c.i.s.SecurityPlugin     ] [xudeMacBook-Pro.<span class="built_in">local</span>] 3 Security modules loaded so far: [Module [<span class="built_in">type</span>=REST_MANAGEMENT_API, implementing class=com.infinilabs.security.dlic.rest.api.SecurityRestApiActions], Module [<span class="built_in">type</span>=MULTITENANCY, implementing class=com.infinilabs.security.configuration.PrivilegesInterceptorImpl], Module [<span class="built_in">type</span>=AUDITLOG, implementing class=com.infinilabs.security.auditlog.impl.AuditLogging]]</span><br><span class="line">[2025-02-11T13:50:34,641][INFO ][c.i.s.c.ConfigurationRepository] [xudeMacBook-Pro.<span class="built_in">local</span>] Background init thread started. Install default config?: <span class="literal">true</span></span><br><span class="line">[2025-02-11T13:50:34,645][INFO ][c.i.s.c.ConfigurationRepository] [xudeMacBook-Pro.<span class="built_in">local</span>] Wait <span class="keyword">for</span> cluster to be available ...</span><br><span class="line">[2025-02-11T13:50:34,670][INFO ][o.e.g.GatewayService     ] [xudeMacBook-Pro.<span class="built_in">local</span>] recovered [0] indices into cluster_state</span><br><span class="line">[2025-02-11T13:50:36,676][INFO ][o.w.a.d.Dictionary       ] [xudeMacBook-Pro.<span class="built_in">local</span>] try load config from /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config/analysis-ik/IKAnalyzer.cfg.xml</span><br><span class="line">[2025-02-11T13:50:37,465][INFO ][o.e.c.m.MetadataCreateIndexService] [xudeMacBook-Pro.<span class="built_in">local</span>] [.security] creating index, cause [api], templates [], shards [1]/[1]</span><br><span class="line">[2025-02-11T13:50:37,470][INFO ][o.e.c.r.a.AllocationService] [xudeMacBook-Pro.<span class="built_in">local</span>] updating number_of_replicas to [0] <span class="keyword">for</span> indices [.security]</span><br><span class="line">[2025-02-11T13:50:37,657][INFO ][o.e.c.r.a.AllocationService] [xudeMacBook-Pro.<span class="built_in">local</span>] Cluster health status changed from [YELLOW] to [GREEN] (reason: [shards started [[.security][0]]]).</span><br><span class="line">[2025-02-11T13:50:37,679][INFO ][c.i.s.c.ConfigurationRepository] [xudeMacBook-Pro.<span class="built_in">local</span>] Index .security created?: <span class="literal">true</span></span><br><span class="line">[2025-02-11T13:50:37,685][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Will update <span class="string">&#x27;config&#x27;</span> with /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config/security/config.yml and populate it with empty doc <span class="keyword">if</span> file missing and populateEmptyIfFileMissing=<span class="literal">false</span></span><br><span class="line">[2025-02-11T13:50:37,720][INFO ][o.e.c.m.MetadataMappingService] [xudeMacBook-Pro.<span class="built_in">local</span>] [.security/ADtiL1q3TUiUghNCrlfrHQ] create_mapping [_doc]</span><br><span class="line">[2025-02-11T13:50:37,779][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Doc with <span class="built_in">id</span> <span class="string">&#x27;config&#x27;</span> and version 2 is updated <span class="keyword">in</span> .security index.</span><br><span class="line">[2025-02-11T13:50:37,780][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Will update <span class="string">&#x27;role&#x27;</span> with /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config/security/role.yml and populate it with empty doc <span class="keyword">if</span> file missing and populateEmptyIfFileMissing=<span class="literal">false</span></span><br><span class="line">[2025-02-11T13:50:37,786][INFO ][o.e.c.m.MetadataMappingService] [xudeMacBook-Pro.<span class="built_in">local</span>] [.security/ADtiL1q3TUiUghNCrlfrHQ] update_mapping [_doc]</span><br><span class="line">[2025-02-11T13:50:37,830][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Doc with <span class="built_in">id</span> <span class="string">&#x27;role&#x27;</span> and version 2 is updated <span class="keyword">in</span> .security index.</span><br><span class="line">[2025-02-11T13:50:37,831][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Will update <span class="string">&#x27;role_mapping&#x27;</span> with /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config/security/role_mapping.yml and populate it with empty doc <span class="keyword">if</span> file missing and populateEmptyIfFileMissing=<span class="literal">false</span></span><br><span class="line">[2025-02-11T13:50:37,838][INFO ][o.e.c.m.MetadataMappingService] [xudeMacBook-Pro.<span class="built_in">local</span>] [.security/ADtiL1q3TUiUghNCrlfrHQ] update_mapping [_doc]</span><br><span class="line">[2025-02-11T13:50:37,885][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Doc with <span class="built_in">id</span> <span class="string">&#x27;role_mapping&#x27;</span> and version 2 is updated <span class="keyword">in</span> .security index.</span><br><span class="line">[2025-02-11T13:50:37,886][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Will update <span class="string">&#x27;user&#x27;</span> with /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config/security/user.yml and populate it with empty doc <span class="keyword">if</span> file missing and populateEmptyIfFileMissing=<span class="literal">false</span></span><br><span class="line">[2025-02-11T13:50:37,898][INFO ][o.e.c.m.MetadataMappingService] [xudeMacBook-Pro.<span class="built_in">local</span>] [.security/ADtiL1q3TUiUghNCrlfrHQ] update_mapping [_doc]</span><br><span class="line">[2025-02-11T13:50:37,937][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Doc with <span class="built_in">id</span> <span class="string">&#x27;user&#x27;</span> and version 2 is updated <span class="keyword">in</span> .security index.</span><br><span class="line">[2025-02-11T13:50:37,937][INFO ][c.i.s.s.ConfigHelper     ] [xudeMacBook-Pro.<span class="built_in">local</span>] Will update <span class="string">&#x27;privilege&#x27;</span> with /Users/xu/Desktop/es/Easysearch-1.10.1-1978-mac-arm64-bundle/config/security/privilege.yml and populate it with empty doc <span class="keyword">if</span> file missing and populateEmptyIfFileMissing=<span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ Postman å°è¯•è¿æ¥ï¼Œå¯ä»¥æ­£å¸¸è¿”å› HTTP çš„å“åº”ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/direct/59507653bfb74e90bab4f21b2b0adc73.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™é‡Œå°±éœ€è¦ç”¨åˆ°ä¸Šæ¬¡çš„é‚£ä¸ªå¯†ç ï¼Œé»˜è®¤å­˜æ”¾åœ¨ log&#x2F;initialize.log ä¸‹ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/direct/32a54c5760464860858e5ada2c08c98b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h3><p>ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶å¹¶ä¸”è¿è¡Œï¼ŒæœåŠ¡ç›‘å¬åœ¨ 9000 ç«¯å£ï¼Œé€šè¿‡è¿™ä¸ªé¡µé¢è¿æ¥ Easysearchï¼Œç”¨æ¥æ›¿ä»£ kibanaï¼Œä¸ªäººè§‰å¾—æ¯” kibana å’Œ OpenSearch Dashboard è¦å¥½ç”¨ï¼Œé™¤äº† Easysearch ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¿æ¥ ES å’Œ OpenSearchã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">./console-mac-arm64             (base) 14:25:43</span><br><span class="line"></span><br><span class="line">   ___  ___    __  __    ___  __   __</span><br><span class="line">  / __\/___\/\ \ \/ _\  /___\/ /  /__\</span><br><span class="line"> / /  //  //  \/ /\ \  //  // /  /_\</span><br><span class="line">/ /__/ \_// /\  / _\ \/ \_// /__//__</span><br><span class="line">\____|___/\_\ \/  \__/\___/\____|__/</span><br><span class="line"></span><br><span class="line">HOME: https://github.com/infinilabs/console/</span><br><span class="line"></span><br><span class="line">[CONSOLE] The easiest way to operate your own search platform, open-sourced under the GNU AGPLv3.</span><br><span class="line">[CONSOLE] 1.28.1#1978, 2025-01-25 11:40:24, 2025-12-31 10:10:10, b189b72c11a9, 8ecefd18d9eb, c511f8f4cab9</span><br><span class="line">[02-11 14:25:47] [INF] [env.go:216] configuration auto reload enabled</span><br><span class="line">[02-11 14:25:47] [INF] [env.go:222] watching config: /Users/xu/Desktop/es/console-1.28.1-1978-mac-arm64/config</span><br><span class="line">[02-11 14:25:47] [INF] [app.go:311] initializing console, pid: 20341</span><br><span class="line">[02-11 14:25:47] [INF] [app.go:312] using config: /Users/xu/Desktop/es/console-1.28.1-1978-mac-arm64/console.yml</span><br><span class="line">[02-11 14:25:47] [INF] [instance.go:100] workspace: /Users/xu/Desktop/es/console-1.28.1-1978-mac-arm64/data/console/nodes/culeqqr55o14utfde2a0</span><br><span class="line">[02-11 14:25:47] [INF] [module.go:159] started module: badger</span><br><span class="line">[02-11 14:25:47] [INF] [module.go:159] started module: kafka_queue</span><br><span class="line">[02-11 14:25:47] [INF] [module.go:159] started module: setup</span><br><span class="line">[02-11 14:25:47] [INF] [module.go:159] started module: setup</span><br><span class="line">[02-11 14:25:47] [INF] [web.go:226] web server listen at: http://0.0.0.0:9000</span><br><span class="line">[02-11 14:25:47] [INF] [module.go:159] started module: web</span><br><span class="line">[02-11 14:25:47] [INF] [module.go:184] all modules are started</span><br><span class="line">[02-11 14:25:47] [INF] [app.go:537] console is up and running now.</span><br><span class="line">[02-11 14:28:03] [WRN] [schema.go:101] duplicated schema rbac-role, infini.sh/console/core/security-role</span><br><span class="line">[02-11 14:28:03] [WRN] [schema.go:101] duplicated schema rbac-user, infini.sh/console/core/security-user</span><br><span class="line">[02-11 14:28:03] [WRN] [schema.go:101] duplicated schema credential, infini.sh/framework/core/credential-credential</span><br><span class="line">[02-11 14:28:04] [INF] [module.go:187] loading [0] remote configs</span><br><span class="line">[02-11 14:28:04] [INF] [pipeline.go:418] creating pipeline: merge_metrics</span><br><span class="line">[02-11 14:28:04] [INF] [pipeline.go:418] creating pipeline: metadata_ingest</span><br><span class="line">[02-11 14:28:04] [INF] [pipeline.go:418] creating pipeline: activity_ingest</span><br><span class="line">[02-11 14:28:04] [INF] [pipeline.go:418] creating pipeline: merge_logging</span><br><span class="line">[02-11 14:28:04] [INF] [pipeline.go:418] creating pipeline: merge_audit_log</span><br><span class="line">[02-11 14:28:04] [INF] [pipeline.go:418] creating pipeline: ingest_merged_requests</span><br><span class="line">[02-11 14:28:04] [INF] [load.go:69] loading permission file from /Users/xu/Desktop/es/console-1.28.1-1978-mac-arm64/config/permission.json</span><br><span class="line">[02-11 14:28:06] [INF] [pipeline.go:227] config changed, checking <span class="keyword">for</span> new pipeline configs, CREATE, config/system_config.yml</span><br><span class="line">[02-11 14:54:38] [ERR] [v0.go:521] invalid response: https://localhost:9200/.infini_metrics%2A/_search,&#123;<span class="string">&quot;aggs&quot;</span>:&#123;<span class="string">&quot;culf8bj55o14utfdf1u0&quot;</span>:&#123;<span class="string">&quot;aggs&quot;</span>:&#123;<span class="string">&quot;culf8bj55o14utfdf1ug&quot;</span>:&#123;<span class="string">&quot;aggs&quot;</span>:&#123;<span class="string">&quot;culf8bj55o14utfdf1v0&quot;</span>:&#123;<span class="string">&quot;aggs&quot;</span>:&#123;&#125;,<span class="string">&quot;terms&quot;</span>:&#123;<span class="string">&quot;field&quot;</span>:<span class="string">&quot;payload.elasticsearch.cluster_health.status&quot;</span>,<span class="string">&quot;missing&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;size&quot;</span>:2&#125;&#125;&#125;,<span class="string">&quot;date_range&quot;</span>:&#123;<span class="string">&quot;field&quot;</span>:<span class="string">&quot;timestamp&quot;</span>,<span class="string">&quot;format&quot;</span>:<span class="string">&quot;yyyy-MM-dd&quot;</span>,<span class="string">&quot;ranges&quot;</span>:[&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-13d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-12d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-12d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-11d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-11d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-10d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-10d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-9d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-9d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-8d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-8d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-7d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-7d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-6d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-6d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-5d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-5d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-4d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-4d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-3d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-3d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-2d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-2d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now-1d/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now-1d/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now/d&quot;</span>&#125;,&#123;<span class="string">&quot;from&quot;</span>:<span class="string">&quot;now/d&quot;</span>,<span class="string">&quot;to&quot;</span>:<span class="string">&quot;now&quot;</span>&#125;],<span class="string">&quot;time_zone&quot;</span>:<span class="string">&quot;+08:00&quot;</span>&#125;&#125;&#125;,<span class="string">&quot;terms&quot;</span>:&#123;<span class="string">&quot;field&quot;</span>:<span class="string">&quot;metadata.labels.cluster_id&quot;</span>,<span class="string">&quot;size&quot;</span>:2&#125;&#125;&#125;,<span class="string">&quot;query&quot;</span>:&#123;<span class="string">&quot;bool&quot;</span>:&#123;<span class="string">&quot;filter&quot;</span>:[&#123;<span class="string">&quot;range&quot;</span>:&#123;<span class="string">&quot;timestamp&quot;</span>:&#123;<span class="string">&quot;gte&quot;</span>:<span class="string">&quot;now-15d&quot;</span>,<span class="string">&quot;lte&quot;</span>:<span class="string">&quot;now&quot;</span>&#125;&#125;&#125;],<span class="string">&quot;must&quot;</span>:[&#123;<span class="string">&quot;terms&quot;</span>:&#123;<span class="string">&quot;metadata.labels.cluster_id&quot;</span>:[<span class="string">&quot;infini_default_system_cluster&quot;</span>]&#125;&#125;,&#123;<span class="string">&quot;term&quot;</span>:&#123;<span class="string">&quot;metadata.category&quot;</span>:&#123;<span class="string">&quot;value&quot;</span>:<span class="string">&quot;elasticsearch&quot;</span>&#125;&#125;&#125;,&#123;<span class="string">&quot;term&quot;</span>:&#123;<span class="string">&quot;metadata.name&quot;</span>:&#123;<span class="string">&quot;value&quot;</span>:<span class="string">&quot;cluster_health&quot;</span>&#125;&#125;&#125;]&#125;&#125;,<span class="string">&quot;size&quot;</span>:0&#125;,&#123;<span class="string">&quot;error&quot;</span>:&#123;<span class="string">&quot;root_cause&quot;</span>:[&#123;<span class="string">&quot;type&quot;</span>:<span class="string">&quot;runtime_exception&quot;</span>,<span class="string">&quot;reason&quot;</span>:<span class="string">&quot;Unable to unroll aggregation tree.  Aggregation [culf8bj55o14utfdf1u0] is of type [UnmappedTerms] which is currently unsupported.&quot;</span>&#125;],<span class="string">&quot;type&quot;</span>:<span class="string">&quot;runtime_exception&quot;</span>,<span class="string">&quot;reason&quot;</span>:<span class="string">&quot;Unable to unroll aggregation tree.  Aggregation [culf8bj55o14utfdf1u0] is of type [UnmappedTerms] which is currently unsupported.&quot;</span>&#125;,<span class="string">&quot;status&quot;</span>:500&#125;</span><br><span class="line">[02-11 14:59:18] [ERR] [config.go:46] agent config not found: missing field accessing <span class="string">&#x27;agent&#x27;</span></span><br><span class="line">[02-11 14:59:18] [INF] [certs.go:49] auto generating cert files</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://i-blog.csdnimg.cn/direct/f5c1ef6500b24949b22c7aaff8c317b6.png"></p>
<p>æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯ï¼Œå¯ä»¥çœ‹æŒ‡æ ‡ï¼Œä¹Ÿå¯ä»¥çœ‹ç´¢å¼•ï¼Œkibana æœ‰çš„åŠŸèƒ½è¿™è¾¹åŸºæœ¬éƒ½æœ‰ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/direct/31e40aee35944b6fa7e6920ae065cd39.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>åŒæ—¶æä¾› DSL æŸ¥è¯¢ï¼š<br><img src="https://i-blog.csdnimg.cn/direct/a8cf7751f52b4ea0a9ef59c769a27f58.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="Gateway"><a href="#Gateway" class="headerlink" title="Gateway"></a>Gateway</h3><p>INFINI Gateway æ˜¯ä¸€ä¸ªé¢å‘æœç´¢åœºæ™¯çš„é«˜æ€§èƒ½æ•°æ®ç½‘å…³ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡ç½‘å…³å¤„ç†åå†è½¬å‘åˆ°åç«¯çš„æœç´¢ä¸šåŠ¡é›†ç¾¤ã€‚åŸºäº INFINI Gatewayï¼Œå¯ä»¥å®ç°ç´¢å¼•çº§åˆ«çš„é™é€Ÿé™æµã€å¸¸è§æŸ¥è¯¢çš„ç¼“å­˜åŠ é€Ÿã€æŸ¥è¯¢è¯·æ±‚çš„å®¡è®¡ã€æŸ¥è¯¢ç»“æœçš„åŠ¨æ€ä¿®æ”¹ç­‰ç­‰ã€‚</p>
<p>Macbook ä¸‹æœ‰å¥‡æ€ªçš„å®‰å…¨è§„åˆ™ï¼Œé™¤äº†äºŒè¿›åˆ¶æ–‡ä»¶ä¹‹å¤–ï¼Œyml æ–‡ä»¶ç»éªŒä¹ŸæŠ¥é”™ä¸å®‰å…¨ã€‚æ‰“å¼€ â€œç³»ç»Ÿåå¥½è®¾ç½®â€ï¼Œè¿›å…¥ â€œå®‰å…¨æ€§ä¸éšç§â€ï¼Œç‚¹å‡» â€œé€šç”¨â€ï¼Œæœ‰ â€œä»ç„¶å…è®¸â€ æŒ‰é’®ï¼Œç‚¹å‡»å®ƒå³å¯ã€‚<br><img src="https://i-blog.csdnimg.cn/direct/24aacd91ee854915acae12662b75f853.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç„¶åæŒ‰ç…§ Easysearch çš„é…ç½®è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™ä¼šè¿ä¸ä¸Šé›†ç¾¤ã€‚å°±æ˜¯è¿™ä¸ªæŠ¥é”™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">./gateway-mac-arm64                 (base) 14:51:14</span><br><span class="line"></span><br><span class="line">   ___   _   _____  __  __    __  _</span><br><span class="line">  / _ \ /_\ /__   \/__\/ / /\ \ \/_\ /\_/\</span><br><span class="line"> / /_\///_\\  / /\/_\  \ \/  \/ //_\\\_ _/</span><br><span class="line">/ /_\\/  _  \/ / //__   \  /\  /  _  \/ \</span><br><span class="line">\____/\_/ \_/\/  \__/    \/  \/\_/ \_/\_/</span><br><span class="line"></span><br><span class="line">HOME: https://github.com/infinilabs/gateway/</span><br><span class="line"></span><br><span class="line">[GATEWAY] A light-weight, powerful and high-performance search gateway, open-sourced under the GNU AGPLv3.</span><br><span class="line">[GATEWAY] 1.28.1#1978, 2025-01-24 18:34:08, 2025-12-31 10:10:10, 93fd9e32500a, 8ecefd18d9eb, c511f8f4cab9</span><br><span class="line">[02-11 14:51:17] [INF] [app.go:311] initializing gateway, pid: 22456</span><br><span class="line">[02-11 14:51:17] [INF] [app.go:312] using config: /Users/xu/Desktop/es/gateway-1.28.1-1978-mac-arm64/gateway.yml</span><br><span class="line">[02-11 14:51:17] [INF] [instance.go:100] workspace: /Users/xu/Desktop/es/gateway-1.28.1-1978-mac-arm64/data/gateway/nodes/culf6pb55o15fe01mtvg</span><br><span class="line">panic: Get <span class="string">&quot;http://localhost:9200&quot;</span>: EOF</span><br><span class="line"></span><br><span class="line">goroutine 433 [running]:</span><br><span class="line">infini.sh/framework/modules/elastic/common.InitClientWithConfig(&#123;&#123;&#123;0x14000810630, 0x4&#125;, 0x0, 0x0&#125;, &#123;0x103466e7c, 0x4&#125;, &#123;0x14000810630, 0x4&#125;, &#123;0x0, 0x0&#125;, ...&#125;)</span><br><span class="line">	/root/go/src/infini.sh/framework/modules/elastic/common/config.go:89 +0x880</span><br><span class="line">infini.sh/framework/modules/elastic/common.InitElasticInstanceWithoutMetadata(&#123;&#123;&#123;0x14000810630, 0x4&#125;, 0x0, 0x0&#125;, &#123;0x103466e7c, 0x4&#125;, &#123;0x14000810630, 0x4&#125;, &#123;0x0, 0x0&#125;, ...&#125;)</span><br><span class="line">	/root/go/src/infini.sh/framework/modules/elastic/common/config.go:199 +0x64</span><br><span class="line">infini.sh/framework/modules/elastic.initElasticInstances(&#123;0x14000826008?, 0x1e?, 0x103670600?&#125;, &#123;0x103466e7c, 0x4&#125;)</span><br><span class="line">	/root/go/src/infini.sh/framework/modules/elastic/module.go:194 +0x7c</span><br><span class="line">infini.sh/framework/modules/elastic.(*ElasticModule).Setup(0x140006fa120?)</span><br><span class="line">	/root/go/src/infini.sh/framework/modules/elastic/module.go:215 +0x124</span><br><span class="line">infini.sh/framework/core/module.Start()</span><br><span class="line">	/root/go/src/infini.sh/framework/core/module/module.go:123 +0x238</span><br><span class="line">main.start()</span><br><span class="line">	/root/go/src/infini.sh/gateway/main.go:72 +0x1c</span><br><span class="line">infini.sh/framework.(*App).run(0x14000332500)</span><br><span class="line">	/root/go/src/infini.sh/framework/app.go:493 +0x160</span><br><span class="line">created by infini.sh/framework.(*App).Start <span class="keyword">in</span> goroutine 1</span><br><span class="line">	/root/go/src/infini.sh/framework/app.go:429 +0xb4</span><br></pre></td></tr></table></figure>

<p><img src="https://i-blog.csdnimg.cn/direct/ebcac27064884421860bbc6e60d2155b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹åï¼Œå¯åŠ¨æ—¥å¿—å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">./gateway-mac-arm64                 (base) 14:53:07</span><br><span class="line"></span><br><span class="line">   ___   _   _____  __  __    __  _</span><br><span class="line">  / _ \ /_\ /__   \/__\/ / /\ \ \/_\ /\_/\</span><br><span class="line"> / /_\///_\\  / /\/_\  \ \/  \/ //_\\\_ _/</span><br><span class="line">/ /_\\/  _  \/ / //__   \  /\  /  _  \/ \</span><br><span class="line">\____/\_/ \_/\/  \__/    \/  \/\_/ \_/\_/</span><br><span class="line"></span><br><span class="line">HOME: https://github.com/infinilabs/gateway/</span><br><span class="line"></span><br><span class="line">[GATEWAY] A light-weight, powerful and high-performance search gateway, open-sourced under the GNU AGPLv3.</span><br><span class="line">[GATEWAY] 1.28.1#1978, 2025-01-24 18:34:08, 2025-12-31 10:10:10, 93fd9e32500a, 8ecefd18d9eb, c511f8f4cab9</span><br><span class="line">[02-11 14:53:16] [INF] [app.go:311] initializing gateway, pid: 22599</span><br><span class="line">[02-11 14:53:16] [INF] [app.go:312] using config: /Users/xu/Desktop/es/gateway-1.28.1-1978-mac-arm64/gateway.yml</span><br><span class="line">[02-11 14:53:16] [INF] [instance.go:100] workspace: /Users/xu/Desktop/es/gateway-1.28.1-1978-mac-arm64/data/gateway/nodes/culf6pb55o15fe01mtvg</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: badger</span><br><span class="line">[02-11 14:53:16] [INF] [api.go:214] <span class="built_in">local</span> ips: 192.168.5.53</span><br><span class="line">[02-11 14:53:16] [INF] [api.go:312] api server listen at: http://0.0.0.0:2900</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: api</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: disk_queue</span><br><span class="line">[02-11 14:53:16] [INF] [actions.go:420] elasticsearch [logging-server] is available</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: elasticsearch</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: kafka_queue</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: queue</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: redis</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: s3</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: simple_stats</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: task</span><br><span class="line">[02-11 14:53:16] [INF] [actions.go:420] elasticsearch [prod] is available</span><br><span class="line">[02-11 14:53:16] [INF] [pipeline.go:418] creating pipeline: pipeline_logging_merge</span><br><span class="line">[02-11 14:53:16] [INF] [pipeline.go:418] creating pipeline: ingest_pipeline_logging</span><br><span class="line">[02-11 14:53:16] [INF] [pipeline.go:418] creating pipeline: async_messages_merge</span><br><span class="line">[02-11 14:53:16] [INF] [pipeline.go:418] creating pipeline: metrics_merge</span><br><span class="line">[02-11 14:53:16] [INF] [pipeline.go:418] creating pipeline: request_logging_merge</span><br><span class="line">[02-11 14:53:16] [INF] [pipeline.go:418] creating pipeline: ingest_merged_requests</span><br><span class="line">[02-11 14:53:16] [INF] [pipeline.go:418] creating pipeline: async_ingest_bulk_requests</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:159] started module: pipeline</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:178] started plugin: floating_ip</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:178] started plugin: force_merge</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:178] started plugin: metrics</span><br><span class="line">[02-11 14:53:16] [INF] [module.go:178] started plugin: statsd</span><br><span class="line">[02-11 14:53:17] [INF] [reverseproxy.go:299] elasticsearch [prod] hosts: [] =&gt; [127.0.0.1:9200]</span><br><span class="line">[02-11 14:53:17] [INF] [entry.go:420] entry [my_es_entry] listen at: http://0.0.0.0:8000</span><br><span class="line">[02-11 14:53:17] [INF] [module.go:178] started plugin: gateway</span><br><span class="line">[02-11 14:53:17] [INF] [module.go:184] all modules are started</span><br><span class="line">[02-11 14:53:17] [INF] [app.go:537] gateway is up and running now.</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è®¤è¯ä¹‹åï¼Œå¯ä»¥ä» Gateway ä»£ç†åˆ° Easysearchï¼š<br><img src="https://i-blog.csdnimg.cn/direct/b30d52d702d34054a51c0717e0c8ba8a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h4 id="Gateway-æ³¨å†Œåˆ°-Console"><a href="#Gateway-æ³¨å†Œåˆ°-Console" class="headerlink" title="Gateway æ³¨å†Œåˆ° Console"></a>Gateway æ³¨å†Œåˆ° Console</h4><p>æ³¨å†Œæ—¶å€™ç”¨çš„æ˜¯ 2900 ç«¯å£ï¼Œå¦‚æœæ³¨å†Œåˆ° 8000 æ˜¯æ— æ³•è¿æ¥çš„ã€‚<br><img src="https://i-blog.csdnimg.cn/direct/2811c9077e0c497f9d3717b6778a27f6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æ³¨å†Œå®Œæˆå°±ä¼šæ˜¾ç¤º Gateway çš„ä¿¡æ¯ï¼š<br><img src="https://i-blog.csdnimg.cn/direct/6f80928712d7410b842013aaa825aa94.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æœ¬æ–‡å›´ç»•åœ¨ Mac ç³»ç»Ÿä¸Šå®‰è£…ã€é…ç½®å’Œä½¿ç”¨ Easysearch å±•å¼€ï¼Œè¯¦ç»†ä»‹ç»äº†å„ç»„ä»¶çš„å®‰è£…è¿‡ç¨‹ã€é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†æ€»ç»“ï¼š</p>
<h3 id="1-å®‰è£…èƒŒæ™¯ä¸å‰æœŸå‡†å¤‡"><a href="#1-å®‰è£…èƒŒæ™¯ä¸å‰æœŸå‡†å¤‡" class="headerlink" title="1. å®‰è£…èƒŒæ™¯ä¸å‰æœŸå‡†å¤‡"></a>1. å®‰è£…èƒŒæ™¯ä¸å‰æœŸå‡†å¤‡</h3><p>åœ¨å­¦ä¹ é˜¶æ®µç¼ºå°‘æœåŠ¡å™¨æ—¶ï¼Œå¯ä½¿ç”¨ Mac è¿›è¡Œ Easysearch çš„å®‰è£…å­¦ä¹ ï¼Œä½†å®˜ç½‘æœªæä¾› Mac ç‰ˆå®‰è£…æ•™ç¨‹ã€‚Easysearch è¿è¡Œä¾èµ– Javaï¼Œç¨‹åºå¯åŠ¨æ—¶ä¼šä»å½“å‰ç›®å½•çš„ JDK æŸ¥æ‰¾ Javaï¼Œå³ä¾¿ç¯å¢ƒå˜é‡å·²é…ç½®ä¹Ÿå¯èƒ½æ— æ³•æ‰¾åˆ°ï¼Œè§£å†³åŠæ³•æœ‰ï¼šä¸€æ˜¯ä¸‹è½½ JDK äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé‡å‘½åä¸ºâ€œjdkâ€æ”¾åœ¨ Easysearch æ ¹ç›®å½•ï¼›äºŒæ˜¯ä¸‹è½½è‡ªå¸¦ JDK çš„ Easysearch bundle åŒ…ã€‚</p>
<h3 id="2-Easysearch-å®‰è£…ä¸å¯åŠ¨"><a href="#2-Easysearch-å®‰è£…ä¸å¯åŠ¨" class="headerlink" title="2. Easysearch å®‰è£…ä¸å¯åŠ¨"></a>2. Easysearch å®‰è£…ä¸å¯åŠ¨</h3><ul>
<li><strong>åˆå§‹åŒ–</strong>ï¼šæ‰§è¡Œ<code>bin/initialize.sh</code>è„šæœ¬è®¾ç½® TLS è¯ä¹¦å’Œé›†ç¾¤å¯†ç ï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä¼šæç¤ºè¦†ç›–è¯ä¹¦å’Œå¯†ç çš„é£é™©ï¼Œéœ€ç¡®è®¤æ˜¯å¦ç»§ç»­ï¼Œå¹¶å¯é€‰æ‹©æ˜¯å¦å°†å‡­è¯è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ã€‚åˆå§‹åŒ–æˆåŠŸåä¼šæ˜¾ç¤ºé›†ç¾¤çš„å¯†ç å’Œè¿æ¥ä¿¡æ¯ï¼Œå¦‚<code>curl -ku admin:db3e19a8c1c9f7755763 https://localhost:9200</code>ã€‚</li>
<li><strong>å¯åŠ¨é›†ç¾¤</strong>ï¼šå¯åŠ¨å‘½ä»¤ä¸º<code>bin/Easysearch</code>ï¼Œé»˜è®¤ç›‘å¬ 9200 ç«¯å£ã€‚å¯åŠ¨è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°æ— æ³•åŠ è½½ JNA æœ¬åœ°æ”¯æŒåº“çš„è­¦å‘Šï¼Œä½†ä¸å½±å“åç»­å¯åŠ¨å’Œä½¿ç”¨ã€‚</li>
</ul>
<h3 id="3-è¿æ¥ä¸éªŒè¯"><a href="#3-è¿æ¥ä¸éªŒè¯" class="headerlink" title="3. è¿æ¥ä¸éªŒè¯"></a>3. è¿æ¥ä¸éªŒè¯</h3><p>ä½¿ç”¨ Postman å°è¯•è¿æ¥ï¼Œéœ€ç”¨åˆ°åˆå§‹åŒ–æ—¶ç”Ÿæˆçš„å¯†ç ï¼ˆé»˜è®¤å­˜æ”¾åœ¨<code>log/initialize.log</code>ï¼‰ï¼Œå¯æ­£å¸¸è¿”å› HTTP å“åº”ï¼ŒéªŒè¯äº† Easysearch é›†ç¾¤çš„å¯è®¿é—®æ€§ã€‚</p>
<h3 id="4-Console-ä½¿ç”¨"><a href="#4-Console-ä½¿ç”¨" class="headerlink" title="4. Console ä½¿ç”¨"></a>4. Console ä½¿ç”¨</h3><p>ä¸‹è½½å¹¶è¿è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶<code>./console-mac-arm64</code>ï¼ŒæœåŠ¡ç›‘å¬åœ¨ 9000 ç«¯å£ï¼Œå¯æ›¿ä»£ Kibana è¿æ¥ Easysearchã€ES å’Œ OpenSearchã€‚è¿è¡Œè¿‡ç¨‹ä¸­ä¼šæœ‰éƒ¨åˆ†è­¦å‘Šä¿¡æ¯ï¼Œå¦‚é‡å¤çš„æ¶æ„å®šä¹‰ï¼Œä½†ä¸å½±å“åŸºæœ¬åŠŸèƒ½ä½¿ç”¨ï¼Œè¿˜å¯æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯å’Œè¿›è¡Œ DSL æŸ¥è¯¢ã€‚</p>
<h3 id="5-Gateway-ä½¿ç”¨"><a href="#5-Gateway-ä½¿ç”¨" class="headerlink" title="5. Gateway ä½¿ç”¨"></a>5. Gateway ä½¿ç”¨</h3><ul>
<li><strong>é…ç½®é—®é¢˜ä¸è§£å†³</strong>ï¼šINFINI Gateway æ˜¯é«˜æ€§èƒ½æ•°æ®ç½‘å…³ï¼ŒMac ä¸Šè¿è¡Œæ—¶å¯èƒ½å› å®‰å…¨è§„åˆ™æŠ¥é”™ï¼Œéœ€åœ¨â€œç³»ç»Ÿåå¥½è®¾ç½® - å®‰å…¨æ€§ä¸éšç§ - é€šç”¨â€ä¸­ç‚¹å‡»â€œä»ç„¶å…è®¸â€ã€‚è‹¥é…ç½®ä¸æ­£ç¡®ä¼šå‡ºç°è¿æ¥ä¸ä¸Šé›†ç¾¤çš„é”™è¯¯ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶åå¯æ­£å¸¸å¯åŠ¨ã€‚</li>
<li><strong>å¯åŠ¨ä¸åŠŸèƒ½éªŒè¯</strong>ï¼šå¯åŠ¨å‘½ä»¤ä¸º<code>./gateway-mac-arm64</code>ï¼Œå¯åŠ¨åå„æ¨¡å—å’Œæ’ä»¶ä¾æ¬¡å¯åŠ¨ï¼Œå¯å®ç°ç´¢å¼•çº§åˆ«çš„é™é€Ÿé™æµã€ç¼“å­˜åŠ é€Ÿã€æŸ¥è¯¢å®¡è®¡ç­‰åŠŸèƒ½ã€‚è®¤è¯åå¯ä» Gateway ä»£ç†åˆ° Easysearchï¼Œè¿˜å¯å°† Gateway æ³¨å†Œåˆ° Consoleã€‚</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.734Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">6 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦879ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../%E5%AE%9E%E7%8E%B0-infini-console-%E4%B8%8E-github-%E7%9A%84%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E9%9B%86%E6%88%90%EF%BC%9A%E4%B8%80%E7%AB%99%E5%BC%8F%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">å®ç° INFINI Console ä¸ GitHub çš„å•ç‚¹ç™»å½•é›†æˆï¼šä¸€ç«™å¼èº«ä»½éªŒè¯è§£å†³æ–¹æ¡ˆ</a></p><div class="content"><p>æœ¬æ–‡å°†ä¸ºæ‚¨è¯¦ç»†è§£æå¦‚ä½•é€šè¿‡ GitHub OAuth 2.0 åè®®ï¼Œä¸º INFINI Console å®ç°é«˜æ•ˆã€å®‰å…¨çš„å•ç‚¹ç™»å½•ï¼ˆSingle Sign-On, SSOï¼‰é›†æˆã€‚é€šè¿‡æ­¤æ–¹æ¡ˆï¼Œç”¨æˆ·å¯ç›´æ¥ä½¿ç”¨ GitHub è´¦æˆ·æ— ç¼ç™»å½• INFINI Consoleï¼Œç®€åŒ–èº«ä»½éªŒè¯æµç¨‹ï¼Œæå‡ç³»ç»Ÿå®‰å…¨æ€§ä¸ç”¨æˆ·ä½“éªŒã€‚</p>
<hr>
<h2 id="ä¸€ã€GitHub-OAuth-åº”ç”¨é…ç½®"><a href="#ä¸€ã€GitHub-OAuth-åº”ç”¨é…ç½®" class="headerlink" title="ä¸€ã€GitHub OAuth åº”ç”¨é…ç½®"></a>ä¸€ã€GitHub OAuth åº”ç”¨é…ç½®</h2><h3 id="1-åˆ›å»º-OAuth-åº”ç”¨ç¨‹åº"><a href="#1-åˆ›å»º-OAuth-åº”ç”¨ç¨‹åº" class="headerlink" title="1. åˆ›å»º OAuth åº”ç”¨ç¨‹åº"></a>1. åˆ›å»º OAuth åº”ç”¨ç¨‹åº</h3><ul>
<li><p>ç™»å½• GitHubï¼Œå¯¼èˆªè‡³ <strong>Settings</strong> -&gt; <strong>Developer settings</strong> -&gt; <strong>OAuth Apps</strong>ã€‚</p>
</li>
<li><p>ç‚¹å‡» <strong>New OAuth App</strong>ï¼Œåˆ›å»ºæ–°çš„ OAuth åº”ç”¨ç¨‹åºã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/2b55471e441f7be84a64b56aaf5eefca.png" alt="åˆ›å»º OAuth åº”ç”¨"></p>
</li>
</ul>
<h3 id="2-é…ç½®åº”ç”¨ä¿¡æ¯"><a href="#2-é…ç½®åº”ç”¨ä¿¡æ¯" class="headerlink" title="2. é…ç½®åº”ç”¨ä¿¡æ¯"></a>2. é…ç½®åº”ç”¨ä¿¡æ¯</h3><ul>
<li><p>å¡«å†™åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Application Name</strong>ï¼šåº”ç”¨åç§°ï¼ˆå¦‚ â€œINFINI Console SSOâ€ï¼‰</li>
<li><strong>Homepage URL</strong>ï¼šåº”ç”¨ä¸»é¡µ URL</li>
<li><strong>Authorization callback URL</strong>ï¼šå›è°ƒ URLï¼ˆæ ¼å¼ï¼š<code>http://localhost:9000/oauth/callback</code>ï¼‰</li>
</ul>
<p><img src="https://i-blog.csdnimg.cn/img_convert/09c482af58f80c6fbed95c365f5e69e7.png" alt="é…ç½®åº”ç”¨ä¿¡æ¯"></p>
</li>
</ul>
<h3 id="3-è·å–å®¢æˆ·ç«¯å‡­è¯"><a href="#3-è·å–å®¢æˆ·ç«¯å‡­è¯" class="headerlink" title="3. è·å–å®¢æˆ·ç«¯å‡­è¯"></a>3. è·å–å®¢æˆ·ç«¯å‡­è¯</h3><ul>
<li><p>åˆ›å»ºåº”ç”¨åï¼Œç³»ç»Ÿå°†ç”Ÿæˆ <strong>Client ID</strong> å’Œ <strong>Client Secret</strong>ã€‚</p>
</li>
<li><p>è¿™äº›å‡­è¯å°†ç”¨äº INFINI Console çš„ OAuth é…ç½®ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/c74e049c38f998c1965513938b859656.png" alt="è·å–å®¢æˆ·ç«¯å‡­è¯"></p>
</li>
</ul>
<h3 id="4-æŸ¥çœ‹å·²æ³¨å†Œçš„-OAuth-åº”ç”¨"><a href="#4-æŸ¥çœ‹å·²æ³¨å†Œçš„-OAuth-åº”ç”¨" class="headerlink" title="4. æŸ¥çœ‹å·²æ³¨å†Œçš„ OAuth åº”ç”¨"></a>4. æŸ¥çœ‹å·²æ³¨å†Œçš„ OAuth åº”ç”¨</h3><ul>
<li><p>åˆ›å»ºå®Œæˆåï¼Œæ‚¨å¯ä»¥åœ¨ OAuth åº”ç”¨åˆ—è¡¨ä¸­æŸ¥çœ‹åº”ç”¨çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/c5b366939ab25fd22bfc2a7db66465eb.png" alt="å·²æ³¨å†Œçš„ OAuth åº”ç”¨"></p>
</li>
</ul>
<hr>
<h2 id="äºŒã€INFINI-Console-çš„-OAuth-é›†æˆé…ç½®"><a href="#äºŒã€INFINI-Console-çš„-OAuth-é›†æˆé…ç½®" class="headerlink" title="äºŒã€INFINI Console çš„ OAuth é›†æˆé…ç½®"></a>äºŒã€INFINI Console çš„ OAuth é›†æˆé…ç½®</h2><h3 id="1-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#1-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="1. ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>1. ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><ul>
<li><p>ç¼–è¾‘ INFINI Console çš„é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ OAuth é…ç½®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">security:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">oauth:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">client_id:</span> <span class="string">&quot;xxxx&quot;</span> <span class="comment"># æ›¿æ¢ä¸ºæ‚¨çš„ Client ID</span></span><br><span class="line">    <span class="attr">client_secret:</span> <span class="string">&quot;xxxx&quot;</span> <span class="comment"># æ›¿æ¢ä¸ºæ‚¨çš„ Client Secret</span></span><br><span class="line">    <span class="attr">default_roles:</span> [<span class="string">&quot;ReadonlyUI&quot;</span>, <span class="string">&quot;AllClusters&quot;</span>] <span class="comment"># é»˜è®¤è§’è‰²</span></span><br><span class="line">    <span class="attr">role_mapping:</span></span><br><span class="line">      <span class="attr">medcl:</span> [<span class="string">&quot;Administrator&quot;</span>] <span class="comment"># ç‰¹å®šç”¨æˆ·çš„è§’è‰²æ˜ å°„</span></span><br><span class="line">    <span class="attr">authorize_url:</span> <span class="string">&quot;https://github.com/login/oauth/authorize&quot;</span></span><br><span class="line">    <span class="attr">token_url:</span> <span class="string">&quot;https://github.com/login/oauth/access_token&quot;</span></span><br><span class="line">    <span class="attr">redirect_url:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">scopes:</span> []</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-é…ç½®è§’è‰²æƒé™"><a href="#2-é…ç½®è§’è‰²æƒé™" class="headerlink" title="2. é…ç½®è§’è‰²æƒé™"></a>2. é…ç½®è§’è‰²æƒé™</h3><ul>
<li><p><strong>AllClusters</strong> è§’è‰²ï¼šç”¨äºç®¡ç†é›†ç¾¤çš„å…¨å±€æƒé™ã€‚</p>
</li>
<li><p><strong>ReadonlyUI</strong> è§’è‰²ï¼šä¸ºåªè¯»ç”¨æˆ·åˆ†é…å—é™æƒé™ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/a66c8d089d3a123ee52f564187b18238.png" alt="AllClusters è§’è‰²é…ç½®"></p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/22c5cbaad09ce16755d22c219a3f2418.png" alt="Readonly è§’è‰²é…ç½®"></p>
</li>
</ul>
<hr>
<h2 id="ä¸‰ã€å•ç‚¹ç™»å½•æµç¨‹æ¼”ç¤º"><a href="#ä¸‰ã€å•ç‚¹ç™»å½•æµç¨‹æ¼”ç¤º" class="headerlink" title="ä¸‰ã€å•ç‚¹ç™»å½•æµç¨‹æ¼”ç¤º"></a>ä¸‰ã€å•ç‚¹ç™»å½•æµç¨‹æ¼”ç¤º</h2><h3 id="1-è®¿é—®-INFINI-Console"><a href="#1-è®¿é—®-INFINI-Console" class="headerlink" title="1. è®¿é—® INFINI Console"></a>1. è®¿é—® INFINI Console</h3><ul>
<li><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® <code>http://localhost:9000</code>ã€‚</p>
</li>
<li><p>ç‚¹å‡» <strong>å•ç‚¹ç™»å½•</strong> æŒ‰é’®ï¼Œè¿›å…¥ç™»å½•æµç¨‹ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/dad06ed04e30d2a4fb0f13d09cc3e81d.png" alt="å•ç‚¹ç™»å½•å…¥å£"></p>
</li>
</ul>
<h3 id="2-ä½¿ç”¨-GitHub-ç™»å½•"><a href="#2-ä½¿ç”¨-GitHub-ç™»å½•" class="headerlink" title="2. ä½¿ç”¨ GitHub ç™»å½•"></a>2. ä½¿ç”¨ GitHub ç™»å½•</h3><ul>
<li><p>ç‚¹å‡» <strong>GitHub</strong> å›¾æ ‡ï¼Œè·³è½¬è‡³ GitHub ç™»å½•é¡µé¢ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/b64cc1db411aaeb31502511873cb3322.png" alt="GitHub ç™»å½•ç•Œé¢"></p>
</li>
</ul>
<h3 id="3-æˆæƒåº”ç”¨è®¿é—®"><a href="#3-æˆæƒåº”ç”¨è®¿é—®" class="headerlink" title="3. æˆæƒåº”ç”¨è®¿é—®"></a>3. æˆæƒåº”ç”¨è®¿é—®</h3><ul>
<li><p>åœ¨ GitHub æˆæƒé¡µé¢ï¼Œç¡®è®¤æˆæƒ INFINI Console è®¿é—®æ‚¨çš„ GitHub è´¦æˆ·ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/1ef73d2f3eac4e88369b76346e51cfe9.png" alt="GitHub æˆæƒé¡µé¢"></p>
</li>
</ul>
<h3 id="4-ç™»å½•æˆåŠŸ"><a href="#4-ç™»å½•æˆåŠŸ" class="headerlink" title="4. ç™»å½•æˆåŠŸ"></a>4. ç™»å½•æˆåŠŸ</h3><ul>
<li><p>æˆæƒæˆåŠŸåï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è·³è½¬å› INFINI Consoleï¼Œå¹¶æ˜¾ç¤ºæ‚¨çš„ GitHub ç”¨æˆ·åã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/d6c6bdf6c8899e1c5de5f6b80ac1d0d9.png" alt="ç™»å½•æˆåŠŸé¡µé¢"></p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/e905f2a3f0bec0fa02473ddc413f0d0d.png" alt="æ˜¾ç¤º GitHub ç”¨æˆ·å"></p>
</li>
</ul>
<hr>
<h2 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h2><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å·²æˆåŠŸå°† INFINI Console ä¸ GitHub çš„å•ç‚¹ç™»å½•åŠŸèƒ½é›†æˆã€‚æ­¤æ–¹æ¡ˆä¸ä»…ç®€åŒ–äº†ç”¨æˆ·çš„ç™»å½•æµç¨‹ï¼Œè¿˜é€šè¿‡ GitHub çš„ OAuth 2.0 åè®®ç¡®ä¿äº†èº«ä»½éªŒè¯çš„å®‰å…¨æ€§ã€‚æœªæ¥ï¼Œå¸Œæœ› INFINI Console è¿›ä¸€æ­¥æ‰©å±•è§’è‰²æƒé™ç®¡ç†ï¼Œæˆ–é›†æˆå…¶ä»–èº«ä»½æä¾›è€…ï¼ˆå¦‚ Googleã€Microsoft ç­‰ï¼‰ï¼Œæ‰“é€ æ›´åŠ çµæ´»çš„èº«ä»½éªŒè¯ä½“ç³»ã€‚</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.734Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">6 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦965ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../coco-ai-app-%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%9A%E5%BC%80%E5%90%AF%E6%99%BA%E8%83%BD%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86%E6%96%B0%E7%AF%87%E7%AB%A0/">CoCo AI APP åˆä½“éªŒï¼šå¼€å¯æ™ºèƒ½çŸ¥è¯†ç®¡ç†æ–°ç¯‡ç« </a></p><div class="content"><p>è¿‘æ—¥ï¼Œæé™ç§‘æŠ€çš„ Coco AI æ­£å¼å‘å¸ƒã€‚ä½œä¸ºä¸€æ¬¾å®Œå…¨å¼€æºã€è·¨å¹³å°çš„ç»Ÿä¸€ AI æœç´¢ä¸æ•ˆç‡å·¥å…·ï¼ŒCoco AI èƒ½å¤Ÿæ— ç¼è¿æ¥å¹¶æœç´¢å¤šç§æ•°æ®æºï¼ŒåŒ…æ‹¬æœ¬åœ°åº”ç”¨ç¨‹åºã€æ–‡ä»¶ä»¥åŠäº‘ç«¯å¹³å°å¦‚ Google Driveã€Notionã€è¯­é›€å’Œ Hugo ç­‰ã€‚é€šè¿‡é›†æˆ DeepSeek ç­‰å…ˆè¿›çš„å¤§æ¨¡å‹ï¼ŒCoco AI ä¸ä»…å®ç°äº†æ™ºèƒ½åŒ–çš„ä¸ªäººçŸ¥è¯†åº“ç®¡ç†ï¼Œè¿˜ç‰¹åˆ«æ³¨é‡ç”¨æˆ·éšç§ï¼Œæ”¯æŒç§æœ‰éƒ¨ç½²ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¿«é€Ÿã€æ›´æ™ºèƒ½åœ°è®¿é—®å’Œç®¡ç†ä¿¡æ¯ã€‚</p>
<h3 id="Coco-AI"><a href="#Coco-AI" class="headerlink" title="Coco AI"></a>Coco AI</h3><p>æœ¬æ¬¡å‘å¸ƒçš„æ˜¯ Coco AI çš„é¦–ä¸ªé¢„è§ˆç‰ˆæœ¬ï¼Œç›®å‰æ”¯æŒ MacOS 12 åŠä»¥ä¸Šæ“ä½œç³»ç»Ÿã€‚æ— è®ºä½ æ˜¯çŸ¥è¯†ç®¡ç†çˆ±å¥½è€…è¿˜æ˜¯æ•ˆç‡å·¥å…·æ§ï¼ŒCoco AI éƒ½å€¼å¾—ä¸€è¯•ã€‚</p>
<ul>
<li><strong>é¡¹ç›®ä¸»é¡µ</strong>: <a target="_blank" rel="noopener" href="https://coco.rs/">https://coco.rs/</a></li>
<li><strong>å¼€æºåœ°å€</strong>:<ul>
<li>æ¡Œé¢åº”ç”¨ç«¯: <a target="_blank" rel="noopener" href="https://github.com/infinilabs/coco-app/">https://github.com/infinilabs/coco-app/</a></li>
<li>æœåŠ¡ç«¯: <a target="_blank" rel="noopener" href="https://github.com/infinilabs/coco-server">https://github.com/infinilabs/coco-server</a></li>
</ul>
</li>
</ul>
<p>Coco AI åˆ†ä¸ºå®¢æˆ·ç«¯ï¼ˆAPPï¼‰å’ŒæœåŠ¡ç«¯ï¼ˆServerï¼‰ï¼Œç›®å‰å®¢æˆ·ç«¯ä»…æä¾› MacOS ç‰ˆæœ¬ï¼Œè€ŒæœåŠ¡ç«¯åˆ™æ”¯æŒ MacOS å’Œ Linuxã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä½“éªŒå®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚</p>
<h3 id="ä¸‹è½½ä¸å®‰è£…"><a href="#ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="ä¸‹è½½ä¸å®‰è£…"></a>ä¸‹è½½ä¸å®‰è£…</h3><p>é¦–å…ˆï¼Œä»é¡¹ç›®ä¸»é¡µæˆ– GitHub ä»“åº“ä¸‹è½½ Coco AI çš„å®‰è£…åŒ…ã€‚å®‰è£…è¿‡ç¨‹ç®€å•ç›´è§‚ï¼Œåªéœ€å‡ æ­¥å³å¯å®Œæˆã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/f0c9a3a9ab65f527efaa707dcb499947.png" alt="ä¸‹è½½å®‰è£…"></p>
<p>å®‰è£…å®Œæˆåï¼Œå¯åŠ¨ Coco AIï¼Œä½ ä¼šåœ¨å¯¼èˆªæ ä¸­çœ‹åˆ°å®ƒçš„å›¾æ ‡ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/c77fb9e6f4d50764862006a7158589d2.png" alt="å¯åŠ¨ç•Œé¢"></p>
<h3 id="åˆå§‹è®¾ç½®"><a href="#åˆå§‹è®¾ç½®" class="headerlink" title="åˆå§‹è®¾ç½®"></a>åˆå§‹è®¾ç½®</h3><p>åœ¨è®¾ç½®é¡µé¢ï¼Œä½ å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½è¿›è¡Œä¸€äº›åŸºæœ¬é…ç½®ï¼Œå¦‚è®¾ç½®è‡ªåŠ¨å¯åŠ¨ã€è‡ªå®šä¹‰æœç´¢æ çƒ­é”®ã€ä»¥åŠæ˜¯å¦è·Ÿéšç³»ç»Ÿä¸»é¢˜ç­‰ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/5cf474bed33108ba1c1c604ea4d3669f.png" alt="è®¾ç½®é¡µé¢"></p>
<h3 id="ç™»å½•ä¸è¿æ¥"><a href="#ç™»å½•ä¸è¿æ¥" class="headerlink" title="ç™»å½•ä¸è¿æ¥"></a>ç™»å½•ä¸è¿æ¥</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒCoco AI ä¼šè¿æ¥åˆ° Coco Cloudã€‚ä½ å¯ä»¥é€‰æ‹©ç™»å½•ä»¥è§£é”æ›´å¤šåŠŸèƒ½ã€‚ç›®å‰ï¼ŒCoco AI æ”¯æŒé€šè¿‡ GitHub å’Œ Google è¿›è¡Œå•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/e0cb00c46fa1aeb3fbe2fee5b871861a.png" alt="ç™»å½•ç•Œé¢"></p>
<p>ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡å®šå‘åˆ° Coco AI çš„ä¸»ç•Œé¢ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/33d5b1b77fab0b6ef323e71c4c939eff.png" alt="ç™»å½•åç•Œé¢"></p>
<h3 id="è¯­æ–™åº“ç®¡ç†"><a href="#è¯­æ–™åº“ç®¡ç†" class="headerlink" title="è¯­æ–™åº“ç®¡ç†"></a>è¯­æ–™åº“ç®¡ç†</h3><p>ç™»å½•åï¼ŒCoco AI é»˜è®¤ä¼šæ·»åŠ æé™ç§‘æŠ€å®˜æ–¹åŠç›¸å…³è¡ç”Ÿäº§å“ä½œä¸ºåˆå§‹è¯­æ–™åº“ã€‚å¦‚æœä½ æœ‰è‡ªå·±çš„æœåŠ¡å™¨ï¼Œè¿˜å¯ä»¥æ·»åŠ æ›´å¤šä¸ªæ€§åŒ–çš„è¯­æ–™åº“ï¼Œå¦‚ Google Docsã€è¯­é›€ã€Notion ç­‰ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/3958d654673a367b4bb2850e1a8a7044.png" alt="è¯­æ–™åº“ç®¡ç†"></p>
<h3 id="RAG-æœç´¢ä½“éªŒ"><a href="#RAG-æœç´¢ä½“éªŒ" class="headerlink" title="RAG æœç´¢ä½“éªŒ"></a>RAG æœç´¢ä½“éªŒ</h3><p>Coco AI çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶ RAGï¼ˆRetrieval-Augmented Generationï¼‰æœç´¢åŠŸèƒ½ã€‚é€šè¿‡è¿™ä¸€åŠŸèƒ½ï¼Œä½ å¯ä»¥å¿«é€Ÿæ£€ç´¢åˆ°è‡ªå·±ä¹‹å‰æ’°å†™çš„æ–‡ç« æˆ–å…¶ä»–æ–‡æ¡£ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/e9c48ba331aa880b992d2e29496503e2.png" alt="RAG æœç´¢"></p>
<p>æ­¤å¤–ï¼Œæœç´¢æ è¿˜å¯ä»¥ä½œä¸ºä¸€ä¸ªç«™å†…èŠå¤©æœºå™¨äººä½¿ç”¨ï¼Œé»˜è®¤ Coco Cloud çš„åç«¯æ¥å…¥çš„å¤§æ¨¡å‹æ˜¯ deeseekï¼Œè¿›ä¸€æ­¥æå‡äº¤äº’ä½“éªŒã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/956986b027c25fc7f5f382e7d35d1742.png" alt="ç«™å†…èŠå¤©æœºå™¨äºº"></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Coco AI ä½œä¸ºä¸€æ¬¾å…¨æ–°çš„ AI æœç´¢ä¸æ•ˆç‡å·¥å…·ï¼Œå‡­å€Ÿå…¶å¼€æºã€è·¨å¹³å°ã€æ™ºèƒ½åŒ–ç­‰ç‰¹æ€§ï¼Œä¸ºç”¨æˆ·æä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚æ— è®ºæ˜¯ä¸ªäººçŸ¥è¯†ç®¡ç†è¿˜æ˜¯å›¢é˜Ÿåä½œï¼ŒCoco AI éƒ½èƒ½èƒœä»»ã€‚æœŸå¾…æœªæ¥æ›´å¤šåŠŸèƒ½çš„åŠ å…¥ï¼Œä¹Ÿæ¬¢è¿æ›´å¤šç”¨æˆ·åŠ å…¥ Coco AI çš„ä½“éªŒä¹‹æ—…ï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-07-01T16:00:00.000Z" title="7/1/2025, 4:00:00 PM">2025-07-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-06-30T08:36:33.735Z" title="6/30/2025, 8:36:33 AM">2025-06-30</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/">æé™ç§‘æŠ€</a></span><span class="level-item">7 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1114ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="../../coco-ai-%E6%8E%A5%E5%85%A5-google-drive-%E6%95%B0%E6%8D%AE%E6%BA%90%E5%85%A8%E6%B5%81%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%E6%BC%94%E7%A4%BA%EF%BC%89/">Coco-AI æ¥å…¥ Google Drive æ•°æ®æºå…¨æµç¨‹æŒ‡å—ï¼ˆå›¾å½¢åŒ–ç•Œé¢æ¼”ç¤ºï¼‰</a></p><div class="content"><p>Coco-AI æœ€æ—©ç‰ˆæœ¬å°±å†…ç½®äº†å¯¹ Google Drive çš„è®¿é—®èƒ½åŠ›ã€‚å¦‚ä»Šï¼Œå€ŸåŠ©å›¾å½¢åŒ–é…ç½®ç•Œé¢ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥ä¸€é”®å®Œæˆæˆæƒæ¥å…¥ï¼Œåœ¨ AI æ•°æ®å¤„ç†æµç¨‹ä¸­ç›´æ¥ä½¿ç”¨ Google Drive ä¸­çš„è§†é¢‘ã€æ–‡æ¡£ç­‰æ–‡ä»¶ä½œä¸ºæ•°æ®æºã€‚</p>
<p>æœ¬æ–‡å°†å®Œæ•´æ¼”ç¤ºå¦‚ä½•é€šè¿‡ Google OAuth2 æˆæƒæœºåˆ¶ï¼Œè®© Coco-AI æˆåŠŸå¯¹æ¥ Google Driveï¼Œå¹¶å°†å…¶ä¸­çš„è§†é¢‘ç­‰æ–‡ä»¶ä½œä¸ºå¯è®¿é—®çš„æ•°æ®æºå¯¼å…¥ç³»ç»Ÿã€‚ç›¸æ¯”ä»¥å¾€ç¹ççš„æ‰‹å·¥æ­¥éª¤ï¼Œç°åœ¨å…¨ç¨‹å›¾å½¢åŒ–ï¼Œå‡ ä¹é›¶ä»£ç ï¼Œæå¤§åœ°é™ä½äº†ä½¿ç”¨é—¨æ§›ã€‚</p>
<hr>
<h2 id="ä¸€ã€å‡†å¤‡å·¥ä½œï¼šåˆ›å»º-Google-OAuth2-å®¢æˆ·ç«¯"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œï¼šåˆ›å»º-Google-OAuth2-å®¢æˆ·ç«¯" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œï¼šåˆ›å»º Google OAuth2 å®¢æˆ·ç«¯"></a>ä¸€ã€å‡†å¤‡å·¥ä½œï¼šåˆ›å»º Google OAuth2 å®¢æˆ·ç«¯</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <a target="_blank" rel="noopener" href="https://console.cloud.google.com/">Google Cloud Console</a> ä¸­é…ç½®ä¸€ä¸ª OAuth2 å®¢æˆ·ç«¯ï¼Œç”¨äºè·å–ç”¨æˆ·æˆæƒï¼Œå¹¶è®¿é—®å…¶ Google Drive æ•°æ®ã€‚</p>
<p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼ˆè™½ç„¶ç•¥æ˜¾ç®€ç•¥ï¼‰ï¼š</p>
<p>ğŸ‘‰ <a target="_blank" rel="noopener" href="https://developers.google.com/workspace/drive/api/quickstart/go?hl=zh-cn">https://developers.google.com/workspace/drive/api/quickstart/go?hl=zh-cn</a></p>
<h3 id="æ­¥éª¤ï¼š"><a href="#æ­¥éª¤ï¼š" class="headerlink" title="æ­¥éª¤ï¼š"></a>æ­¥éª¤ï¼š</h3><ol>
<li>è¿›å…¥ Google Cloud Consoleï¼Œå¯ç”¨ Drive APIï¼›</li>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„ OAuth2 å®¢æˆ·ç«¯ï¼Œé€‰æ‹©â€œWeb åº”ç”¨â€ï¼Œå¹¶é…ç½®å›è°ƒåœ°å€ï¼ˆå¦‚å›¾ï¼š<code>http://localhost:9000/connector/google_drive/oauth_redirect</code>ï¼‰ï¼›</li>
</ol>
<p><img src="https://i-blog.csdnimg.cn/img_convert/31570ea4d4f5e4d8924630200188ac50.png" alt="image-20250417214328588"></p>
<hr>
<ol start="3">
<li>è·å– <code>client_id</code> å’Œ <code>client_secret</code>ï¼Œä¿å­˜å¤‡ç”¨ï¼›</li>
<li>åœ¨â€œOAuth åŒæ„å±å¹•â€ä¸­å®Œå–„åº”ç”¨ä¿¡æ¯ï¼Œå¹¶æ·»åŠ <strong>æ•æ„Ÿæƒé™ä½œç”¨åŸŸ</strong>ï¼ˆscopesï¼‰ã€‚</li>
</ol>
<p><img src="https://i-blog.csdnimg.cn/img_convert/d26adac08e614300039cb1c8592e00b5.png" alt="image-20250417214423627"></p>
<h2 id="äºŒã€æ·»åŠ æ‰€éœ€æƒé™ï¼šå¼€æ”¾-Drive-è®¿é—®èƒ½åŠ›"><a href="#äºŒã€æ·»åŠ æ‰€éœ€æƒé™ï¼šå¼€æ”¾-Drive-è®¿é—®èƒ½åŠ›" class="headerlink" title="äºŒã€æ·»åŠ æ‰€éœ€æƒé™ï¼šå¼€æ”¾ Drive è®¿é—®èƒ½åŠ›"></a>äºŒã€æ·»åŠ æ‰€éœ€æƒé™ï¼šå¼€æ”¾ Drive è®¿é—®èƒ½åŠ›</h2><p>æ­¤å¤„æ˜¯å¾ˆå¤šäººå®¹æ˜“å¿½ç•¥çš„å…³é”®æ­¥éª¤ã€‚ä½ å¿…é¡»æ‰‹åŠ¨æ·»åŠ å¦‚ä¸‹æƒé™ï¼Œæ‰èƒ½è®©æˆæƒåè¿”å›çš„ token æ‹¥æœ‰è®¿é—® Google Drive æ ¹ç›®å½•çš„èƒ½åŠ›ã€‚</p>
<ul>
<li><p>æ¨èæ·»åŠ æƒé™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.googleapis.com/auth/drive</span><br></pre></td></tr></table></figure></li>
</ul>
<p>åœ¨æ§åˆ¶å°ä¸­â€œæ•°æ®è®¿é—®æƒé™â€é¡µæ·»åŠ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/de0869839765e83237389d928416b812.png" alt="æ·»åŠ æƒé™"></p>
<hr>
<p>åœ¨è¿™åŠ å…¥æµ‹è¯•ç”¨æˆ·ï¼Œå¦åˆ™ç™»é™†åä½ ä¼šå¾—åˆ° 403</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/e371d2c5ac50ef026d29993fb613e5a5.png" alt="image-20250417220449745"></p>
<h2 id="ä¸‰ã€å°†æˆæƒä¿¡æ¯é…ç½®åˆ°-Coco-Server"><a href="#ä¸‰ã€å°†æˆæƒä¿¡æ¯é…ç½®åˆ°-Coco-Server" class="headerlink" title="ä¸‰ã€å°†æˆæƒä¿¡æ¯é…ç½®åˆ° Coco Server"></a>ä¸‰ã€å°†æˆæƒä¿¡æ¯é…ç½®åˆ° Coco Server</h2><p>åœ¨ Coco Server ç®¡ç†ç•Œé¢ä¸­ï¼Œæˆ‘ä»¬è¿›å…¥ã€Œè®¾ç½®ã€â†’[ connector ] â†’ã€ŒGoogle Driveã€ï¼Œå¡«å†™åˆšæ‰è·å–çš„ <code>client_id</code> å’Œ <code>client_secret</code>ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/f1306475582f773a3f0b981e314d88a6.png" alt="é…ç½®ç•Œé¢"></p>
<p>ç‚¹å‡»ã€Œè¿æ¥ã€æŒ‰é’®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è·³è½¬åˆ° Google SSO æˆæƒé¡µé¢ï¼Œç”¨æˆ·åªéœ€é€‰æ‹©è´¦å·å¹¶æˆæƒå³å¯ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/d938a17f854ee120ddc29a8a5b007237.png" alt="image-20250417214839097"></p>
<hr>
<h2 id="å››ã€è¿›è¡Œ-Google-SSO-ç™»å½•æˆæƒ"><a href="#å››ã€è¿›è¡Œ-Google-SSO-ç™»å½•æˆæƒ" class="headerlink" title="å››ã€è¿›è¡Œ Google SSO ç™»å½•æˆæƒ"></a>å››ã€è¿›è¡Œ Google SSO ç™»å½•æˆæƒ</h2><p>æˆæƒé¡µé¢å¦‚ä¸‹ï¼Œè‹¥è´¦å·å¤„äºæµ‹è¯•çŠ¶æ€ï¼Œå¯èƒ½ä¼šæœ‰æç¤ºå¼¹çª—ï¼Œç‚¹å‡»ã€Œç»§ç»­ã€å³å¯ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/5fbc5b603a5dd23b667a6ee780602523.png" alt="SSO å¼¹çª—"></p>
<p>Google è”åˆç™»é™†è¯¥æœ‰çš„è¿™é‡Œéƒ½æœ‰</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/7c55dc78023b1dfba071552514b463ba.png" alt="image-20250417214908799"></p>
<p>ä¼šæç¤ºä½ å³å°†æˆäºˆæƒé™ï¼Œé€‰æ‹©ç»§ç»­</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/fe12e4479187c4bf05d2fdb9ba9206d9.png" alt="image-20250417211919662"></p>
<p>å®Œæˆæˆæƒåï¼Œé¡µé¢å°†æ˜¾ç¤ºã€Œç™»å½•æˆåŠŸã€ï¼Œè¡¨ç¤º access token è·å–å¹¶å­˜å‚¨å®Œæ¯•ã€‚</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/94336e24f48a77a054ed62fe497e33a7.png" alt="ç™»å½•æˆåŠŸ"></p>
<hr>
<h2 id="äº”ã€éªŒè¯æ¥å…¥æ•ˆæœï¼šå¯¼å…¥-Drive-æ–‡ä»¶"><a href="#äº”ã€éªŒè¯æ¥å…¥æ•ˆæœï¼šå¯¼å…¥-Drive-æ–‡ä»¶" class="headerlink" title="äº”ã€éªŒè¯æ¥å…¥æ•ˆæœï¼šå¯¼å…¥ Drive æ–‡ä»¶"></a>äº”ã€éªŒè¯æ¥å…¥æ•ˆæœï¼šå¯¼å…¥ Drive æ–‡ä»¶</h2><p>æˆæƒæˆåŠŸåï¼Œæˆ‘ä»¬å›åˆ° Coco Server åå°çš„æ•°æ®æºé¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿå·²æˆåŠŸè¯»å–ç»‘å®šç”¨æˆ·çš„ Google Drive æ–‡ä»¶ï¼š</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/f899daa503645acf708cc5b542bb942a.png" alt="æ•°æ®åˆ—è¡¨"></p>
<p>æ­¤æ—¶ï¼Œä½ å°±å¯ä»¥åƒæ“ä½œæœ¬åœ°æ–‡ä»¶ä¸€æ ·ï¼Œè‡ªç”±ä½¿ç”¨ Google Drive ä¸­çš„è§†é¢‘æˆ–æ–‡æ¡£æ•°æ®è¿›è¡Œåˆ†æã€é—®ç­”ã€è®­ç»ƒç­‰æ“ä½œã€‚</p>
<hr>
<h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬æˆåŠŸå®Œæˆäº†ï¼š</p>
<ul>
<li>Google Cloud å¹³å°åˆ›å»º OAuth2 å®¢æˆ·ç«¯ï¼›</li>
<li>æ‰‹åŠ¨æ·»åŠ  Google Drive æ‰€éœ€æƒé™ï¼›</li>
<li>åœ¨ Coco Server ä¸­é…ç½®æˆæƒä¿¡æ¯ï¼›</li>
<li>æˆåŠŸå®Œæˆ Google ç™»å½•å¹¶æ¥å…¥ Drive æ–‡ä»¶ã€‚</li>
</ul>
<p>è¿™ä¹Ÿæ„å‘³ç€ï¼ŒCoco-AI å…·å¤‡äº†ä¸€ä¸ªé‡è¦èƒ½åŠ›ï¼š<strong>å°†å¤–éƒ¨äº‘ç›˜ä½œä¸ºæ•°æ®æºï¼Œç›´æ¥å‚ä¸ AI åˆ†æä¸é—®ç­”æµç¨‹</strong>ã€‚å€ŸåŠ©å…¨å›¾å½¢åŒ–é…ç½®ç•Œé¢ï¼Œç”¨æˆ·å‡ ä¹æ— éœ€ç¼–å†™ä¸€è¡Œä»£ç ï¼Œå³å¯æ¥å…¥ Google Driveï¼Œéå¸¸é€‚åˆéœ€è¦å¿«é€Ÿè¯•éªŒã€æ— éœ€ç¹çå¼€å‘çš„åœºæ™¯ã€‚</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="../5/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next"><a href="../7/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="../../">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="../5/">5</a></li><li><a class="pagination-link is-current" href="">6</a></li><li><a class="pagination-link" href="../7/">7</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="../14/">14</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="../../images/me.png" alt="Xu"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Xu</p><p class="is-size-6 is-block">éšæ‰‹è®°</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>BEI JING</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="../../archives/"><p class="title">132</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="../../categories/"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="../../tags/"><p class="title">30</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Xu-Hardy/Xu-Hardy.github.io" target="_blank" rel="me noopener">å…³æ³¨æˆ‘</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Home" href="https://xu-hardy.github.io/"><i class="fa fa-home"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="AWS" href="https://xu-hardy.github.io/aws"><i class="fab fa-aws"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="archives" href="https://xu-hardy.github.io/archives"><i class="fa fa-calendar"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Tags" href="https://xu-hardy.github.io/tags"><i class="fa fa-tags"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="../../atom.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">é“¾æ¥</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li><li><a class="level is-mobile" href="https://liarlee.site/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Liarlee</span></span><span class="level-right"><span class="level-item tag">liarlee.site</span></span></a></li><li><a class="level is-mobile" href="https://easyhexo.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">easyhexo</span></span><span class="level-right"><span class="level-item tag">easyhexo.com</span></span></a></li><li><a class="level is-mobile" href="https://ppoffice.github.io/hexo-theme-icarus/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">hexo-theme-icarus</span></span><span class="level-right"><span class="level-item tag">ppoffice.github.io</span></span></a></li><li><a class="level is-mobile" href="https://ctext.org/histories/zhs" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ä¸­å›½å“²å­¦ä¹¦ç”µå­åŒ–è®¡åˆ’</span></span><span class="level-right"><span class="level-item tag">ctext.org</span></span></a></li><li><a class="level is-mobile" href="http://mahacashiaba.blogspot.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">äº”ä¸ªäº”ç™¾å¹´å‰</span></span><span class="level-right"><span class="level-item tag">mahacashiaba.blogspot.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile" href="../../categories/%E5%90%83%E8%B4%A7/"><span class="level-start"><span class="level-item">åƒè´§</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="../../categories/%E5%A4%96%E8%AE%BE/"><span class="level-start"><span class="level-item">å¤–è®¾</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="../../categories/%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D/"><span class="level-start"><span class="level-item">æ‡’çŒ«å¾®æœ</span></span><span class="level-end"><span class="level-item tag">43</span></span></a></li><li><a class="level is-mobile" href="../../categories/%E6%9E%81%E9%99%90%E7%A7%91%E6%8A%80/"><span class="level-start"><span class="level-item">æé™ç§‘æŠ€</span></span><span class="level-end"><span class="level-item tag">31</span></span></a></li><li><a class="level is-mobile" href="../../categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">è¯»ä¹¦ç¬”è®°</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="../../categories/%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/"><span class="level-start"><span class="level-item">è¿œç¨‹è®¿é—®</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../categories/%E9%9A%8F%E7%AC%94/"><span class="level-start"><span class="level-item">éšç¬”</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="è®¢é˜…"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-01T16:00:00.000Z">2025-07-02</time></p><p class="title"><a href="../../%E5%86%99%E7%BB%99%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D%E7%8E%A9%E5%AE%B6%E7%9A%84%E5%AE%B9%E5%99%A8%E5%B0%8F%E4%B9%A6-docker%E7%AF%87%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E3%80%8A%E6%97%A0%E6%B3%95%E9%83%A8%E7%BD%B2%E7%9A%84%E8%AF%85%E5%92%92%E3%80%8B/">å†™ç»™æ‡’çŒ«å¾®æœç©å®¶çš„å®¹å™¨å°ä¹¦ Dockerç¯‡ï¼ˆä¸€ï¼‰ï¼šã€Šæ— æ³•éƒ¨ç½²çš„è¯…å’’ã€‹</a></p><p class="categories"><a href="../../categories/%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D/">æ‡’çŒ«å¾®æœ</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-01T16:00:00.000Z">2025-07-02</time></p><p class="title"><a href="../../%E5%86%99%E7%BB%99%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D%E7%8E%A9%E5%AE%B6%E7%9A%84%E5%AE%B9%E5%99%A8%E5%B0%8F%E4%B9%A6-docker%E7%AF%87%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E3%80%8A%E9%95%9C%E5%83%8F%E6%97%85%E9%A6%86%E7%9A%84%E7%A7%98%E5%AF%86%E3%80%8B/">å†™ç»™æ‡’çŒ«å¾®æœç©å®¶çš„å®¹å™¨å°ä¹¦ Dockerç¯‡ï¼ˆäºŒï¼‰ï¼šã€Šé•œåƒæ—…é¦†çš„ç§˜å¯†ã€‹</a></p><p class="categories"><a href="../../categories/%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D/">æ‡’çŒ«å¾®æœ</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-01T16:00:00.000Z">2025-07-02</time></p><p class="title"><a href="../../%E5%86%99%E7%BB%99%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D%E7%8E%A9%E5%AE%B6%E7%9A%84%E5%AE%B9%E5%99%A8%E5%B0%8F%E4%B9%A6-docker%E7%AF%87%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E3%80%8A%E5%AE%B9%E5%99%A8%E9%83%A8%E8%90%BD%E7%94%9F%E6%B4%BB%E3%80%8B/">å†™ç»™æ‡’çŒ«å¾®æœç©å®¶çš„å®¹å™¨å°ä¹¦ Dockerç¯‡ï¼ˆä¸‰ï¼‰ï¼šã€Šå®¹å™¨éƒ¨è½ç”Ÿæ´»ã€‹</a></p><p class="categories"><a href="../../categories/%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D/">æ‡’çŒ«å¾®æœ</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-01T16:00:00.000Z">2025-07-02</time></p><p class="title"><a href="../../%E5%86%99%E7%BB%99%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D%E7%8E%A9%E5%AE%B6%E7%9A%84%E5%AE%B9%E5%99%A8%E5%B0%8F%E4%B9%A6-docker%E7%AF%87%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E3%80%8A%E6%95%B0%E6%8D%AE%E4%B9%8B%E5%B2%9B%E4%B8%8E%E6%8C%81%E4%B9%85%E5%8C%96%E5%8D%B7%E3%80%8B/">å†™ç»™æ‡’çŒ«å¾®æœç©å®¶çš„å®¹å™¨å°ä¹¦ Dockerç¯‡ï¼ˆå››ï¼‰ï¼šã€Šæ•°æ®ä¹‹å²›ä¸æŒä¹…åŒ–å·ã€‹</a></p><p class="categories"><a href="../../categories/%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D/">æ‡’çŒ«å¾®æœ</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-01T16:00:00.000Z">2025-07-02</time></p><p class="title"><a href="../../%E5%86%99%E7%BB%99%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D%E7%8E%A9%E5%AE%B6%E7%9A%84%E5%AE%B9%E5%99%A8%E5%B0%8F%E4%B9%A6docker%E7%AF%87%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E3%80%8A%E5%A4%9A%E5%AE%B9%E5%99%A8%E4%BA%A4%E5%93%8D%E6%9B%B2%EF%BC%9Adocker-compose-%E4%B8%8A%E5%9C%BA%E3%80%8B/">å†™ç»™æ‡’çŒ«å¾®æœç©å®¶çš„å®¹å™¨å°ä¹¦Dockerç¯‡ï¼ˆäº”ï¼‰ï¼šã€Šå¤šå®¹å™¨äº¤å“æ›²ï¼šDocker Compose ä¸Šåœºã€‹</a></p><p class="categories"><a href="../../categories/%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D/">æ‡’çŒ«å¾®æœ</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">å½’æ¡£</h3><ul class="menu-list"><li><a class="level is-mobile" href="../../archives/2025/07/"><span class="level-start"><span class="level-item">ä¸ƒæœˆ 2025</span></span><span class="level-end"><span class="level-item tag">68</span></span></a></li><li><a class="level is-mobile" href="../../archives/2025/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2025</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="../../archives/2025/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2024/07/"><span class="level-start"><span class="level-item">ä¸ƒæœˆ 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2024/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2024/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="../../archives/2024/03/"><span class="level-start"><span class="level-item">ä¸‰æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2024/02/"><span class="level-start"><span class="level-item">äºŒæœˆ 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2024/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/12/"><span class="level-start"><span class="level-item">åäºŒæœˆ 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/11/"><span class="level-start"><span class="level-item">åä¸€æœˆ 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/09/"><span class="level-start"><span class="level-item">ä¹æœˆ 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/07/"><span class="level-start"><span class="level-item">ä¸ƒæœˆ 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/04/"><span class="level-start"><span class="level-item">å››æœˆ 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/02/"><span class="level-start"><span class="level-item">äºŒæœˆ 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2023/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2023</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="../../archives/2022/12/"><span class="level-start"><span class="level-item">åäºŒæœˆ 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2022/11/"><span class="level-start"><span class="level-item">åä¸€æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2022/10/"><span class="level-start"><span class="level-item">åæœˆ 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2022/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2022/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2022/04/"><span class="level-start"><span class="level-item">å››æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2021/10/"><span class="level-start"><span class="level-item">åæœˆ 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2021/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="../../archives/2020/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2018/10/"><span class="level-start"><span class="level-item">åæœˆ 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../archives/2018/02/"><span class="level-start"><span class="level-item">äºŒæœˆ 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../archives/2017/10/"><span class="level-start"><span class="level-item">åæœˆ 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="../../archives/2017/03/"><span class="level-start"><span class="level-item">ä¸‰æœˆ 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">æ ‡ç­¾</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="../../tags/Coco-AI/"><span class="tag">Coco-AI</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/DIY/"><span class="tag">DIY</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/Docker/"><span class="tag">Docker</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/Linux/"><span class="tag">Linux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/MFA/"><span class="tag">MFA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/NAS/"><span class="tag">NAS</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/PWA/"><span class="tag">PWA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/Python/"><span class="tag">Python</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E4%BB%A3%E7%90%86/"><span class="tag">ä»£ç†</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E5%8C%97%E6%BC%82/"><span class="tag">åŒ—æ¼‚</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/"><span class="tag">å•ç‚¹ç™»å½•</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E5%8F%8D%E6%8A%97/"><span class="tag">åæŠ—</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E5%A4%96%E8%AE%BE/"><span class="tag">å¤–è®¾</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E5%AE%B6%E6%9C%89%E5%90%83%E8%B4%A7/"><span class="tag">å®¶æœ‰åƒè´§</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E5%BC%80%E5%8F%91/"><span class="tag">å¼€å‘</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E6%87%92%E7%8C%AB%E5%BE%AE%E6%9C%8D/"><span class="tag">æ‡’çŒ«å¾®æœ</span><span class="tag">15</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%EF%BC%88ES%EF%BC%89/"><span class="tag">æœç´¢å¼•æ“ï¼ˆESï¼‰</span><span class="tag">21</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E6%95%88%E7%8E%87/"><span class="tag">æ•ˆç‡</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E6%A2%A6/"><span class="tag">æ¢¦</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E6%B8%B8%E8%AE%B0/"><span class="tag">æ¸¸è®°</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E7%94%9F%E6%B4%BB/"><span class="tag">ç”Ÿæ´»</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E7%94%9F%E6%B4%BB%E5%B0%8F%E5%A6%99%E6%8B%9B/"><span class="tag">ç”Ÿæ´»å°å¦™æ‹›</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E7%94%B5%E5%AD%90%E6%9E%81%E5%AE%A2/"><span class="tag">ç”µå­æå®¢</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E7%A1%AC%E4%BB%B6%E4%B8%8E%E5%A4%96%E8%AE%BE/"><span class="tag">ç¡¬ä»¶ä¸å¤–è®¾</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E7%A7%9F%E6%88%BF/"><span class="tag">ç§Ÿæˆ¿</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E8%A3%85%E4%BF%AE%E6%97%A5%E8%AE%B0/"><span class="tag">è£…ä¿®æ—¥è®°</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E8%A3%85%E6%9C%BA/"><span class="tag">è£…æœº</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E8%AF%97/"><span class="tag">è¯—</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E8%AF%BB%E4%B9%A6/"><span class="tag">è¯»ä¹¦</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../tags/%E9%9A%8F%E7%AC%94/"><span class="tag">éšç¬”</span><span class="tag">2</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">è®¢é˜…æ›´æ–°</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="è®¢é˜…"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="../../index.html"><img src="../../img/favicon.svg" alt="é•œæ¹–" height="28"></a><p class="is-size-7"><span>&copy; 2025 Xu</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">å…±<span id="busuanzi_value_site_uv">0</span>ä¸ªè®¿å®¢</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/cloudsmithy/cloudsmithy.github.io"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="../../js/column.js"></script><script src="../../js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="../../js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script data-pjax src="../../js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="../../js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"../../content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>